<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Peer 2 Peer Networks | Polymath.cloud</title>

<meta name="keywords" content="" />
<meta name="description" content="An ebook about Peer 2 Peer networking">
<meta name="author" content="Bee">
<link rel="canonical" href="https://polymath.cloud/p2p-book/" />
<link href="https://polymath.cloud/assets/css/stylesheet.min.94a69f3d0b70cac76c6d6f7dfecc9f91f2319ec73d54be960b0d3624fa5a25e2.css" integrity="sha256-lKafPQtwysdsbW99/syfkfIxnsc9VL6WCw02JPpaJeI=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://polymath.cloud/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://polymath.cloud/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://polymath.cloud/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://polymath.cloud/apple-touch-icon.png">
<link rel="mask-icon" href="https://polymath.cloud/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.68.3" />




<style>
    td, th {
    border: thin solid #999 !important;
    padding: 12px 15px;
}

thead tr {
    background-color: #009879;
    color: #ffffff;
    text-align: left;
}

table {
    border-collapse: collapse;
    margin: 25px 0;
    font-size: 0.9em;
    font-family: sans-serif;
    min-width: 400px;
    overflow: auto;
    display: table;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
}

tbody tr {
    border-bottom: thin solid #dddddd;
}


tbody tr:last-of-type {
    border-bottom: 2px solid #009879;
}

tbody td.active-item {
    font-weight: bold;
    color: #009879;
}

tbody tr:nth-of-type(even) {
    background-color: #f3f3f3;
    }


body.dark tbody tr:nth-of-type(even) {
    background-color: #383838;
}


img {
    display: block;
    margin: auto;
    text-align: center;
    transition: transform .5s;

	border-left: 1px solid #ccc;
	border-top: 1px solid #ccc;
	border-right: 1px solid #888;
	border-bottom: 1px solid #888;
	background-color: #fcfcfc;
	padding: 4px;
}


img:hover
{
    transition-delay:0.22s;
    -ms-transform: scale(2, 2);
    -webkit-transform: scale(2, 2);
    transform: scale(2, 2);
}

figure {
    text-align: center;
    line-height: 0.1em;
    padding: 1em;
    margin: 5px;  
    overflow-wrap: break-word;
}

figure img {
  vertical-align: top;
}

figure figcaption{
    text-align: center;
    overflow-wrap: break-word;
    word-wrap: break-word;
}



</style>

<meta property="og:title" content="Peer 2 Peer Networks" />
<meta property="og:description" content="An ebook about Peer 2 Peer networking" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://polymath.cloud/p2p-book/" />
<meta property="article:published_time" content="2020-12-02T01:37:42+00:00" />
<meta property="article:modified_time" content="2020-12-02T01:37:42+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Peer 2 Peer Networks"/>
<meta name="twitter:description" content="An ebook about Peer 2 Peer networking"/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Peer 2 Peer Networks",
  "name": "Peer 2 Peer Networks",
  "description": "https://tryhackme.com/room/bruteit\nPreface If you\u0026amp;rsquo;re reading this, like me, you must strangely like the idea of effectively designing peer to peer networks.\nAlmost no real …",
  "keywords": [
    
  ],
  "articleBody": "https://tryhackme.com/room/bruteit\nPreface If you’re reading this, like me, you must strangely like the idea of effectively designing peer to peer networks.\nAlmost no real world usage (unless you work in this industry), but nevertheless the design is so interesting!\nPeer to peer networks effectively are close approximations of how humans interact. Much like how object orientated tried to represent how humans think, I believe peer to peer networks are how humans communicate.\nI mean, after all, you don’t talk to a single person (server) who then does everything for you (client). Well, unless you’re in a Turing test!\nThis is what makes P2P interesting to me. When looking at the design of P2P networks, we’re looking at how humans communicate, how we build our own interpersonal networks. How we can represent cities and the likes on this network.\nWe’ll start off with 2 of the biggest P2P networks. Tor and BitTorrent. To understand how to design them, we’ve got to look at the best!\nAlthough I won’t talk about Bitcoin, or any cryptocurrency. There simply is nothing for me to add. My favourite book on this topic is \"Mastering Bitcoin\". Check it out!\nTowards the end of this ebook, we’ll look at designing effective P2P networks. Taking what we saw in Tor and Bittorrent and some cryptocurrency knowledge, we’ll try to generalise a solution for designing them.\nAfter all, there is about 5,000,000 articles on designing good client-server networks but almost none on peer to peer!\nLet us begin!\nTor The United States Naval Research Laboratory developed The Onion Routing Protocol (T0r) to project U.S. intelligence communications online. Ironically, Tor has seen widespread use by everyone - even those organisations which the U.S. Navy fights against.\nYou may know Tor as the hometown of online illegal activities, a place where you can buy any drug you want, a place for all things illegal. Tor is much larger than what the media makes it out to be. According to Kings College much of Tor is legal.\nWhen you normally visit a website, your computer makes a direct TCP connection with the website’s server. Anyone monitoring your internet could read the TCP packet. They can find out what website you’re visiting and your IP address. As well as what port you’re connecting to.\nIf you’re using HTTPS, no one will know what the message said. But, sometimes all an adversary needs to know is who you’re connecting to.\nUsing Tor, your computer never communicates with the server directly. Tor creates a twisted path through 3 Tor nodes, and sends the data via that circuit.\nThe core principle of Tor is onion routing which is a technique for anonymous and secure communication over a public network. In onion routing messages are encapsulated in several layers of encryption.\n \"Onions have layers\" - Shrek\n So does a message going through Tor. Each layer in Tor is encryption, you are adding layers of encryption to a Tor message, as opposed to just adding 1 layer of encryption.\nThis is why it’s called The Onion Routing Protocol, because it adds layers at each stage.\nThe resulting onion (fully encapsulated message) is then transmitted through a series of computers in a network (called onion routers) with each computer peeling away a layer of the ‘onion’. This series of computers is called a path. Each layer contains the next destination - the next router the packet has to go to. When the final layer is decrypted you get the plaintext (non-encrypted message).\nThe original author remains anonymous because each node in the network is only aware of the preceding and following nodes in the path (except the first node that does know who the sender is, but doesn’t know the final destination).\nThis has led to attacks where large organisations with expansive resources run servers to attempt to be the first and last nodes in the network. If the organisation’s server is the first node, it knows who sent the message. If the organisation server is the last node, it knows the final destination and what the message says.\nNow we have a basic overview of Tor, let’s start exploring how each part of Tor works. Don’t worry if you’re confused, every part of Tor will be explained using gnarly diagrams.\nOverview of Tor  \"Onion Routing is a distributed overlay network designed to anonymise TCP-based applications like web browsing, secure shell and instant messaging.\"\n Clients choose a path through the network and build a circuit where each onion router in the path knows the predecessor and the successor, but no other nodes in the circuit. Paths and circuits are synonyms. {width=”\\textwidth” height=”\\textheight”} The original author (the question mark on the far left) remains anonymous, unless you’re the first path in the node as you know who sent you the packet. {width=”\\textwidth” height=”\\textheight”} No one knows what data is being sent until it reaches the last node in the path; who knows the data but doesn’t know who sent it. The second to last node in the path doesn’t know what the data is, only the last node in the path does. {width=”\\textwidth” height=”\\textheight”} This has led to attacks whereby large organisations with expansive resources create Tor servers which aim to be the first and last onion routers in a path. If the organisation can do this, they get to know who sent the data and what data was sent, effectively breaking Tor. {width=”\\textwidth” height=”\\textheight”} It’s incredibly hard to do this without being physically close to the location of the organisations servers, we’ll explore this more later.\nThroughout this article I’ll be using Netflix as a normal service (Bob) and Amazon Prime Video as the adversary (Eve). In the real world, this is incredibly unlikely to be the case. I’m not here to speculate on what organisations might want to attack Tor, so I’ve used 2 unlikely examples to avoid the political side of it.\nEach packet flows down the network in fixed-size cells. These cells have to be the same size so none of the data going through the Tor network looks suspiciously big.\nThese cells are unwrapped by a symmetric key at each router and then the cell is relayed further down the path. Let’s go into Tor itself.\nTor Itself  \"There is strength in numbers\"\n Tor needs a lot of users to create anonymity, if Tor was hard to use new users wouldn’t adopt it so quickly. Because new users won’t adopt it, Tor becomes less anonymous. By this reasoning it is easy to see that usability isn’t just a design choice of Tor but a security requirement to make Tor secure.\nIf Tor isn’t usable or designed nicely, it won’t be used by many people. If it’s not used by many people, it’s less anonymous.\nTor has had to make some design choices that may not improve security but improve usability with the hopes that an improvement in usability is an improvement in security.\nWhat Tor Isn’t Tor is not a completely decentralised peer-to-peer system like many people believe it to be. If it was completely peer to peer it wouldn’t be very usable. Tor requires a set of directory servers that manage and keep the state of the network at any given time.\nTor is not secure against end to end attacks. An end to end attack is where an entity has control of both the first and last node in a path, as talked about earlier. This is a problem that cyber security experts have yet to solve, so Tor does not have a solution to this problem.\nTor does not hide the identity of the sender.\nIn 2013 during the Final Exams period at Harvard a student tried to delay the exam by sending in a fake bomb threat. The student used Tor and Guerrilla Mail (a service which allows people to make disposable email addresses) to send the bomb threat to school officials.\nThe student was caught, even though he took precautions to make sure he wasn’t caught.\nGurillar mail sends an originating IP address header along with the email that’s sent so the receiver knows where the original email came from. With Tor, the student expected the IP address to be scrambled but the authorities knew it came from a Tor exit node (Tor keeps a list of all nodes in the directory service) so the authorities simply looked for people who were accessing Tor (within the university) at the time the email was sent.\nTor isn’t an anonymising service, but it is a service that can encrypt all traffic from A to B (so long as an end-end attack isn’t performed). Tor is also incredibly slow, so using it for Netflix isn’t a good use case. {width=”\\textwidth” height=”\\textheight”}\nThe Difference Between Tor and a VPN When you use a VPN, the VPN forwards all your internet traffic to the appropriate destination. When it does so, the VPN encrypts your traffic. All your internet service provider can see is encrypted traffic heading from your computer to the VPN. {width=”\\textwidth” height=”\\textheight”} They can’t see inside your packets. They don’t know who you’re talking to - other than the VPN.\nVPN’s aren’t private in the same way that Tor is. VPNs protect you against ISPs or local adversaries (ones monitoring your laptop’s WiFi). But, they don’t protect you from themselves.\nThe VPN is the man in the middle. It knows who you are and who you’re talking to. Depending on the traffic, the VPN also decrypts your packet. Meaning they know everything. With a VPN, you have to trust it. With Tor, you don’t have to put a lot of trust in.\nIn Tor, one rogue node is survivable. If one of the nodes in our graph earlier was an adversary, they’ll only know our IP address or our data packet. Tor protects you from Tor. VPN’s expect that you trust them.\nTor protects you from the Tor network. One rogue node is survivable. They don’t expect you to trust the network.\nNo one, apart from you, should know the IP addresses of the origin and destination - and know the contents of the message.\n{width=”\\textwidth” height=”\\textheight”}\nNow that we have a good handle on what Tor is, let’s explore onion routing.\nOnion Routing {width=”\\textwidth” height=”\\textheight”} Given the network above, we are going to simulate what Tor does. Your computer is the one on the far left, and you’re sending a request to watch Stranger Things on Netflix. This path of nodes is called a circuit. Later on, we’re going to look into how circuits are made and how the encryption works. But for now we’re trying to generalise how Tor works. {width=”\\textwidth” height=”\\textheight”} We start off with the message (we haven’t sent it yet). We need to encrypt the message N times (where N is how many nodes are in the path). We encrypt it using AES, a symmetric key crypto-system. The key is agreed using Diffie-Hellman. Don’t worry, we’ll discuss all of this later. There is 4 nodes in the path (minus your computer and Netflix) so we encrypt the message 4 times. {width=”\\textwidth” height=”\\textheight”} Our packet (onion) has 4 layers. Blue, purple, orange, and teal. Each colour represents one layer of encryption. {width=”\\textwidth” height=”\\textheight”} We send the onion to the first node in our path. That node then removes the first layer of encryption.\nEach node in the path knows what the key to decrypt their layer is (via Diffie-Hellman). Node 1 removes the blue layer with their symmetric key (that you both agreed on). {width=”\\textwidth” height=”\\textheight”} Node 1 knows you sent the message, but the message is still encrypted by 3 layers of encryption, it has no idea what the message is.\nAs it travels down the path, more and more layers are stripped away. The next node does not know who sent the packet. All it knows is that Node 1 sent them the packet, and it’s to be delivered to Node 3. {width=”\\textwidth” height=”\\textheight”} Now Node 3 strips away a layer. {width=”\\textwidth” height=”\\textheight”} The final node knows what the message is and where it’s going, but it doesn’t know who sent it. All it knows is that Node 3 sent them the message, but it doesn’t know about anyone else in the path. One of the key properties here is that once a node decrypts a layer, it cannot tell how many more layers there are to decrypt. It could be as small as 1 or 2 or as large as 200 layers of encryption. {width=”\\textwidth” height=”\\textheight”} Now there’s no way Amazon can find out you watch Netflix! Netflix sends back a part of Stranger Things.\nLet’s see how it works in reverse. {width=”\\textwidth” height=”\\textheight”} Node 4 adds its layer of encryption now. It doesn’t know who originally made the request, all it knows is that Node 3 sent the request to them so it sends the response message back to Node 3. {width=”\\textwidth” height=”\\textheight”} And so on for the next few nodes. {width=”\\textwidth” height=”\\textheight”} Now the response packet is fully encrypted. {width=”\\textwidth” height=”\\textheight”} Now the packet is fully encrypted, the only one who still knows what the message contains is Node 4. The only one who knows who made the message is Node\n Now that we have the fully encrypted response back, we can use all the symmetric keys to decrypt it. {width=”\\textwidth” height=”\\textheight”} You might be thinking \"I’ve seen snails �� faster than this\" and you would be right. This protocol isn’t designed for speed, but at the same time it has to care about speed.  The algorithm could be much slower, but much more secure (using entirely public key cryptography instead of symmetric key cryptography) but the usability of the system matters. So yes, it’s slow. No it’s not as slow as it could be. But it’s all a balancing act here.\nThe encryption used is normally AES with the key being shared via Diffie-Hellman.\nThe paths Tor creates are called circuits. Let’s explore how Tor chooses what nodes to use in a circuit.\nHow Is a Circuit Created? Each machine, when it wants to create a circuit, chooses the exit node first, followed by the other nodes in the circuit. Tor circuits are always 3 nodes. Increasing the length of the circuit does not create better anonymity. If an attacker owns the first and last nodes in the network, you can have 1500 nodes in the circuit and it still wouldn’t make you more secure.\nWhen Tor selects the exit node, it selects it following these principles:\n  Does the client’s torrc (the configuration file of Tor) have settings about which exit nodes not to choose?\n  Tor only chooses an exit relay which allows you to exit the Tor network. Some exit nodes only allow web traffic (HTTP/S port 80) which is not useful when someone wants to send email (SMTP port 25). The exit node has to have the available capacity to support you. Tor tries to choose an exit node which has enough resources available.\n  All paths in the circuit obey these rules:\n We do not choose the same router twice for the same path.  If you choose the same node twice, it’s guaranteed that the node will either be the guard node (the node you enter at) or the exit node, both dangerous positions. There is a 2/3 chance of it being both the guard and exit nodes, which is even more dangerous. We want to avoid the entry / exit attacks. {width=”\\textwidth” height=”\\textheight”}\n We do not choose any router in the same family as another in the same path. (Two routers are in the same family if each one lists the other in the “family” entries of its descriptor.)  Operators who run more than 1 Tor node can choose to signify their nodes as ‘family’. This means that the nodes have all the same parent (the operator of their network). This is again a countermeasure against the entry / exit attacks, although operators do not have to declare family if they wish. If they want to become a guard node (discussed soon) it is recommended to declare family, although not required. {width=”\\textwidth” height=”\\textheight”}\n We do not choose more than one router in a given /16 subnet.  Subnets define networks. IP addresses are made up of 8 octets of bits. As an example, Google’s IP address in binary is:\npython 01000000.11101001.10101001.01101010\nThe first 16 bits (the /16 subnet) is 01000000.11101001 which means that Tor does not choose any nodes which start with the same 16 bits as this IP address. Again, a counter-measure to the entry / exit attacks. {width=”\\textwidth” height=”\\textheight”} If subnets sound confusing, I’ve written this Python code to help explain them:\npython # ip addresses are in binary, not the usual base 10 subnets # are usually powers of 2, this is 2^4. IP = \"01000000.11101001.10101001.01101010\" subnet = 16\n# this will store the subnet address once we find it subnet_ip = [] IP_list = list(IP) counter = 0\nfor i in IP_list: # we want to end the loop when we reach the subnet number if counter = subnet: break # the ip address segments each oclet of bits with full stops # we don’t want to count a fullstop as a number # but we want to include it in the final subnet if i == \".\": subnet_ip.append(\".\") continue else: # else it is a number so we append and increment counter subnet_ip.append(i) counter = counter + 1 print(\"Subnet is \" + “.join(subnet_ip))\n We don’t choose any non-running or non-valid router unless we have been configured to do so. By default, we are configured to allow non-valid routers in “middle” and “rendezvous” positions.  Non-running means the node currently isn’t online. You don’t want to pick things that aren’t online. Non-valid means that some configuration in the nodes torrc is wrong. You don’t want to accept strange configurations in case they are trying to hack or break something.\n The first node must be a Guard node.  A guard node is a privileged node because it sees the real IP of the user. It’s ‘expensive’ to become a guard node (maintain a high uptime for weeks and have good bandwidth). {width=”\\textwidth” height=”\\textheight”} This is possible for large companies who have 99.9 percent uptime and high bandwidth (such as Netflix). Tor has no way to stop a powerful adversary from registering a load of guard nodes. Right now, Tor is configured to stick with a single guard node for 12 weeks at a time, so you choose 4 new guard nodes a year.\nThis means that if you use Tor once to watch Amazon Prime Video, it is relatively unlikely for Netflix to be your guard node. Of course, the more guard nodes Netflix creates the more likely it is. Although, if Netflix knows you are connecting to the Tor network to watch Amazon Prime Video then they will have to wait 4 weeks for their suspicions to be confirmed, unless they attack the guard node and take it over.\nBecoming a guard node is relatively easy for a large organisation. Becoming the exit node is slightly harder, but still possible. We have to assume that the large organisation has infinite computational power to be able to do this. The solution is to make the attack highly expensive with a low rate of success. The more regular users of Tor, the harder is if for a large organisation to attack it. If Netflix controls $\\frac{50}{100}$ nodes in the network: {width=”\\textwidth” height=”\\textheight”} The chance of you choosing a guard node from Netflix is 50\nIf suddenly 50 more normal user nodes join then that’s $\\frac{50}{100}$ reducing the probability of Netflix owning a guard node (and thus, a potential attack) and making it even more expensive. {width=”\\textwidth” height=”\\textheight”} There is strength in numbers within the Tor service.\nGuard Pinning When a Tor client starts up for the first time, it chooses a small and random set of guard nodes. For the next few months, it makes sure each circuit is using one of these pre-selected nodes as its guard node.\nThe official proposal from the Tor documentation states:\n \"1. Introduction and motivation\nTor uses entry guards to prevent an attacker who controls some a fraction of the network from observing a fraction of every user’s traffic. If users chose their entries and exits uniformly at random from the list of servers every time they build a circuit, then an adversary who had (k/N) of the network would deanonymize $F=(k/N)^2$ of all circuits... and after a given user had built C circuits, the attacker would see them at least once with probability $1-(1-F)^C$. With large C, the attacker would get a sample of every user’s traffic with probability 1.\nTo prevent this from happening, Tor clients choose a small number of guard nodes (currently 3). These guard nodes are the only nodes that the client will connect to directly. If they are not compromised, the user’s paths are not compromised.\nBut attacks remain. Consider an attacker who can run a firewall between a target user and the Tor network, and make many of the guards they don’t control appear to be unreachable. Or consider an attacker who can identify a user’s guards, and mount denial-of-service attacks on them until the user picks a guard that the attacker controls.\"\n Guard node pinning is important because of Tor’s threat model. Tor assumes that it may only take a single opening for an adversary to work out who you are talking to, or who you are. Since a single vulnerability circuit can destroy your integrity, Tor tries to minimise the probability that we will ever construct one or more vulnerable circuits.\nTor guard nodes can be denial of service attacked, or an attacker could have a majority share of guard nodes on the internet when you connect to try and get you. By guard node pinning, it aims to make this much harder.\nIn the event of an attacker working out your guard nodes and shutting them down, forcing you to connect to their guard nodes. Or, you connect to a guard node controlled by an adversary Tor has algorithms in place to try and detect this.\nWhat Is a Directory Node? The state of the Tor network is tracked and publicised by a group of 9 trusted servers (as of 2019) known as directory nodes. Each of which is controlled by a different organisation.\nEach node is a separate organisation because it provides redundancy and distributes trust. The integrity of the Tor network relies on the honesty and correctness of the directory nodes. So making the network resilient and distributing trust is critical.\nDirectory nodes maintain a list of currently running relays (publicly listed node in the Tor network). Once per hour directory nodes publish a consensus together. The consensus is a single document compiled and voted on by each directory node. It ensures that all clients have the same information about the relays that make up Tor.\nWhen a Tor user (a client or a node) wants to know the current state of the network, it asks a directory node. As we’ll see later, directory nodes are essential for all parts of Tor, especially in hidden services. {width=”\\textwidth” height=”\\textheight”} Relays keep the directory nodes up to date. They send directory node(s) a notification whenever they come online or updated. Whenever a directory node receives a notification, it updates its personal opinion on the current state of the Tor network. All directory nodes then use this opinion to form a consensus of the network. {width=”\\textwidth” height=”\\textheight”} Let’s now look at what happens when disagreements arise in the directory services when forming a consensus.\nThe first version of Tor took a simple approach to conflict resolution. Each directory node gave the state of the network as it personally saw it. Each client believed whichever directory node it had spoken to recently. There is no consensus here among all directory nodes.\nIn Tor, this is a disaster. There was nothing ensuring that directory nodes were telling the truth. If an adversary took over one directory node, they would be able to lie about the state of the network. {width=”\\textwidth” height=”\\textheight”} If a client asked this adversary controlled directory for the state of the network, it’d return a list. This list contains only nodes that the adversary controlled. The client would then connect to these adversary nodes.\nThe second version of the Tor directory system made this attack harder. Instead of asking a single directory node for its opinion, clients asked every directory node and combined their opinions into a consensus. But, clients could form differing views on the network depending on when they had last spoken to each directory node. This gave way to statistical information leakage - not as bad as Tor 1.0. Besides, every client had to talk to every directory node, which took time and was expensive.\nThe third and current version of the directory system moved the responsibility of calculating a consensus from clients to directory nodes. {width=”\\textwidth” height=”\\textheight”}\nWhat Are Bridge Nodes? I’m not sure if you saw it earlier, but I made the distinction between nodes in the directory services and nodes that aren’t.\nIf a repressive state wants to block Tor, it uses the directory nodes. Directory nodes keep up-to-date lists of Tor relay nodes and are publicly available for anyone to download.\nThe state can query a directory node for a list of active Tor relays, and censor all traffic to them.\nTor keeps an up-to-date listing of countries where it is possibly blocked (censored) if you’re interested.\nTor helps its users circumvent the censorship by hiding the fact they are using Tor. They do this through a proxy known as a Bridge Node. Tor users send their traffic to the bridge node, which forwards the traffic onto the user’s chosen guard nodes. {width=”\\textwidth” height=”\\textheight”} The full list of Bridge nodes is never published, making it difficult for states to completely block Tor. You can view some bridge nodes here. If this doesn’t work, Tor suggests:\n \"Another way to get bridges is to send an email to bridges@torproject.org. Please note that you must send the email using an address from one of the following email providers: Riseup or Gmail.\n It’s possible to block Tor another way. Censoring states can use Deep Packet Inspection (DPI)to analyse the shape, volume, and feel of each packet. Using DPI states can recognise Tor traffic, even when they connect to unknown IP addresses or are encrypted.\nTo circumvent this, Tor developers have made Pluggable Transports (PT). These transform Tor traffic flow between the client and the bridge. In the words of Tor’s documentation:\nThis way, censors who monitor traffic between the client and the bridge will see innocent-looking transformed traffic instead of the actual Tor traffic. External programs can talk to Tor clients and Tor bridges using the pluggable transport API, to make it easier to build interoperable programs.\nTor Hidden Services Ever heard those rumours \"there are websites on the dark-web, on Tor that when you visit them you’ll see people doing nasty things, selling illegal things or worse: watching The Hangover Part 3\"\nWhen people talk about these websites they are talking about Tor Hidden Services.\nThese are a wild concept and honestly deserve an entire blogpost on their own. Hidden services are servers, like any normal computer server. {width=”\\textwidth” height=”\\textheight”} Except in a Tor Hidden Service it is possible to communicate without the user and server knowing who each other are. {width=”\\textwidth” height=”\\textheight”} The device (the question mark) knows that it wants to access Netflix, but it doesn’t know anything about the server and the server doesn’t know anything about the device that’s asked to access it. This is quite confusing, but don’t worry, I’m going to explain it all with cool diagrams.\nWhen a server is set up on Tor to act as a hidden service, the server sends a message to some selected Onion Routers asking if they want to be an introduction point to the server. It is entirely up to the server as to who gets chosen as an introduction point, although usually they ask 3 routers to be their introduction points. {width=”\\textwidth” height=”\\textheight”} The introduction points know that they are going to be introducing people to the server.\nThe server will then create something called a hidden service descriptor which has a public key and the IP address of each introduction point. It will then send this hidden service descriptor to a distributed hash table which means that every onion router (not just the introduction points) will hold some part of the information of the hidden service.\nIf you try to look up a hidden service the introduction point responsible for it will give you the full hidden service descriptor, the address of the hidden service’s introduction points.\nThe key for this hash table is the onion address and the onion address is derived from the public key of the server.\nThe idea is that the onion address isn’t publicised over the whole Tor network but instead you find it another way like from a friend telling you or on the internet (addresses ending in .onion).\nThe way that the distributed hash table is programmed means that the vast majority of the nodes won’t know what the descriptor is for a given key.\nSo almost every single onion router will have minimal knowledge about the hidden service unless they explicitly want to find it. {width=”\\textwidth” height=”\\textheight”} Let’s say someone gave you the onion address. You request the descriptor off the hash table and you get back the services introduction points.\nIf you want to access an onion address you would first request the descriptor from the hash table and the descriptor has, let’s say 4 or 5 IP addresses of introductory nodes. You pick one at random let’s say the top one. {width=”\\textwidth” height=”\\textheight”} You’re going to ask the introduction point to introduce you to the server and instead of making a connection directly to the server you make a rendezvous point at random in the network from a given set of Onion Routers. {width=”\\textwidth” height=”\\textheight”} You then make a circuit to that rendezvous point and you send a message to the rendezvous point asking if it can introduce you to the server using the introduction point you just used. You then send the rendezvous point a one time password (in this example, let’s use ‘Labrador’).\nThe rendezvous point makes a circuit to the introduction point and sends it the word ‘Labrador’ and its IP address. {width=”\\textwidth” height=”\\textheight”} The introduction point sends the message to the server and the server can choose to accept it or do nothing. {width=”\\textwidth” height=”\\textheight”} If the server accepts the message it will then create a circuit to the rendezvous point. {width=”\\textwidth” height=”\\textheight”} The server sends the rendezvous point a message. The rendezvous point looks at both messages from your computer and the server. It says \"well, I’ve received a message from this computer saying it wants to connect with this service and I’ve also received a message from the service asking if it can connect to a computer, therefore they must want to talk to each other\".\nThe rendezvous point will then act as another hop on the circuit and connect them. {width=”\\textwidth” height=”\\textheight”} In short, a hidden service works like this, taken from here:\n  A hidden service calculates its key pair (private and public key, asymmetric encryption).\n  Then the hidden service picks some relays as its introduction points.\n  It tells its public key to those introduction points over Tor circuits.\n  After that the hidden-service creates a hidden service descriptor, containing its public key and what its introduction points are.\n  The hidden service signs the hidden service descriptor with its private key.\n  It then uploads the hidden service descriptor to a distributed hash table (DHT).\n  Clients learn the .onion address from a hidden service out-of-band. (e.g. public website) (A hash.onion is a 16 character name derived from the service’s public key.)\n  After retrieving the .onion address the client connects to the DHT and asks for that hash.\n  If it exists the client learns about the hidden service’s public key and its introduction points.\n  The client picks a relay at random to build a circuit to it, to tell it a one-time secret. The picked relay acts as rendezvous point.\n  The client creates a introduce message, containing the address of the rendezvous point and the one-time secret, before encrypting the message with the hidden service’s public key.\n  The client sends its message over a Tor circuit to one of the introduction points, demanding it to be forwarded to the hidden service.\n  The hidden service decrypts the introduce message with its private key to learn about the rendezvous point and the one-time secret.\n  The hidden service creates a rendezvous message, containing the one-time secret and sends it over a circuit to the rendezvous point.\n  The rendezvous point tells the client that a connection was established.\n  Client and hidden service talk to each other over this rendezvous point. All traffic is end-to-end encrypted and the rendezvous point just relays it back and forth. Note that each of them, client and hidden service, build a circuit to the rendezvous point; at three hops per circuit this makes six hops in total.\n  Attacks on Tor Tor projects its users from analysis attacks. The adversary wants to know who Alice is talking to. Yet, Tor does not protect against confirmation attacks. In these attacks, the adversary aims to answers the question “Is Alice talking to Bob?”\nConfirmation attacks are hard and need a lot of preparation and resources. The attacker needs to be able to track both ends of the circuit. The attacker can either directly track each devices internet connection or the guard and exit nodes.\nIf Alice sends a packet like this:\npython # (timestamp, size, port, protocol) (17284812, 3, 21, SSH)\nAnd Bob receives this packet, the attacker can see that the packets are the same - even though the attacker cannot see what the packet is as it is encrypted. Does Bob tend to receive packets at the same time that Alice sends them? Are they the same size? If so, it is reasonable to infer that Alice and Bob are communicating with each other.\nTor breaks packets up into sizeable chunks for a reason - to try and prevent this kind of thing. Tor is working on padding all packets to make this harder.\nThey’re discussing adding packet order randomisation too. But this is too costly at the moment. The Tor browser does add some extra defences, such as reordering packets.\nIf Alice sends the packets, A, B, C and Bob receives them in B, A, C it is harder to detect that they are the same. It’s not foolproof, but it does become harder.\nAn attack where the attacker tries to control both ends of the circuit is called a Sylbil Attack. Named after the main character of the book Sybil by Flora Rheta Schreiber. We discussed some of this earlier, where an attacker controls both the guard and exit nodes.\nSybil attacks are not theoretical. In 2014 researchers at Carnegie Mellon University appeared to successfully carry out a Sybil Attack against the real-life Tor network.\nWhen Lizard Squad - a group of hackers tried to perform a Sybil attack, a detection system alarmed. Tor has built-in monitoring against these kinds of events, and they are working on more sophisticated monitoring against Sybil attacks.\nIn 2007 Dan Egerstad - a Swedish security consultant, revealed he has intercepted usernames and passwords sent through Tor by being an exit node. At the time, these were not TLS or SSL encrypted.\nInterestingly, Dan Egerstad had this to say on the Tor nodes:\n \"If you actually look into where these Tor nodes are hosted and how big they are, some of these nodes cost thousands of dollars each month just to host because they’re using lots of bandwidth, they’re heavy-duty servers and so on. Who would pay for this and be anonymous?\"\n Tor does not normally hide the fact that you are using Tor. Many websites (such as BBC’S iPlayer or editing Wikipedia) block you when using a known Tor node.\nSome applications, under Tor, reveal your true IP address. One such application is BitTorrent.\nJansen et al described an attack where they DDOS exit nodes. By degrading the network (removing exit nodes) an attacker increases the chance to getting an exit node.\nTor users who visit a site twice, once on Tor and once off, can be tracked. The way you move your mouse is unique. There is a JavaScript time measurement bug report on the Tor project that shows how it’s possible to monitor the mouse locations on a site (even when on Tor). Once you fingerprint someone twice, you know they’re the same person.\nIt should be noted, that Tor browser offers 3 levels of security (located in the settings). The highest security level disables JavaScript, some images (as they can be used to track you) and some fonts too. The lesson is, if you want high-security Tor, use the high-security version.\nNow, all these attacks sound cool. But that’s not how most Tor users are caught. Most Tor users make mistakes and are caught because of themselves.\nTake Dredd pirate Roberts, Founder of the Silk Road dark marketplace. He gave himself away by posting about it on social media.\nMost Tor users are caught (if they’re doing illegal things) by bad operational security, and not normally because of a security issue with Tor.\nIt’s worth repeating this story, that we saw earlier.\nIn 2013 during the Final Exams period at Harvard, a student tried to delay the exam by sending in a fake bomb threat. The student used Tor and Guerrilla Mail (a service which allows people to make disposable email addresses) to send the bomb threat to school officials.\nThe student was caught, even though he took precautions to make sure he wasn’t caught.\nGuerilla mail sends an originating IP address header along with the email that’s sent to the receiver, so it knows where the original email came from. With Tor, the student expected the IP address to be scrambled but the authorities knew it came from a Tor exit node (Tor keeps a list of all nodes in the directory service) so the authorities looked for people who were accessing Tor (within the university) at the time the email was sent.\nIf this person went to a coffee shop or something, he probably would of be fine.\nThere’s a fantastic talk at DEFCON 22 about how Tor users got caught. None of the stories mentioned was caused by Tor, but rather bad OpSec.\nConclusion Tor is a fascinating protocol full of algorithms that have been refined over the years. I’ve come to appreciate Tor, and I hope you have to.\nBitTorrent BitTorrent is one of the most common protocols for transferring large files. In February 2013, BitTorrent was responsible for 3.35 percent of all worldwide bandwidth, more than half of the 6 percent of total bandwidth dedicated to file sharing.\nWho Created BitTorrent? Bram Cohen invented the BitTorrent protocol in 2001. Cohen wrote the first client implementation in Python.\nCohen collected free pornography to lure beta testers to use BitTorrent in the summer of 2002.\nBitTorrent vs Cient-Server Downloading In traditional downloading, the server uploads the file, and the client downloads the file. {width=”\\textwidth” height=”\\textheight”} For popular files, this isn’t very effective.\n500 people downloading the same file will put the server under strain. This strain will cap the upload speed, so clients can not download the file fast.\nSecond, client-server costs a lot of money. The amount we pay increases with how popular a file is.\nThird, it’s centralised. Say the system dies, the file no longer exists\n no one can download it.  BitTorrent aims to solve these problems. {width=”\\textwidth” height=”\\textheight”} In a peer-to-peer network, every peer is connected to every other peer in the network. {width=”\\textwidth” height=”\\textheight”} Semi-centralised peer-to-peer networks possess one or more peers with higher authority than most peers. {width=”\\textwidth” height=”\\textheight”}\nHigh Level Overview BitTorrent is a way to share files. It’s often used for large files. BitTorrent is an alternative to a single source sharing a file, such as a server. BitTorrent can productively work on lower bandwidth.\nThe first release of the BitTorrent client had no search engine and no peer exchange, users who wanted to upload a file had to create a small torrent descriptor file that they would upload to a torrent index site.\nWhen a user wants to share a file, they seed their file. This user is called a seeder. They upload a torrent descriptor file to an exchange (we’ll talk about this later). Anyone who wants to download that file will download this torrent descriptor. {width=”\\textwidth” height=”\\textheight”} We call those who download peers. Their torrent client will connect to a tracker (discussed later) and the tracker will send them a list of IP addresses of other seeds and peers in the swarm. The swarm is all PC’s related to a certain torrent.\nThe torrent descriptor file contains a list of trackers and metadata on the file we’re downloading. {width=”\\textwidth” height=”\\textheight”} A peer will connect to a seed and download parts of the file. {width=”\\textwidth” height=”\\textheight”} Once the peer completes a download, they could function as a seed. Although, it is possible to function as a seed while also downloading (and is very common).\nOnce the seed has shared the file to a peer, that peer will act as a seed. Instead of the client-server model where only 1 server exists to upload the file, in BitTorrent, multiple people can upload the same file.\nBitTorrent splits the file up into chunks called pieces, each of a certain size. Sometimes it’s 256KB, sometimes it’s 1MB. As each peer receives a piece, they become a seed of that piece for other peers.\nWith BitTorrent, we do not have a single source to download from. We could download a few pieces from your home country, then download a few that your home country doesn’t own from a far-away country.\nThe protocol hashes the pieces to make sure no seed has tampered with the original file. Then stores the hash in the torrent descriptor on the tracker.\nThis is how BitTorrent works at a very high level. We will now go into detail. We aim to answer these questions:\n  What if a peer only downloads and never uploads?\n  Who do we download from, or upload to?\n  What is a magnet link?\n  What is a torrent descriptor?\n  What hashing algorithm is used?\n  How does BitTorrent selects what pieces to download?\n  And much more.\nWhat’s in a Torrent Descriptor File, Anyway? It’s a dictionary (or hashmap) file.\nThe file is described as:\n Announce  The URL of the tracker. Remember earlier when we contacted the tracker server to find other peers using the same file? We found that tracker by using the announce key in the torrent descriptor file.\n Info  This maps to a dictionary whose keys depend on whether one or more files are being shared. The keys are: Files (child of info, is a list) Files only exists when multiple files are being shared. Files is a list of dictionaries. Each dictionary corresponding to a file.\nEach of these dictionaries has 2 keys:\nLength - the size of the file in bytes. Path - A list of strings corresponding to subdirectory names, the last of which is the actual file name.\n Length  The size of the file in bytes (only when one file is being shared)\n Name  Suggested filename. Or the suggested directory name.\n Pieces length  The number of bytes per piece.\nThe piece’s length must be a power of two and at least 16KiB.\nThis is: $$2^8 ; KiB = 256 ; KiB = 262,144 ; B$$\n Pieces  A hash list.\nA list of hashes calculated on various chunks of data. We split the data into pieces. Calculate the hashes for those pieces, store them in a list.\nBitTorrent uses SHA-1, which returns a 160-bit hash. Pieces will be a string whose length is a multiple of 20 bytes.\nIf the torrent contains multiple files, the pieces are formed by concatenating the files in the order they appear in the files directory.\nAll pieces in the torrent are the full piece length except for the last piece which may be shorter.\nNow, I can guess what you’re thinking.\n \"SHA-1? What is this? The early 2000s?\"\n And I agree.BitTorrent is moving from SHA-1 to SHA256. Google BEP 0052 to find out more.\nStill confused? Not to worry! I designed this JSON file that describes what a torrent file looks like. Note: I’ve concatenated some things. This makes it easier to read and understand the general layout. I made the numbers up, following the rules of BitTorrent’s torrent descriptor.\npython \"Announce\": \"url of tracker\", \"Info\": \"Files\": [ \"Length\": 16, \"path\": \"/folder/to/path\" , \"length\": 193, \"path\": \"/another/folder\" ] , \"length\": 192, \"name\":\" Ubuntu.iso\", \"Pieces length\": 262144, \"Pieces\": [AAF4C61DDCC5E8A2DABEDE0F3B482CD9AEA9434D, CFEA2496442C091FDDD1BA215D62A69EC34E94D0]\nThe Piece Selection Algorithm of BitTorrent One of the largest questions in BitTorrent is “what pieces should I select to download?”\nWith a traditional client-server model, we download the whole file. But now, we get to pick what pieces to download.\nThe idea is to download the pieces that no one else has - the rare pieces. By downloading the rare pieces, we make them less rare by uploading them.\nWhat Are Sub-Pieces and the Piece Selection Algorithm? BitTorrent uses TCP, a transmission protocol for packets. TCP has a mechanism called slow start.\nSlow start is a mechanism which balances the speed of a TCP network connection. It escalates the amount of data transmitted until it finds the network’s maximum carrying capacity. cwdn stands for the Congestion Window. {width=”\\textwidth” height=”\\textheight”} TCP does this because if we send 16 connections at once, the server may not be used to the traffic and congestion will happen on the network.\nIf we’re not regularly sending data, TCP may cap our network connection at a slower speed than normal.\nBitTorrent makes sure to always send data by breaking pieces down into further sub-pieces.\nEach sub-piece is about 16KB in size. The size for a piece is not fixed, but it is somewhere around 1MB.\nThe protocol always has some number of requests (five) for a sub-piece pipe-lined. When a new sub-piece is download, the client sends a new request. This helps speed things up. {width=”\\textwidth” height=”\\textheight”} Sub-pieces can be downloaded from other peers.\nTwo core policies govern the Piece Selection Algorithm.\n1. Strict Policy Once the BitTorrent client requests a sub-piece of a piece, any remaining sub-pieces of that piece are requested before any sub-pieces from other pieces. {width=”\\textwidth” height=”\\textheight”} In this image, it makes sense to download all the sub-pieces of this piece first rather than start downloading another piece.\n2. Rarest First The main policy in BitTorrent is to pick the rarest first. We want to download the piece which the fewest other peers own.\nThis is so we can make it ‘un-rare’. If only one peer has a piece and they go offline, no one will get the complete file.\nA plethora of benefits exist for this policy.\n  Growing the seed\nRarest first makes sure that we download only new pieces from the seed.\nThe seed will begin as a bottleneck. The one peer with the file.\nA downloader can see what pieces their peers possess, and the rarest first policy will cause us to fetch the pieces from the seed which have not been uploaded by other peers.\nLet’s visualise this. {width=”\\textwidth” height=”\\textheight”} The list of nodes (peers) is inter-connected. I cannot draw this as the diagram is unfavourable.\nEach arrow towards a sub-piece what that peer has downloaded. We downloaded a sub-piece that no one else has other than the seed. This means this sub-piece is rare.\nOur upload rate is higher than that of the seed, so all peers will want to download from us. Also, they would want to download the rarest pieces first, and as we are one of 2 holders of the rarest piece.\nWhen everyone downloads from us, we can download faster from them. This is the tit-for-tat algorithm (discussed later).\n  Increased download speed The more peers that hold the piece, the faster the download can happen. This is because we can download sub-pieces from other peers.\n  Enable uploading A rare piece is most wanted by other peers and getting a rare piece means peers will be interested in uploading from us. As we will see later, the more we upload, the more we can download.\n  Most common last It is sensible to leave the most common pieces to the end of the download. As many peers hold common pieces, the probability of being able to download them is much larger than that of rare pieces.\n  Prevent rarest piece missing When the seed dies, all the different pieces of the file should be distributed somewhere among the remaining peers.\n  3. Random First Piece Once we download, we have nothing to upload. We need the first piece, fast. The rarest first policy is slow. Rare pieces are downloaded slower because we can download its sub-pieces from only a few peers.\n4. Endgame Mode Sometime’s a peer with a slow transfer rate will try to give us a sub-piece. Causing a delay of the download. To prevent this, there is “endgame mode”.\nRemember the pipe-lining principle? There are always several requests for sub-pieces pending.\nAssume we are downloading from 2 peers, and there is 1 other peer we are not downloading from. {width=”\\textwidth” height=”\\textheight”} When all the sub-pieces a peer lacks are requested, they broadcast this request to all peers. This helps us get the last chunk of the file. {width=”\\textwidth” height=”\\textheight”} If a peer has the missing sub-piece, they will send that back to our computer.\nOnce a sub-piece arrives, we send a cancel-message telling the other peers to ignore our request. {width=”\\textwidth” height=”\\textheight”}\nResource Allocation Using Tit-For-Tat No centralised resource allocation in BitTorrent exists. Instead, every peer maximises their download rate.\nA peer will download from whoever they can. To decide who to upload to, they will use a variant of the \"tit-for-tat\"algorithm.\nThe tit-for-tat strategy comes from game theory. The essence is:\n \"Do onto others as they do onto you\"\n   On the first move, cooperate.\n  On each succeeding move do what your opponent did the previous move.\n  Be prepared to forgive after carrying out just one act of retaliation.\n  The Choking Algorithm Choking is a temporary refusal to upload to another peer, but we can still download from them.\nTo cooperate peers upload, and to not cooperate they “choke” the connection to their peers. The principle is to upload to peers who have uploaded to us. {width=”\\textwidth” height=”\\textheight”} We want several bidirectional connections at the same time and to achieve Pareto Efficiency.\n \"We consider an allocation Pareto Efficient if there is no other allocation in which some individual is better off and no individual is worse off.\"\n Thus the big question, is how to determine which peers to choke and which to unchoke?\nA peer always unchokes a fixed number of its peers (the default is 4).\nCurrent download rates decide which peers to unchoke. We use a 20-second average to decide this. Because of the use of TCP (slow-start) rapidly choking and unchoking is bad. Thus, this is calculated every 10 seconds.\nIf our upload rate is high more peers will allow us to download from them. This means that we can get a higher download rate if we are a good uploader. This is the most important feature of the BitTorrent protocol.\nThe protocol prohibits many “free riders” which are peers who only download and don’t upload.\nFor a peer-to-peer network to be efficient, all peers need to contribute to the network.\nOptimistic Unchoking BitTorrent also allows an additional unchoked peer, where the download rate criteria aren’t used.\nWe call this optimistic unchoking. Checking unused connections aren’t better than the ones in use.\nWe shift the optimistic unchoke every 30 seconds. Enough time for the upload reaches full speed. Same for the upload. If this new connection turns out to be better than one of the existing unchoked connections, it will replace it.\nThe optimistic unchoke is randomly selected.\nThis also allows peers who do not upload and only download to download the file, even if they refuse to cooperate. Albeit, they will download at a much slower speed.\nAnti-Snubbing What happens if all peers uploading to another peer decide to choke it? We then have to find new peers, but the optimistic unchoking mechanism only checks one unused connection every 30 seconds. To help the download rate recover more, BitTorrent has snubbing.\nIf a client hasn’t received anything from a particular peer for 60 seconds, it will presume that it has been ‘snubbed’.\nFollowing the mentality of tit-for-tat, we retaliate and refuse to upload to that peer (except if they become an optimistic unchoke).\nThe peer will then increase the number of optimistic unchokes to find new connections quicker.\nWhat if we only upload? We see that using the choking algorithm implemented in BitTorrent we favour peers who are kind to us. If I can download fast from them, we allow them to upload fast from me.\nWhat about no downloads? Then it’s impossible to know which peers to unchoke using this choking algorithm. When a download is completed, we use a new choking algorithm.\nThis new choking algorithm unchokes peers with the highest upload rate. This ensures that pieces get uploaded faster, and they get replicated faster.\nPeers with good upload rates are also not being served by others.\nWhat Is a Tracker? Trackers are special types of server that help in communication between peers.\nCommunication in BitTorrent is important. How do we learn what other peers exist?\nThe tracker knows who owns the file, and how much.\nOnce a peer-to-peer download has started, communication can continue without a tracker.\nSince the creation of the distributed hash table method for trackerless torrents, BitTorrent trackers are largely redundant.\nPublic Trackers These are trackers that anyone can use.\nThe Pirate Bay operated one of the most popular public trackers until disabling it in 2009, opting only for magnet links (discussed soon).\nPrivate trackers are private. They restrict use by requiring users to register with the site. The method for controlling registration is often an invitation system. To use this tracker we need an invitation.\nMulti-Tracker Torrents Multi-tracker torrents contain multiple trackers in a single torrent file. This provides redundancy if one tracker fails, the other trackers can continue to maintain the swarm for the torrent.\nWith this configuration, it is possible to have multiple unconnected swarms for a single torrent - which is bad. Some users can connect to one specific tracker while being unable to connect to another. This can create a disjoint set which can impede the efficiency of a torrent to transfer the files it describes.\nMagnet Links - Trackerless Torrents Earlier, I talked about how the Pirate Bay got rid of trackers and started using trackerless torrents.\nWhen we download a torrent, we get a hash of that torrent. To download the torrent without a tracker, we need to find other peers also downloading the torrent. To do this, we need to use a distributed hash table.\nLet’s explore Distributed Hash Tables.\nDistributed Hash Tables Distributed Hash Tables (DHT) give us a dictionary-like interface, but the nodes are distributed across a network. The trick with DHTs is that the node that gets to store a particular key is found by hashing that key.\nIn effect, each peer becomes a mini-tracker.\nEach node (client/server implementing the DHT protocol) has a unique identifier known as the “node ID”. We choose node IDs at random from the same 160-bit space as BitTorrent infohashes.\nInfohashes are a SHA-1 hash of:\n  ITEM: length(size) and path (path with filename)\n  Name: The name to search for\n  Piece length: The length(size) of a single piece\n  Pieces: SHA-1 Hash of EVERY piece of this torrent\n  Private: flag for restricted access\n  We use a distance metric to compare two node IDs or a node ID and an infohash for “closeness”.\nNodes must have a routing table containing the contact information for a few other nodes.\nNodes know about each other in the DHT. They know many nodes with IDs that are close to their own but few with far-away IDs.\nThe distance metric is XOR and is interpreted as an integer. $$distance(A, B) = |A \\oplus B |$$ Smaller values are closer.\nWhen a node wants to find peers for a torrent, they use the distance metric to compare the infohash of the torrent with the IDs of the nodes in its routing table or the ID of one node with the ID of another node.\nThen they contact the nodes in the routing table closet to the infohash and asks them for contact information of peers downloading the torrent.\nIf a contacted node knows about peers for the torrent, they return the peer contact information with the response. Otherwise, the contacted node must respond with the contact information of the nodes in its routing table closet to the infohash of the torrent. {width=”\\textwidth” height=”\\textheight”} The original node queries nodes that are closer to the target infohash until it cannot find any closer nodes. After the node exhausts the search, the client then inserts the peer contact information for itself onto the responding nodes with IDs closest to the infohash of the torrent. In the future, other nodes can easily find us.\nThe return value for a query for peers includes an opaque value known as the “token.” For a node to announce that its controlling peer is downloading a torrent, it must present the token received from the same queried node in a recent query for peers.\nWhen a node attempts to “announce” a torrent, the queried node checks the token against the querying node’s IP address. This is to prevent malicious hosts from signing up other hosts for torrents.\nThe querying node returns the token to the same node that they receive the token from. We must accept tokens for a reasonable amount of time after they have been distributed. The BitTorrent implementation uses the SHA-1 hash of the IP address concatenated onto a secret that changes every five minutes and tokens up to ten minutes old are accepted.\nRouting Table Every node maintains a routing table of known good nodes. We use the routing table starting points for queries in the DHT. We return nodes from the routing table in response to queries from other nodes.\nNot all nodes we learn about are equal. Some are “good” and some are not. Many nodes using the DHT can send queries and receive responses, but cannot respond to queries from other nodes. Each node’s routing table must contain only known good nodes.\nA good node is a node has responded to one of our queries within the last 15 minutes. A node is also good if it has ever responded to our queries and has sent us a query within the last 15 minutes. After 15 minutes of inactivity, a node becomes questionable. Nodes become bad when they fail to respond to multiple queries in a row. Nodes that we see are good are given priority over nodes with an unknown status. {width=”\\textwidth” height=”\\textheight”} The routing table covers the entire node ID space from 0 to $2^160$. We subdivide the routing table into “buckets” that each cover a portion of the space.\nAn empty table has one bucket with an ID space range of min=0, max=$2^160$.\nAn empty table has only one bucket so any node must fit within it. Each bucket can only hold K nodes, currently eight, before becoming “full.”\nWhen a bucket is full of known good nodes, we may add no more nodes unless our node ID falls within the range of the bucket. The bucket is replaced by two buckets each with half of the old bucket. Nodes from the old bucket are distributed among the new buckets.\nFor a new table with only one bucket, we always split the full bucket into two new buckets covering the ranges 0..$2^159$ and $2^159..2^160$.\nWhen the bucket is full of good nodes, we simply discard the new node. When nodes in the bucket become bad (if they do) we replace them with a new node.\nWhen nodes are considered questionable and haven’t been since, in the last 15 minutes, the least recently seen node is pinged. The node either responds or doesn’t respond. A response means we move to the next node. We do this until we find a node that fails to respond. If we don’t find any, then the bucket is considered good.\nWhen we do find one, we try one more time before discarding the node and replacing them with a new good node.\nEach bucket should maintain a “last changed” property to show how “fresh” the contents are.\nWhen a node in a bucket is pinged and responds, or a node is added to a bucket, or a node is replaced with another node, the bucket’s last changed property is updated.\nBuckets are refreshed if the last changed property has not been updated in the last 15 minutes.\nAttacks on BitTorrent Few attacks on the BitTorrent network exist. Everything is public. Our IP address, what we’re downloading - everything. Why attack an open network?\nWhy attack a completely open network?\nOnly 7 entries are listed on Exploit-DB - a database of known exploits against a service. And most of them relate to specific clients.\nThe principal attack on the BitTorrent network is to stop piracy. We’ve gone this far without talking about piracy, but it is often synonymous with BitTorrent.\nThe main attack on BitTorrent is Torrent Poisoning. This attack aims to get the IP addresses of peers pirating content or to poison the content in some way.\nMadonna’s American Life album release is an example of content poisoning. Before the release, tracks were released of similar length and file size. The tracks featured a clip of Madonna saying:\n \"What the fuck do you think you’re doing?\"\n Followed by a few minutes of silence.\nHere are some methods of poisoning a torrent:\n  Index Poisoning The index allows users to locate the IP addresses of peers with the desired content. This method of attack makes searching for peers difficult.\nThe attacker inserts a large amount of invalid information into the index to prevent users from finding the correct information.\nThe idea is to slow down the download, by having the peer try to download pieces from an invalid peer.\n  Decoy Insertion They insert corrupted versions of a file into the network.\nImagine 500 copies of a file and only 2 of them being the real file, this deters pirates from finding the real file.\nMost websites with lists of torrents a voting system. This deters this attack, as the top of searches is filled with non-corrupted files However, most websites with lists of torrents a voting\nThis deters this attack, as the top of searches is filled with non-corrupted files.\nIn GameDevTycoon, the file was released before the initial upload to piracy sites. Unbeknownst to pirates, the file was corrupted. Winning the game is impossible in the pirated version. Everything else was perfect.\n  Defence Against the Dark Bittorrent Attack Most popular torrents are released by individuals or groups who built up a rapport over many years. On private trackers, individuals can be pointed to. Poisoned torrents are quickly labelled and the poster can be banned.\nOr, on public trackers, downloading torrents made by trusted groups is preferable. After all, would you prefer to download Ubuntu from the Ubuntu team, or the user xxx-HACKER-ELITE-GHOST-PROTOCOL-xxx?\nOn public trackers, if a torrent is poisoned the torrent is reported and removed.\nThe simplest way to defend against a BitTorrent attack is to use an IP address not associated with you. Whether this is through a VPN or some other service.\nConclusion And we are done with BitTorrent! Here are some things you may choose to do:\n  Build your own BitTorrent client\n  Explore BitTorrent’s proposals (BEPs) to learn more about how it works, and what’s next for the algorithm\n  Read the official BitTorrent specification\n  Designing Effective Peer to Peer Networks By the end of the chapter, we should have a good understanding of the important questions to answer when designing effective P2P networks.\nWhen Should I Use a Peer to Peer Network? P2P networks can be used for all networking. We need to use the right tool for the job.\nQuickly and automatic scaling is their game. P2P networks enhance with more users, not degrade.\nIf we are building a platform with a shared goal (i.e. shares files) and we can imagine the platform growing uncontrollably big, P2P networks are good.\nOr if we do not want anyone to shut down our network (in a client-server model, turn off your servers) a P2P network is effective.\nThere are 2 types of P2P Networks:\n Full P2P networks  These are networks where everyone node is equal.\n Full P2P networks  Certain nodes have more power than others.\nLet’s walk through what all good peer to peer networks share.\nRewards All great peer to peer networks have reward systems. The user does some work, and they are rewarded.\nEven if the reward isn’t clearly defined, there is always a reward for taking part in the peer to peer network. And always a reward for giving back to the network.\nRewards are paramount to P2P networks and my favourite thing to talk about!\nIn Bitcoin, this is earning Bitcoin. BitTorrent rewards participants with faster download speeds. Tor rewards other Tor members with more privacy.\nAll of these rewards are given for contributing to the network.\nThe idea of a reward is to eliminate free-riders who partake in the network without giving anything back. There are 2 ways to discourage free-riders:\n  Forcing every user to give back.\n  Rewarding users who give back.\n  Tor is the former. The only reward that can be given is to become a guard node, which provides no obvious benefit for the user other than to feel good about themselves.\nThe latter is what most peer to peer networks use, rewarding users who give back.\nIn BitTorrent, those who seed (upload) are rewarded with higher download rates. The more you seed, the faster you can download.\nIn Bitcoin, users are rewarded for mining the blockchain with Bitcoin.\nThis leads us to look at peer to peer networks from 2 interesting perspectives. Human civilisations, or reinforcement learning machines.\nLet’s start with human civilisations.\nHuman Civilisations We do work, and we get rewarded. Capitalism. In semi P2P networks (where one node has more power than the others) we can almost perfectly replicate capitalism.\nIf we force everyone to do the same work for the same reward then it is communism.\nLuxury communism uses machines to do the heavy lifting leaving humans to do other things and is a new 21st-century take. This more closely relates to P2P networks than traditional communism.\nAs P2P networks grow, eventually if not governed properly it will fall back into an client-server architecture. Why use Jim’s computer to download ubuntu.iso when you can download it from LargeCorp which has a much faster speed.\nWith planning, we can build a dictatorship of the proletariat where every ordinary node has power in the network. Not just those with higher rewards.\nThere will always be those with more power than others (perhaps they have more computers on the network) but the point is that everyone has some power over the network.\nAnd the ordinary nodes will likely always have more power than larger clusters of nodes, as seen in Bitcoin.\nModelling P2P networks as political movements allows us to talk about P2P networks as more than just networks, as entire communities.\nEventually people with little to no knowledge about networking can discuss and change how the network operates using these abstractions.\nReinforcement Learning We can use artificial intelligence to automatically optimise a P2P network. Humans are slow when it comes to making changes compared to computers.\nP2P networks already use technology to find the shortest routes or preferred routes. As networks become more and more complicated, simple handwritten algorithms might not be enough.\nPicture this nifty example.\nIn our network, we have multiple nodes all interconnected. Each node has a rating.\nThis rating signifies how good that node is. A good rating based on how much reward an individual has. Whether that reward is from speed, accuracy or trust is problem dependant.\nEvery time this node is used, its personal reward is increased. Much like Kohonen’s competitive learning rules.\nBut why stop there? If the node is faster, trustworthy, contributes heavily to the network it should have a higher reward rating.\nAnd our goal is to create the \"best\" path across the network, taking into account all of these numbers and to maximise our reward, whatever that may be.\nTor already has a similar (albeit smaller) system in place like this. Guard nodes, bridge nodes, and more.\nThis seems like the perfect scenario for reinforcement learning. Multiple inputs to maximise our reward. Exploratory choices, meaning that a node with a \"bad\" reating is chosen, preventing some nodes from hogging all the resources.\nReinforcement learning is the closet computer learning to how humans learn according to Sutton and Barto.\nHumans will eventually optimise manually. Where good nodes have better jobs or are chosen more than others. Reinforcement learning is much faster than any human could be.\nWe, as humans, naturally and manually improve the network over time. What if we could use AI to speed this process up?\nOptimisation of the Network An ideal P2P network will improve the more people that use it.\nIn Tor, the more people that use it the more privacy is given. I talk more about this in my Tor blog post.\nA simple distinction, but one that must be made. As the network grows older, ideally, it reaches its global optimised state.\nUnlike client-server, where the more users there are the harder it becomes to maintain the network. {width=”\\textwidth” height=”\\textheight”} Take the example of downloading a file. Client-Server starts out being incredibly fast, but over time as the file becomes more popular that download speed degrades. {width=”\\textwidth” height=”\\textheight”} With a P2P network, at the start it is slow to download (assuming the initial uploader is slow) but the speed increases over time. What’s important is that over ttime, client-server gets worse with more users but P2P gets better.\nOptimisation of the network as it grows is often done through the rewards system.\nAs Tor grows, the privacy of each user increases. Thus, the more that use Tor, the better the privacy.\nEach user has their personal reward, but together this creates a positive reward for the whole network.\nIn Bitcoin, the more that mine Bitcoin, the harder it is to mine, and the larger incentive it is to use better computers. Better computers = faster mines = more money.\nThis creates competition amongst users. Who can contribute to the network the most? Users are fighting for their own personal reward, but this fight improves the network as a whole.\nIt is almost impossible to perform a 51 percent attack on the network when miners are hyper-competitive like this.\nUsers work towards their own personal rewards, which means the network gets better from not only more users but better rewards. The entire network scales majestically upward.\nWhen choosing a reward, it is important to look at the local rewards (what the user gets) and to look at the greater rewards (what the network will get for participating).\nI also recommend rewards which increase as the network grows. Scalable rewards. If the price of Bitcoin did not scale with how many users it had, the network degrades or upgrades much slower over time.\nHumble Beginnings With a client-server architecture, it can be amazing from the start. But with a peer to peer network, it sucks for the first few users.\nWith Bitcoin, what was the incentive? You get this worth coin.… nothing at all.\nTor. The incentive? Well, if there are only 3 users then there is no incentive. No privacy. 51 percent attacks is a matter of whether someone loses WiFi on the train or not.\nBitTorrent. The incentive? You can download this one person’s files.\nIn peer to peer networks, generally, they suck for the first couple users and are only worthwhile over time.\nSo how then, do we build an effective peer to peer network that other people will want to use?\nThere are 2 methods to this.\n Forceful use  We can force users to use the network. This is how Tor got its start. The US Naval Resarch Labs built Tor, and effectively they could force others in the Navy to use it.\n Incredible technology  The other option is incredible technology. In a peer to peer network, the first few users are often those who recognise how incredible the technology is.\nThink about Bitcoin. The first few users fell in love with the technology behind it, and truly believed it could one day be great.\nWith a great rewards system in place, the first users of Bitcoin realised it could grow up to be something huge. Amazing technology attracts the first few users, and those users are often technologically minded.\nJobs for the People In almost all peer to peer networks, jobs are assigned to nodes.\nIn Bitcoin, we have miners whose job it is to mine the blockchain.\nIn Tor, we have guard nodes.\nIf a node has proven to be trustworthy than we shall make it a guard node. If a node wants to mine the blockchain, it becomes a miner.\nThese nodes do not have more rights than the other nodes, they simply have a job to do. And sometimes this job provides a reward, and sometimes it doesn’t.\nIf we give everyone the same job, the network will tend towards global optimisation much slower.\nLet’s say we have a new file-sharing system. Our system will let you download files from others.\nWe have a file, Ubuntu.iso, which is being seeded by 10 people.\nWe choose at randomly a seed to download from. This seed has an upload speed of 1 Mbps while all the other seeders have an upload speed of 200mbps.\nIt makes logical sense to use the uploaders with faster speed.\nIt makes sense logically to choose from a subsection of people with high upload speeds. Effectively, we have given these people ‘jobs’.\nThere are 2 types of jobs in peer to peer networks:\n  Rewarded Jobs\n  Unpaid Internships (jobs)\n  With rewarded jobs, the uploaders get a higher reward for working. This reward might be faster download speeds, such as in BitTorrent.\nWith unpaid jobs, there is no reward. There is no incentive for one to choose a job, it is gifted to those. This is how guard nodes work in Tor.\nIf we have a job which peopl have to opt-in to, but doesn’t provide a reward it is unlikely for many people to opt-in.\nDeciding on what jobs to give, and whether it is rewarded or not is problem specific.\nFor example, we have a job called \"maintainer of the Blockchain\". This job means people have a copy of the blockchain and maintains it. And only they do, no one else can. Any cryptocurrency nerd reading this may already see the problem.\nTo view the blockchain, you need to have this job. But not every citizen of the world has a spare 300gb to view the chain. They cannot get the job, because they do not meet the required specification.\nYou also have to meet a plethora of other specifications. Most of them a normal home user cannot achieve.\nThis is another issue. Can we reject people if they do not meet the job specification? Again, problem specific.\nWith only a small per cent controlling the blockchain, it leaves it open to a 51\nI propose that jobs are automatically assigned based on the specification of the user, but any user can request a job.\nThe only jobs they should be rejected for is high trust jobs, such as guard nodes. But, the specification of their computer should not be taken into account for trust jobs.\nHumans picking jobs are too slow. The network needs to react fast and scale fast. Humans are not fast. So automatic assignment it is.\nBut we do not want to prevent humans from accessing resources because of their circumstances.\nWhen assigning jobs, the jobs must work in harmony.\nWe should take inspiration from beehives or ant colonies for this. Human jobs are simply too hard to model, to focus on a much smaller example is wise.\nShould there be a punishment if someone takes a job for which they are unfit? Should a 30gb computer take the punishment for trying to maintain a 300gb file?\nOn the one hand, only a very small per cent of the population will ignore the assigned job and choose something for which they are unfit.\nBut, to achieve global optimisation we must make sure every single thing is accounted for.\nUnfortunately, in this world, those that do jobs that they are not capable of should be punished. I would not say to reduce the resources available to them through the job, but perhaps reduce the reward of using the network in some way.\nData Structures Every single effective peer to peer network uses data structures.\nThe blockchain is just a fancy linked list with some extra properties.\nBitTorrent’s magnet links work based on distributed hash tables.\nData structures are vital to peer to peer networks. I do not want to get into every data structure available, but knowledge of them is important.\nWe can design a network using a distributed data structure that already exists, or we can build a new data structure/algorithm based on pre-existing ones.\nPolicy Changes Throughout this article, I have talked about designing the network to be perfect from the get-go. Anyone knows this isn’t possible. So how then, do we change the network when it’s already running? How do we implement policy changes?\n  Dictatorship\n  Let the people decide\n  The people can form a democracy\n  In our first instance, we have a dictatorship.\nYou, the creator decides on changes. You create these changes, and they go out to the network. We don’t care what the participants think, only that the change has taken place.\nThis is the most effective for easily implementing policy changes, but it ruins the trust.\nGood peer to peer networks reduces trust. We should not need to trust anyone. However, trust is important in some networks. It depends on the network itself.\nIf the network was for a digital currency, why would you trust this entire currency in the hands of a single person?\nBut for a privacy centred network, having this trust in one person or body of people can increase the trust throughout the network. It reduces the chance of a 51\nAs the network progresses, it strays further and further away from a 51\nIn the early days of a P2P network, it is very much a dictatorship. A few small people decide on changes to the network (think of the early days of Bitcoin) and this eventually moves towards democracy as the network grows.\nBut again, this brings problems. What if there is a critical failure in the code and there needs to be a change made during the networks primetime? This is for the designer to decide.\nWe can alternatively let the people decide.\nFrom the get-go, no single person has full control. Every time a change is made, a percent of the network (likely 51) will need to agree to the change. Complete control for the network. No trusting the developer involved.\nAt the start, this may be problematic. What if we have a node in the network purely from FOMO and doesn’t care about updates?\nHumans are incredibly slow too. Imagine a critical bug in the code that had to be fixed right there and then. Humans may take weeks to decide. Many will not even respond to the decision.\nThe alternative is a democracy.\nGive certain people more power than others. Have the community vote in leaders, or have the leaders be pre-selected.\nThese leaders then decide on changes to the codebase. This reduces trust, especially if they are voted in.\nBut nothing is stopping them from teaming together to get the maximum personal reward while not doing anything for the many.\nAll in all, deciding on policy changes is a tricky subject. And one that should be decided before the network is made.\nAlthough something to remember is trust. Will the users need to trust you, personally?\nIf so, try and work towards a goal where that trust is reduced. Diversify that trust over to others. Remove trust completely, make them only trust themselves.\nEffective peer to peer networks is unlike client-server models where one person controls all the power. Effective P2P networks are for the people.\nThe Cathedral or the Bazaar The Cathedral is waterfall development. Slow, well planned. The people working on it are cathedral builders. The final product is presented and sold to the public as the final product.\nThe Bazaar is the opposite. Work fast. Break things. Release early. Release often. Listen to your customers.\nWhen building a full P2P network, we would build both the cathedral and the bazaar.\nIn an ideal full P2P network, eventually, the creator’s power dwindles to almost nothing (they become just another normal node in the network).\nThis is what Satoshi Nakamoto did. They created the cathedral first, and then over time moved to the bazaar - eventually losing all power to change anything in the network without the permission of the network.\nOur P2P network could explode on day 1 and we would have no control to finish building the cathedral.\nFor this reason, in a full P2P network where all nodes are equal, we should build a cathedral and then transition naturally to a bazaar.\nIn semi P2P network where some nodes have more power than others, the developer doesn’t have to give up their child anytime soon.\nHowever, this requires the nodes to trust the developers. Something that not all P2P networks have the liberty of.\nOpen Source or Not? The main thing in P2P networks is removing trust. We don’t necessarily want people to trust us when building a network, preferably we would want to remove as much trust as possible.\nClosed source systems do not instil much trust, therefore we must choose an open-source system.\nConclusion ",
  "wordCount" : "13843",
  "inLanguage": "en",
  "datePublished": "2020-12-02T01:37:42.899Z",
  "dateModified": "2020-12-02T01:37:42.899Z",
  "author":{
    "@type": "Person",
    "name": "Bee"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://polymath.cloud/p2p-book/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Polymath.cloud",
    "logo": {
      "@type": "ImageObject",
      "url": "https://polymath.cloud/favicon.ico"
    }
  }
}
</script>



</head>

<body class="">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://polymath.cloud" accesskey="h">Polymath.cloud</a>
            <span class="logo-switches">
                <span class="theme-toggle">
                    <a id="theme-toggle" accesskey="t">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </a>
                </span>
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://polymath.cloud/archives" title="Archive">
                    <span>
                        Archive
                    </span>
                </a>
            </li>
            <li>
                <a href="https://polymath.cloud/search/" title="Search">
                    <span>
                        Search
                    </span>
                </a>
            </li>
            <li>
                <a href="https://polymath.cloud/tags/" title="Tags">
                    <span>
                        Tags
                    </span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      Peer 2 Peer Networks
    </h1>
    <div class="post-meta">

December 2, 2020&nbsp;·&nbsp;65 min&nbsp;·&nbsp;Bee

    </div>
  </header> 

  <div class="post-content">
<p><a href="https://tryhackme.com/room/bruteit">https://tryhackme.com/room/bruteit</a></p>
<h1 id="preface">Preface<a hidden class="anchor" aria-hidden="true" href="#preface">#</a></h1>
<p>If you&rsquo;re reading this, like me, you must strangely like the idea of
effectively designing peer to peer networks.</p>
<p>Almost no real world usage (unless you work in this industry), but
nevertheless the design is so interesting!</p>
<p>Peer to peer networks effectively are close approximations of how humans
interact. Much like how object orientated tried to represent how humans
think, I believe peer to peer networks are how humans communicate.</p>
<p>I mean, after all, you don&rsquo;t talk to a single person (server) who then
does everything for you (client). Well, unless you&rsquo;re in a Turing test!</p>
<p>This is what makes P2P interesting to me. When looking at the design of
P2P networks, we&rsquo;re looking at how humans communicate, how we build our
own interpersonal networks. How we can represent cities and the likes on
this network.</p>
<p>We&rsquo;ll start off with 2 of the biggest P2P networks. Tor and BitTorrent.
To understand how to design them, we&rsquo;ve got to look at the best!</p>
<p>Although I won&rsquo;t talk about Bitcoin, or any cryptocurrency. There simply
is nothing for me to add. My favourite book on this topic is &quot;Mastering
Bitcoin&quot;. Check it out!</p>
<p>Towards the end of this ebook, we&rsquo;ll look at designing effective P2P
networks. Taking what we saw in Tor and Bittorrent and some
cryptocurrency knowledge, we&rsquo;ll try to generalise a solution for
designing them.</p>
<p>After all, there is about 5,000,000 articles on designing good
client-server networks but almost none on peer to peer!</p>
<p>Let us begin!</p>
<h1 id="tor">Tor<a hidden class="anchor" aria-hidden="true" href="#tor">#</a></h1>
<p>The United States Naval Research Laboratory developed The Onion Routing
Protocol (T0r) to project U.S. intelligence communications online.
Ironically, Tor has seen widespread use by everyone - even those
organisations which the U.S. Navy fights against.</p>
<p>You may know Tor as the hometown of online illegal activities, a place
where you can buy any drug you want, a place for all things illegal. Tor
is much larger than what the media makes it out to be. According to
Kings College much of Tor is legal.</p>
<p>When you normally visit a website, your computer makes a direct TCP
connection with the website&rsquo;s server. Anyone monitoring your internet
could read the TCP packet. They can find out what website you&rsquo;re
visiting and your IP address. As well as what port you&rsquo;re connecting to.</p>
<p>If you&rsquo;re using HTTPS, no one will know what the message said. But,
sometimes all an adversary needs to know is who you&rsquo;re connecting to.</p>
<p>Using Tor, your computer never communicates with the server directly.
Tor creates a twisted path through 3 Tor nodes, and sends the data via
that circuit.</p>
<p>The core principle of Tor is onion routing which is a technique for
anonymous and secure communication over a public network. In onion
routing messages are encapsulated in several layers of encryption.</p>
<blockquote>
<p>&quot;Onions have layers&quot; - Shrek</p>
</blockquote>
<p>So does a message going through Tor. Each layer in Tor is encryption,
you are adding layers of encryption to a Tor message, as opposed to just
adding 1 layer of encryption.</p>
<p>This is why it&rsquo;s called The Onion Routing Protocol, because it adds
layers at each stage.</p>
<p>The resulting onion (fully encapsulated message) is then transmitted
through a series of computers in a network (called onion routers) with
each computer peeling away a layer of the &lsquo;onion&rsquo;. This series of
computers is called a path. Each layer contains the next destination -
the next router the packet has to go to. When the final layer is
decrypted you get the plaintext (non-encrypted message).</p>
<p>The original author remains anonymous because each node in the network
is only aware of the preceding and following nodes in the path (except
the first node that does know who the sender is, but doesn&rsquo;t know the
final destination).</p>
<p>This has led to attacks where large organisations with expansive
resources run servers to attempt to be the first and last nodes in the
network. If the organisation&rsquo;s server is the first node, it knows who
sent the message. If the organisation server is the last node, it knows
the final destination and what the message says.</p>
<p>Now we have a basic overview of Tor, let&rsquo;s start exploring how each part
of Tor works. Don&rsquo;t worry if you&rsquo;re confused, every part of Tor will be
explained using gnarly diagrams.</p>
<h2 id="overview-of-tor">Overview of Tor<a hidden class="anchor" aria-hidden="true" href="#overview-of-tor">#</a></h2>
<blockquote>
<p>&quot;Onion Routing is a distributed overlay network designed to anonymise
TCP-based applications like web browsing, secure shell and instant
messaging.&quot;</p>
</blockquote>
<p>Clients choose a path through the network and build a circuit where each
onion router in the path knows the predecessor and the successor, but no
other nodes in the circuit. Paths and circuits are synonyms.
<img src="1.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} The original
author (the question mark on the far left) remains anonymous, unless
you&rsquo;re the first path in the node as you know who sent you the packet.
<img src="2.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} No one knows
what data is being sent until it reaches the last node in the path; who
knows the data but doesn&rsquo;t know who sent it. The second to last node in
the path doesn&rsquo;t know what the data is, only the last node in the path
does. <img src="3.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} This has
led to attacks whereby large organisations with expansive resources
create Tor servers which aim to be the first and last onion routers in a
path. If the organisation can do this, they get to know who sent the
data and what data was sent, effectively breaking Tor.
<img src="4.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} It&rsquo;s incredibly
hard to do this without being physically close to the location of the
organisations servers, we&rsquo;ll explore this more later.</p>
<p>Throughout this article I&rsquo;ll be using Netflix as a normal service (Bob)
and Amazon Prime Video as the adversary (Eve). In the real world, this
is incredibly unlikely to be the case. I&rsquo;m not here to speculate on what
organisations might want to attack Tor, so I&rsquo;ve used 2 unlikely examples
to avoid the political side of it.</p>
<p>Each packet flows down the network in fixed-size cells. These cells have
to be the same size so none of the data going through the Tor network
looks suspiciously big.</p>
<p>These cells are unwrapped by a symmetric key at each router and then the
cell is relayed further down the path. Let&rsquo;s go into Tor itself.</p>
<h2 id="tor-itself">Tor Itself<a hidden class="anchor" aria-hidden="true" href="#tor-itself">#</a></h2>
<blockquote>
<p>&quot;There is strength in numbers&quot;</p>
</blockquote>
<p>Tor needs a lot of users to create anonymity, if Tor was hard to use new
users wouldn&rsquo;t adopt it so quickly. Because new users won&rsquo;t adopt it,
Tor becomes less anonymous. By this reasoning it is easy to see that
usability isn&rsquo;t just a design choice of Tor but a <em>security requirement</em>
to make Tor secure.</p>
<p>If Tor isn&rsquo;t usable or designed nicely, it won&rsquo;t be used by many people.
If it&rsquo;s not used by many people, it&rsquo;s less anonymous.</p>
<p>Tor has had to make some design choices that may not improve security
but improve usability with the hopes that an improvement in usability is
an improvement in security.</p>
<h3 id="what-tor-isnt">What Tor Isn&rsquo;t<a hidden class="anchor" aria-hidden="true" href="#what-tor-isnt">#</a></h3>
<p>Tor is not a completely decentralised peer-to-peer system like many
people believe it to be. If it was completely peer to peer it wouldn&rsquo;t
be very usable. Tor requires a set of directory servers that manage and
keep the state of the network at any given time.</p>
<p>Tor is not secure against end to end attacks. An end to end attack is
where an entity has control of both the first and last node in a path,
as talked about earlier. This is a problem that cyber security experts
have yet to solve, so Tor does not have a solution to this problem.</p>
<p>Tor does not hide the identity of the sender.</p>
<p>In 2013 during the Final Exams period at Harvard a student tried to
delay the exam by sending in a fake bomb threat. The student used Tor
and Guerrilla Mail (a service which allows people to make disposable
email addresses) to send the bomb threat to school officials.</p>
<p>The student was caught, even though he took precautions to make sure he
wasn&rsquo;t caught.</p>
<p>Gurillar mail sends an originating IP address header along with the
email that&rsquo;s sent so the receiver knows where the original email came
from. With Tor, the student expected the IP address to be scrambled but
the authorities knew it came from a Tor exit node (Tor keeps a list of
all nodes in the directory service) so the authorities simply looked for
people who were accessing Tor (within the university) at the time the
email was sent.</p>
<p>Tor isn&rsquo;t an anonymising service, but it is a service that can encrypt
all traffic from A to B (so long as an end-end attack isn&rsquo;t performed).
Tor is also incredibly slow, so using it for Netflix isn&rsquo;t a good use
case. <img src="capture.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}</p>
<h3 id="the-difference-between-tor-and-a-vpn">The Difference Between Tor and a VPN<a hidden class="anchor" aria-hidden="true" href="#the-difference-between-tor-and-a-vpn">#</a></h3>
<p>When you use a VPN, the VPN forwards all your internet traffic to the
appropriate destination. When it does so, the VPN encrypts your traffic.
All your internet service provider can see is encrypted traffic heading
from your computer to the VPN. <img src="5.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} They can&rsquo;t see inside your packets. They don&rsquo;t
know who you&rsquo;re talking to - other than the VPN.</p>
<p>VPN&rsquo;s aren&rsquo;t private in the same way that Tor is. VPNs protect you
against ISPs or local adversaries (ones monitoring your laptop&rsquo;s WiFi).
But, they don&rsquo;t protect you from themselves.</p>
<p>The VPN is the man in the middle. It knows who you are and who you&rsquo;re
talking to. Depending on the traffic, the VPN also decrypts your packet.
Meaning they know everything. With a VPN, you have to trust it. With
Tor, you don&rsquo;t have to put a lot of trust in.</p>
<p>In Tor, one rogue node is survivable. If one of the nodes in our graph
earlier was an adversary, they&rsquo;ll only know our IP address or our data
packet. Tor protects you from Tor. VPN&rsquo;s expect that you trust them.</p>
<p>Tor protects you from the Tor network. One rogue node is survivable.
They don&rsquo;t expect you to trust the network.</p>
<p>No one, apart from you, should know the IP addresses of the origin and
destination - and know the contents of the message.</p>
<p><img src="capture2.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}</p>
<p>Now that we have a good handle on what Tor is, let&rsquo;s explore <strong>onion
routing</strong>.</p>
<h2 id="onion-routing">Onion Routing<a hidden class="anchor" aria-hidden="true" href="#onion-routing">#</a></h2>
<p><img src="6.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} Given the
network above, we are going to simulate what Tor does. Your computer is
the one on the far left, and you&rsquo;re sending a request to watch Stranger
Things on Netflix. This path of nodes is called a <strong>circuit</strong>. Later on,
we&rsquo;re going to look into how circuits are made and how the encryption
works. But for now we&rsquo;re trying to generalise how Tor works.
<img src="7.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} We start off
with the message (we haven&rsquo;t sent it yet). We need to encrypt the
message N times (where N is how many nodes are in the path). We encrypt
it using AES, a symmetric key crypto-system. The key is agreed using
Diffie-Hellman. Don&rsquo;t worry, we&rsquo;ll discuss all of this later. There is 4
nodes in the path (minus your computer and Netflix) so we encrypt the
message 4 times. <img src="8.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} Our packet (onion) has 4 layers. Blue, purple,
orange, and teal. Each colour represents one layer of encryption.
<img src="9.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} We send the
onion to the first node in our path. That node then removes the first
layer of encryption.</p>
<p>Each node in the path knows what the key to decrypt their layer is (via
Diffie-Hellman). Node 1 removes the blue layer with their symmetric key
(that you both agreed on). <img src="10.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} Node 1 knows you sent the message, but the message
is still encrypted by 3 layers of encryption, it has no idea what the
message is.</p>
<p>As it travels down the path, more and more layers are stripped away. The
next node does not know who sent the packet. All it knows is that Node 1
sent them the packet, and it&rsquo;s to be delivered to Node 3.
<img src="11.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} Now Node 3
strips away a layer. <img src="12.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} The final node knows what the message is and where
it&rsquo;s going, but it doesn&rsquo;t know who sent it. All it knows is that Node 3
sent them the message, but it doesn&rsquo;t know about anyone else in the
path. One of the key properties here is that once a node decrypts a
layer, it cannot tell how many more layers there are to decrypt. It
could be as small as 1 or 2 or as large as 200 layers of encryption.
<img src="13.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} Now there&rsquo;s no
way Amazon can find out you watch Netflix! Netflix sends back a part of
Stranger Things.</p>
<p>Let&rsquo;s see how it works in reverse. <img src="16.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} Node 4 adds its layer of encryption now. It
doesn&rsquo;t know who originally made the request, all it knows is that Node
3 sent the request to them so it sends the response message back to Node
3. <img src="17.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} And so on
for the next few nodes. <img src="18.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} Now the response packet is fully encrypted.
<img src="19.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} Now the packet
is fully encrypted, the only one who still knows what the message
contains is Node 4. The only one who knows who made the message is Node</p>
<ol>
<li>Now that we have the fully encrypted response back, we can use all
the symmetric keys to decrypt it. <img src="20.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} You might be thinking &quot;I&rsquo;ve seen snails �� faster
than this&quot; and you would be right. This protocol isn&rsquo;t designed for
speed, but at the same time it has to care about speed.</li>
</ol>
<p>The algorithm could be much slower, but much more secure (using entirely
public key cryptography instead of symmetric key cryptography) but the
usability of the system matters. So yes, it&rsquo;s slow. No it&rsquo;s not as slow
as it could be. But it&rsquo;s all a balancing act here.</p>
<p>The encryption used is normally AES with the key being shared via
Diffie-Hellman.</p>
<p>The paths Tor creates are called circuits. Let&rsquo;s explore how Tor chooses
what nodes to use in a circuit.</p>
<h2 id="how-is-a-circuit-created">How Is a Circuit Created?<a hidden class="anchor" aria-hidden="true" href="#how-is-a-circuit-created">#</a></h2>
<p>Each machine, when it wants to create a circuit, chooses the exit node
first, followed by the other nodes in the circuit. Tor circuits are
always 3 nodes. Increasing the length of the circuit does not create
better anonymity. If an attacker owns the first and last nodes in the
network, you can have 1500 nodes in the circuit and it still wouldn&rsquo;t
make you more secure.</p>
<p>When Tor selects the exit node, it selects it following these
principles:</p>
<ol>
<li>
<p>Does the client&rsquo;s torrc (the configuration file of Tor) have
settings about which exit nodes not to choose?</p>
</li>
<li>
<p>Tor only chooses an exit relay which allows you to exit the Tor
network. Some exit nodes only allow web traffic (HTTP/S port 80)
which is not useful when someone wants to send email (SMTP port 25).
The exit node has to have the available capacity to support you. Tor
tries to choose an exit node which has enough resources available.</p>
</li>
</ol>
<p>All paths in the circuit obey these rules:</p>
<ul>
<li>We do not choose the same router twice for the same path.</li>
</ul>
<p>If you choose the same node twice, it&rsquo;s guaranteed that the node will
either be the guard node (the node you enter at) or the exit node, both
dangerous positions. There is a 2/3 chance of it being both the guard
and exit nodes, which is even more dangerous. We want to avoid the entry
/ exit attacks. <img src="21.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;}</p>
<ul>
<li>We do not choose any router in the same family as another in the
same path. (Two routers are in the same family if each one lists the
other in the &ldquo;family&rdquo; entries of its descriptor.)</li>
</ul>
<p>Operators who run more than 1 Tor node can choose to signify their nodes
as &lsquo;family&rsquo;. This means that the nodes have all the same parent (the
operator of their network). This is again a countermeasure against the
entry / exit attacks, although operators do not have to declare family
if they wish. If they want to become a guard node (discussed soon) it is
recommended to declare family, although not required.
<img src="22.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}</p>
<ul>
<li>We do not choose more than one router in a given /16 subnet.</li>
</ul>
<p>Subnets define networks. IP addresses are made up of 8 octets of bits.
As an example, Google&rsquo;s IP address in binary is:</p>
<p>python 01000000.11101001.10101001.01101010</p>
<p>The first 16 bits (the /16 subnet) is <strong>01000000.11101001</strong> which means
that Tor does not choose any nodes which start with the same 16 bits as
this IP address. Again, a counter-measure to the entry / exit attacks.
<img src="23.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} If subnets
sound confusing, I&rsquo;ve written this Python code to help explain them:</p>
<p>python # ip addresses are in binary, not the usual base 10 subnets #
are usually powers of 2, this is 2^4. IP =
&quot;01000000.11101001.10101001.01101010&quot; subnet = 16</p>
<p># this will store the subnet address once we find it subnet_ip = []
IP_list = list(IP) counter = 0</p>
<p>for i in IP_list: # we want to end the loop when we reach the subnet
number if counter &gt;= subnet: break # the ip address segments each
oclet of bits with full stops # we don&rsquo;t want to count a fullstop as a
number # but we want to include it in the final subnet if i == &quot;.&quot;:
subnet_ip.append(&quot;.&quot;) continue else: # else it is a number so we
append and increment counter subnet_ip.append(i) counter = counter + 1
print(&quot;Subnet is &quot; + &ldquo;.join(subnet_ip))</p>
<ul>
<li>We don&rsquo;t choose any non-running or non-valid router unless we have
been configured to do so. By default, we are configured to allow
non-valid routers in &ldquo;middle&rdquo; and &ldquo;rendezvous&rdquo; positions.</li>
</ul>
<p>Non-running means the node currently isn&rsquo;t online. You don&rsquo;t want to
pick things that aren&rsquo;t online. Non-valid means that some configuration
in the nodes <strong>torrc</strong> is wrong. You don&rsquo;t want to accept strange
configurations in case they are trying to hack or break something.</p>
<ul>
<li>The first node must be a <strong>Guard node</strong>.</li>
</ul>
<p>A <strong>guard node</strong> is a privileged node because it sees the real IP of the
user. It&rsquo;s &lsquo;expensive&rsquo; to become a guard node (maintain a high uptime
for weeks and have good bandwidth). <img src="24.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} This is possible for large companies who have 99.9
percent uptime and high bandwidth (such as Netflix). Tor has no way to
stop a powerful adversary from registering a load of guard nodes. Right
now, Tor is configured to stick with a single guard node for 12 weeks at
a time, so you choose 4 new guard nodes a year.</p>
<p>This means that if you use Tor once to watch Amazon Prime Video, it is
relatively unlikely for Netflix to be your guard node. Of course, the
more guard nodes Netflix creates the more likely it is. Although, if
Netflix knows you are connecting to the Tor network to watch Amazon
Prime Video then they will have to wait 4 weeks for their suspicions to
be confirmed, unless they attack the guard node and take it over.</p>
<p>Becoming a guard node is relatively easy for a large organisation.
Becoming the exit node is slightly harder, but still possible. We have
to assume that the large organisation has infinite computational power
to be able to do this. The solution is to make the attack highly
expensive with a low rate of success. The more regular users of Tor, the
harder is if for a large organisation to attack it. If Netflix controls
$\frac{50}{100}$ nodes in the network:
<img src="25.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} The chance of
you choosing a guard node from Netflix is 50</p>
<p>If suddenly 50 more normal user nodes join then that&rsquo;s $\frac{50}{100}$
reducing the probability of Netflix owning a guard node (and thus, a
potential attack) and making it even more expensive.
<img src="26.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} There is
strength in numbers within the Tor service.</p>
<h2 id="guard-pinning">Guard Pinning<a hidden class="anchor" aria-hidden="true" href="#guard-pinning">#</a></h2>
<p>When a Tor client starts up for the first time, it chooses a small and
random set of guard nodes. For the next few months, it makes sure each
circuit is using one of these pre-selected nodes as its guard node.</p>
<p>The official proposal from the Tor documentation states:</p>
<blockquote>
<p>&quot;1. Introduction and motivation</p>
<p>Tor uses entry guards to prevent an attacker who controls some a
fraction of the network from observing a fraction of every user&rsquo;s
traffic. If users chose their entries and exits uniformly at random
from the list of servers every time they build a circuit, then an
adversary who had (k/N) of the network would deanonymize $F=(k/N)^2$
of all circuits... and after a given user had built C circuits, the
attacker would see them at least once with probability $1-(1-F)^C$.
With large C, the attacker would get a sample of every user&rsquo;s traffic
with probability 1.</p>
<p>To prevent this from happening, Tor clients choose a small number of
guard nodes (currently 3). These guard nodes are the only nodes that
the client will connect to directly. If they are not compromised, the
user&rsquo;s paths are not compromised.</p>
<p>But attacks remain. Consider an attacker who can run a firewall
between a target user and the Tor network, and make many of the guards
they don&rsquo;t control appear to be unreachable. Or consider an attacker
who can identify a user&rsquo;s guards, and mount denial-of-service attacks
on them until the user picks a guard that the attacker controls.&quot;</p>
</blockquote>
<p>Guard node pinning is important because of Tor&rsquo;s threat model. Tor
assumes that it may only take a single opening for an adversary to work
out who you are talking to, or who you are. Since a single vulnerability
circuit can destroy your integrity, Tor tries to minimise the
probability that we will ever construct one or more vulnerable circuits.</p>
<p>Tor guard nodes can be denial of service attacked, or an attacker could
have a majority share of guard nodes on the internet when you connect to
try and get you. By guard node pinning, it aims to make this much
harder.</p>
<p>In the event of an attacker working out your guard nodes and shutting
them down, forcing you to connect to their guard nodes. Or, you connect
to a guard node controlled by an adversary Tor has algorithms in place
to try and detect this.</p>
<h2 id="what-is-a-directory-node">What Is a Directory Node?<a hidden class="anchor" aria-hidden="true" href="#what-is-a-directory-node">#</a></h2>
<p>The state of the Tor network is tracked and publicised by a group of 9
trusted servers (as of 2019) known as <strong>directory nodes</strong>. Each of which
is controlled by a different organisation.</p>
<p>Each node is a separate organisation because it provides redundancy and
distributes trust. The integrity of the Tor network relies on the
honesty and correctness of the directory nodes. So making the network
resilient and distributing trust is critical.</p>
<p>Directory nodes maintain a list of currently running relays (publicly
listed node in the Tor network). Once per hour directory nodes publish a
consensus together. The consensus is a single document compiled and
voted on by each directory node. It ensures that all clients have the
same information about the relays that make up Tor.</p>
<p>When a Tor user (a client or a node) wants to know the current state of
the network, it asks a directory node. As we&rsquo;ll see later, directory
nodes are essential for all parts of Tor, especially in hidden services.
<img src="27.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} Relays keep
the directory nodes up to date. They send directory node(s) a
notification whenever they come online or updated. Whenever a directory
node receives a notification, it updates its personal opinion on the
current state of the Tor network. All directory nodes then use this
opinion to form a consensus of the network.
<img src="28.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} Let&rsquo;s now look
at what happens when disagreements arise in the directory services when
forming a consensus.</p>
<p>The first version of Tor took a simple approach to conflict resolution.
Each directory node gave the state of the network as it personally saw
it. Each client believed whichever directory node it had spoken to
recently. There is no consensus here among all directory nodes.</p>
<p>In Tor, this is a disaster. There was nothing ensuring that directory
nodes were telling the truth. If an adversary took over one directory
node, they would be able to lie about the state of the network.
<img src="29.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} If a client
asked this adversary controlled directory for the state of the network,
it&rsquo;d return a list. This list contains only nodes that the adversary
controlled. The client would then connect to these adversary nodes.</p>
<p>The second version of the Tor directory system made this attack harder.
Instead of asking a single directory node for its opinion, clients asked
every directory node and combined their opinions into a consensus. But,
clients could form differing views on the network depending on when they
had last spoken to each directory node. This gave way to statistical
information leakage - not as bad as Tor 1.0. Besides, every client had
to talk to every directory node, which took time and was expensive.</p>
<p>The third and current version of the directory system moved the
responsibility of calculating a consensus from clients to directory
nodes. <img src="30.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}</p>
<h2 id="what-are-bridge-nodes">What Are Bridge Nodes?<a hidden class="anchor" aria-hidden="true" href="#what-are-bridge-nodes">#</a></h2>
<p>I&rsquo;m not sure if you saw it earlier, but I made the distinction between
nodes in the directory services and nodes that aren&rsquo;t.</p>
<p>If a repressive state wants to block Tor, it uses the directory nodes.
Directory nodes keep up-to-date lists of Tor relay nodes and are
publicly available for anyone to download.</p>
<p>The state can query a directory node for a list of active Tor relays,
and censor all traffic to them.</p>
<p>Tor keeps an up-to-date listing of countries where it is possibly
blocked (censored) if you&rsquo;re interested.</p>
<p>Tor helps its users circumvent the censorship by hiding the fact they
are using Tor. They do this through a proxy known as a Bridge Node. Tor
users send their traffic to the bridge node, which forwards the traffic
onto the user&rsquo;s chosen guard nodes. <img src="51.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} The full list of Bridge nodes is never published,
making it difficult for states to completely block Tor. You can view
some bridge nodes here. If this doesn&rsquo;t work, Tor suggests:</p>
<blockquote>
<p>&quot;Another way to get bridges is to send an email to
bridges@torproject.org. Please note that you must send the email
using an address from one of the following email providers: Riseup or
Gmail.</p>
</blockquote>
<p>It&rsquo;s possible to block Tor another way. Censoring states can use Deep
Packet Inspection (DPI)to analyse the shape, volume, and feel of each
packet. Using DPI states can recognise Tor traffic, even when they
connect to unknown IP addresses or are encrypted.</p>
<p>To circumvent this, Tor developers have made Pluggable Transports (PT).
These transform Tor traffic flow between the client and the bridge. In
the words of Tor&rsquo;s documentation:</p>
<p>This way, censors who monitor traffic between the client and the bridge
will see innocent-looking transformed traffic instead of the actual Tor
traffic. External programs can talk to Tor clients and Tor bridges using
the pluggable transport API, to make it easier to build interoperable
programs.</p>
<h2 id="tor-hidden-services">Tor Hidden Services<a hidden class="anchor" aria-hidden="true" href="#tor-hidden-services">#</a></h2>
<p>Ever heard those rumours &quot;there are websites on the dark-web, on Tor
that when you visit them you&rsquo;ll see people doing nasty things, selling
illegal things or worse: watching The Hangover Part 3&quot;</p>
<p>When people talk about these websites they are talking about <strong>Tor
Hidden Services</strong>.</p>
<p>These are a wild concept and honestly deserve an entire blogpost on
their own. Hidden services are servers, like any normal computer server.
<img src="52.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} Except in a
Tor Hidden Service it is possible to communicate without the user and
server knowing who each other are. <img src="53.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} The device (the question mark) knows that it wants
to access Netflix, but it doesn&rsquo;t know anything about the server and the
server doesn&rsquo;t know anything about the device that&rsquo;s asked to access it.
This is quite confusing, but don&rsquo;t worry, I&rsquo;m going to explain it all
with cool diagrams.</p>
<p>When a server is set up on Tor to act as a hidden service, the server
sends a message to some selected Onion Routers asking if they want to be
an introduction point to the server. It is entirely up to the server as
to who gets chosen as an introduction point, although usually they ask 3
routers to be their introduction points.
<img src="54.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} The
introduction points know that they are going to be introducing people to
the server.</p>
<p>The server will then create something called a hidden service descriptor
which has a public key and the IP address of each introduction point. It
will then send this hidden service descriptor to a distributed hash
table which means that every onion router (not just the introduction
points) will hold some part of the information of the hidden service.</p>
<p>If you try to look up a hidden service the introduction point
responsible for it will give you the full hidden service descriptor, the
address of the hidden service&rsquo;s introduction points.</p>
<p>The key for this hash table is the onion address and the onion address
is derived from the public key of the server.</p>
<p>The idea is that the onion address isn&rsquo;t publicised over the whole Tor
network but instead you find it another way like from a friend telling
you or on the internet (addresses ending in .onion).</p>
<p>The way that the distributed hash table is programmed means that the
vast majority of the nodes won&rsquo;t know what the descriptor is for a given
key.</p>
<p>So almost every single onion router will have minimal knowledge about
the hidden service unless they explicitly want to find it.
<img src="55.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} Let&rsquo;s say
someone gave you the onion address. You request the descriptor off the
hash table and you get back the services introduction points.</p>
<p>If you want to access an onion address you would first request the
descriptor from the hash table and the descriptor has, let&rsquo;s say 4 or 5
IP addresses of introductory nodes. You pick one at random let&rsquo;s say the
top one. <img src="56.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}
You&rsquo;re going to ask the introduction point to introduce you to the
server and instead of making a connection directly to the server you
make a rendezvous point at random in the network from a given set of
Onion Routers. <img src="57.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}
You then make a circuit to that rendezvous point and you send a message
to the rendezvous point asking if it can introduce you to the server
using the introduction point you just used. You then send the rendezvous
point a one time password (in this example, let&rsquo;s use &lsquo;Labrador&rsquo;).</p>
<p>The rendezvous point makes a circuit to the introduction point and sends
it the word &lsquo;Labrador&rsquo; and its IP address.
<img src="58.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} The
introduction point sends the message to the server and the server can
choose to accept it or do nothing. <img src="59.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} If the server accepts the message it will then
create a circuit to the rendezvous point.
<img src="60.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} The server
sends the rendezvous point a message. The rendezvous point looks at both
messages from your computer and the server. It says &quot;well, I&rsquo;ve
received a message from this computer saying it wants to connect with
this service and I&rsquo;ve also received a message from the service asking if
it can connect to a computer, therefore they must want to talk to each
other&quot;.</p>
<p>The rendezvous point will then act as another hop on the circuit and
connect them. <img src="61.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}
In short, a hidden service works like this, taken from here:</p>
<ol>
<li>
<p>A hidden service calculates its key pair (private and public key,
asymmetric encryption).</p>
</li>
<li>
<p>Then the hidden service picks some relays as its introduction
points.</p>
</li>
<li>
<p>It tells its public key to those introduction points over Tor
circuits.</p>
</li>
<li>
<p>After that the hidden-service creates a hidden service descriptor,
containing its public key and what its introduction points are.</p>
</li>
<li>
<p>The hidden service signs the hidden service descriptor with its
private key.</p>
</li>
<li>
<p>It then uploads the hidden service descriptor to a distributed hash
table (DHT).</p>
</li>
<li>
<p>Clients learn the .onion address from a hidden service out-of-band.
(e.g. public website) (A hash.onion is a 16 character name derived
from the service&rsquo;s public key.)</p>
</li>
<li>
<p>After retrieving the .onion address the client connects to the DHT
and asks for that hash.</p>
</li>
<li>
<p>If it exists the client learns about the hidden service&rsquo;s public key
and its introduction points.</p>
</li>
<li>
<p>The client picks a relay at random to build a circuit to it, to tell
it a one-time secret. The picked relay acts as rendezvous point.</p>
</li>
<li>
<p>The client creates a introduce message, containing the address of
the rendezvous point and the one-time secret, before encrypting the
message with the hidden service&rsquo;s public key.</p>
</li>
<li>
<p>The client sends its message over a Tor circuit to one of the
introduction points, demanding it to be forwarded to the hidden
service.</p>
</li>
<li>
<p>The hidden service decrypts the introduce message with its private
key to learn about the rendezvous point and the one-time secret.</p>
</li>
<li>
<p>The hidden service creates a rendezvous message, containing the
one-time secret and sends it over a circuit to the rendezvous point.</p>
</li>
<li>
<p>The rendezvous point tells the client that a connection was
established.</p>
</li>
<li>
<p>Client and hidden service talk to each other over this rendezvous
point. All traffic is end-to-end encrypted and the rendezvous point
just relays it back and forth. Note that each of them, client and
hidden service, build a circuit to the rendezvous point; at three
hops per circuit this makes six hops in total.</p>
</li>
</ol>
<h2 id="attacks-on-tor">Attacks on Tor<a hidden class="anchor" aria-hidden="true" href="#attacks-on-tor">#</a></h2>
<p>Tor projects its users from analysis attacks. The adversary wants to
know who Alice is talking to. Yet, Tor does not protect against
confirmation attacks. In these attacks, the adversary aims to answers
the question &ldquo;Is Alice talking to Bob?&rdquo;</p>
<p>Confirmation attacks are hard and need a lot of preparation and
resources. The attacker needs to be able to track both ends of the
circuit. The attacker can either directly track each devices internet
connection or the guard and exit nodes.</p>
<p>If Alice sends a packet like this:</p>
<p>python # (timestamp, size, port, protocol) (17284812, 3, 21, SSH)</p>
<p>And Bob receives this packet, the attacker can see that the packets are
the same - even though the attacker cannot see what the packet is as it
is encrypted. Does Bob tend to receive packets at the same time that
Alice sends them? Are they the same size? If so, it is reasonable to
infer that Alice and Bob are communicating with each other.</p>
<p>Tor breaks packets up into sizeable chunks for a reason - to try and
prevent this kind of thing. Tor is working on padding all packets to
make this harder.</p>
<p>They&rsquo;re discussing adding packet order randomisation too. But this is
too costly at the moment. The Tor browser does add some extra defences,
such as reordering packets.</p>
<p>If Alice sends the packets, A, B, C and Bob receives them in B, A, C it
is harder to detect that they are the same. It&rsquo;s not foolproof, but it
does become harder.</p>
<p>An attack where the attacker tries to control both ends of the circuit
is called a Sylbil Attack. Named after the main character of the book
Sybil by Flora Rheta Schreiber. We discussed some of this earlier, where
an attacker controls both the guard and exit nodes.</p>
<p>Sybil attacks are not theoretical. In 2014 researchers at Carnegie
Mellon University appeared to successfully carry out a Sybil Attack
against the real-life Tor network.</p>
<p>When Lizard Squad - a group of hackers tried to perform a Sybil attack,
a detection system alarmed. Tor has built-in monitoring against these
kinds of events, and they are working on more sophisticated monitoring
against Sybil attacks.</p>
<p>In 2007 Dan Egerstad - a Swedish security consultant, revealed he has
intercepted usernames and passwords sent through Tor by being an exit
node. At the time, these were not TLS or SSL encrypted.</p>
<p>Interestingly, Dan Egerstad had this to say on the Tor nodes:</p>
<blockquote>
<p>&quot;If you actually look into where these Tor nodes are hosted and how
big they are, some of these nodes cost thousands of dollars each month
just to host because they&rsquo;re using lots of bandwidth, they&rsquo;re
heavy-duty servers and so on. Who would pay for this and be
anonymous?&quot;</p>
</blockquote>
<p>Tor does not normally hide the fact that you are using Tor. Many
websites (such as BBC&rsquo;S iPlayer or editing Wikipedia) block you when
using a known Tor node.</p>
<p>Some applications, under Tor, reveal your true IP address. One such
application is BitTorrent.</p>
<p>Jansen et al described an attack where they DDOS exit nodes. By
degrading the network (removing exit nodes) an attacker increases the
chance to getting an exit node.</p>
<p>Tor users who visit a site twice, once on Tor and once off, can be
tracked. The way you move your mouse is unique. There is a JavaScript
time measurement bug report on the Tor project that shows how it&rsquo;s
possible to monitor the mouse locations on a site (even when on Tor).
Once you fingerprint someone twice, you know they&rsquo;re the same person.</p>
<p>It should be noted, that Tor browser offers 3 levels of security
(located in the settings). The highest security level disables
JavaScript, some images (as they can be used to track you) and some
fonts too. The lesson is, if you want high-security Tor, use the
high-security version.</p>
<p>Now, all these attacks sound cool. But that&rsquo;s not how most Tor users are
caught. Most Tor users make mistakes and are caught because of
themselves.</p>
<p>Take Dredd pirate Roberts, Founder of the Silk Road dark marketplace. He
gave himself away by posting about it on social media.</p>
<p>Most Tor users are caught (if they&rsquo;re doing illegal things) by bad
operational security, and not normally because of a security issue with
Tor.</p>
<p>It&rsquo;s worth repeating this story, that we saw earlier.</p>
<p>In 2013 during the Final Exams period at Harvard, a student tried to
delay the exam by sending in a fake bomb threat. The student used Tor
and Guerrilla Mail (a service which allows people to make disposable
email addresses) to send the bomb threat to school officials.</p>
<p>The student was caught, even though he took precautions to make sure he
wasn&rsquo;t caught.</p>
<p>Guerilla mail sends an originating IP address header along with the
email that&rsquo;s sent to the receiver, so it knows where the original email
came from. With Tor, the student expected the IP address to be scrambled
but the authorities knew it came from a Tor exit node (Tor keeps a list
of all nodes in the directory service) so the authorities looked for
people who were accessing Tor (within the university) at the time the
email was sent.</p>
<p>If this person went to a coffee shop or something, he probably would of
be fine.</p>
<p>There&rsquo;s a fantastic talk at DEFCON 22 about how Tor users got caught.
None of the stories mentioned was caused by Tor, but rather bad OpSec.</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Tor is a fascinating protocol full of algorithms that have been refined
over the years. I&rsquo;ve come to appreciate Tor, and I hope you have to.</p>
<h1 id="bittorrent">BitTorrent<a hidden class="anchor" aria-hidden="true" href="#bittorrent">#</a></h1>
<p>BitTorrent is one of the most common protocols for transferring large
files. In February 2013, BitTorrent was responsible for 3.35 percent of
all worldwide bandwidth, more than half of the 6 percent of total
bandwidth dedicated to file sharing.</p>
<h2 id="who-created-bittorrent">Who Created BitTorrent?<a hidden class="anchor" aria-hidden="true" href="#who-created-bittorrent">#</a></h2>
<p>Bram Cohen invented the BitTorrent protocol in 2001. Cohen wrote the
first client implementation in Python.</p>
<p>Cohen collected free pornography to lure beta testers to use BitTorrent
in the summer of 2002.</p>
<h2 id="bittorrent-vs-cient-server-downloading">BitTorrent vs Cient-Server Downloading<a hidden class="anchor" aria-hidden="true" href="#bittorrent-vs-cient-server-downloading">#</a></h2>
<p>In traditional downloading, the server uploads the file, and the client
downloads the file. <img src="62.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} For popular files, this isn&rsquo;t very effective.</p>
<p>500 people downloading the same file will put the server under strain.
This strain will cap the upload speed, so clients can not download the
file fast.</p>
<p>Second, client-server costs a lot of money. The amount we pay increases
with how popular a file is.</p>
<p>Third, it&rsquo;s centralised. Say the system dies, the file no longer exists</p>
<ul>
<li>no one can download it.</li>
</ul>
<p>BitTorrent aims to solve these problems.
<img src="63.PNG" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} In a
peer-to-peer network, every peer is connected to every other peer in the
network. <img src="64.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}
<strong>Semi-centralised peer-to-peer networks</strong> possess one or more peers
with higher authority than most peers.
<img src="65.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}</p>
<h2 id="high-level-overview">High Level Overview<a hidden class="anchor" aria-hidden="true" href="#high-level-overview">#</a></h2>
<p>BitTorrent is a way to share files. It&rsquo;s often used for large files.
BitTorrent is an alternative to a single source sharing a file, such as
a server. BitTorrent can productively work on lower bandwidth.</p>
<p>The first release of the BitTorrent client had no search engine and no
peer exchange, users who wanted to upload a file had to create a small
<strong>torrent descriptor file</strong> that they would upload to a torrent index
site.</p>
<p>When a user wants to share a file, they seed their file. This user is
called a seeder. They upload a torrent descriptor file to an exchange
(we&rsquo;ll talk about this later). Anyone who wants to download that file
will download this torrent descriptor.
<img src="66.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} We call those
who download peers. Their torrent client will connect to a tracker
(discussed later) and the tracker will send them a list of IP addresses
of other seeds and peers in the swarm. The swarm is all PC&rsquo;s related to
a certain torrent.</p>
<p>The torrent descriptor file contains a list of trackers and metadata on
the file we&rsquo;re downloading. <img src="67.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} A peer will connect to a seed and download parts
of the file. <img src="68.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}
Once the peer completes a download, they could function as a seed.
Although, it is possible to function as a seed while also downloading
(and is very common).</p>
<p>Once the seed has shared the file to a peer, that peer will act as a
seed. Instead of the client-server model where only 1 server exists to
upload the file, in BitTorrent, multiple people can upload the same
file.</p>
<p>BitTorrent splits the file up into chunks called pieces, each of a
certain size. Sometimes it&rsquo;s 256KB, sometimes it&rsquo;s 1MB. As each peer
receives a piece, they become a seed of that piece for other peers.</p>
<p>With BitTorrent, we do not have a single source to download from. We
could download a few pieces from your home country, then download a few
that your home country doesn&rsquo;t own from a far-away country.</p>
<p>The protocol hashes the pieces to make sure no seed has tampered with
the original file. Then stores the hash in the torrent descriptor on the
tracker.</p>
<p>This is how BitTorrent works at a very high level. We will now go into
detail. We aim to answer these questions:</p>
<ol>
<li>
<p>What if a peer only downloads and never uploads?</p>
</li>
<li>
<p>Who do we download from, or upload to?</p>
</li>
<li>
<p>What is a magnet link?</p>
</li>
<li>
<p>What is a torrent descriptor?</p>
</li>
<li>
<p>What hashing algorithm is used?</p>
</li>
<li>
<p>How does BitTorrent selects what pieces to download?</p>
</li>
</ol>
<p>And much more.</p>
<h2 id="whats-in-a-torrent-descriptor-file-anyway">What&rsquo;s in a Torrent Descriptor File, Anyway?<a hidden class="anchor" aria-hidden="true" href="#whats-in-a-torrent-descriptor-file-anyway">#</a></h2>
<p>It&rsquo;s a dictionary (or hashmap) file.</p>
<p>The file is described as:</p>
<ol>
<li><strong>Announce</strong></li>
</ol>
<p>The URL of the tracker. Remember earlier when we contacted the tracker
server to find other peers using the same file? We found that tracker by
using the announce key in the torrent descriptor file.</p>
<ol>
<li><strong>Info</strong></li>
</ol>
<p>This maps to a dictionary whose keys depend on whether one or more files
are being shared. The keys are: <strong>Files (child of info, is a list)</strong>
Files only exists when multiple files are being shared. Files is a list
of dictionaries. Each dictionary corresponding to a file.</p>
<p>Each of these dictionaries has 2 keys:</p>
<p><strong>Length</strong> - the size of the file in bytes. <strong>Path</strong> - A list of strings
corresponding to subdirectory names, the last of which is the actual
file name.</p>
<ol>
<li><strong>Length</strong></li>
</ol>
<p>The size of the file in bytes (only when one file is being shared)</p>
<ol>
<li><strong>Name</strong></li>
</ol>
<p>Suggested filename. Or the suggested directory name.</p>
<ol>
<li><strong>Pieces length</strong></li>
</ol>
<p>The number of bytes per piece.</p>
<p>The piece&rsquo;s length must be a power of two and at least 16KiB.</p>
<p>This is: $$2^8 ; KiB = 256 ; KiB = 262,144 ; B$$</p>
<ol>
<li><strong>Pieces</strong></li>
</ol>
<p>A hash list.</p>
<p>A list of hashes calculated on various chunks of data. We split the data
into pieces. Calculate the hashes for those pieces, store them in a
list.</p>
<p>BitTorrent uses SHA-1, which returns a 160-bit hash. Pieces will be a
string whose length is a multiple of 20 bytes.</p>
<p>If the torrent contains multiple files, the pieces are formed by
concatenating the files in the order they appear in the files directory.</p>
<p>All pieces in the torrent are the full piece length except for the last
piece which may be shorter.</p>
<p>Now, I can guess what you&rsquo;re thinking.</p>
<blockquote>
<p>&quot;SHA-1? What is this? The early 2000s?&quot;</p>
</blockquote>
<p>And I agree.BitTorrent is moving from SHA-1 to SHA256. Google BEP 0052
to find out more.</p>
<p>Still confused? Not to worry! I designed this JSON file that describes
what a torrent file looks like. Note: I&rsquo;ve concatenated some things.
This makes it easier to read and understand the general layout. I made
the numbers up, following the rules of BitTorrent&rsquo;s torrent descriptor.</p>
<p>python &quot;Announce&quot;: &quot;url of tracker&quot;, &quot;Info&quot;: &quot;Files&quot;: [
&quot;Length&quot;: 16, &quot;path&quot;: &quot;/folder/to/path&quot; , &quot;length&quot;: 193,
&quot;path&quot;: &quot;/another/folder&quot; ] , &quot;length&quot;: 192, &quot;name&quot;:&quot;
Ubuntu.iso&quot;, &quot;Pieces length&quot;: 262144, &quot;Pieces&quot;:
[AAF4C61DDCC5E8A2DABEDE0F3B482CD9AEA9434D,
CFEA2496442C091FDDD1BA215D62A69EC34E94D0]</p>
<h2 id="the-piece-selection-algorithm-of-bittorrent">The Piece Selection Algorithm of BitTorrent<a hidden class="anchor" aria-hidden="true" href="#the-piece-selection-algorithm-of-bittorrent">#</a></h2>
<p>One of the largest questions in BitTorrent is &ldquo;what pieces should I
select to download?&rdquo;</p>
<p>With a traditional client-server model, we download the whole file. But
now, we get to pick what pieces to download.</p>
<p>The idea is to download the pieces that no one else has - the rare
pieces. By downloading the rare pieces, we make them less rare by
uploading them.</p>
<h3 id="what-are-sub-pieces-and-the-piece-selection-algorithm">What Are Sub-Pieces and the Piece Selection Algorithm?<a hidden class="anchor" aria-hidden="true" href="#what-are-sub-pieces-and-the-piece-selection-algorithm">#</a></h3>
<p>BitTorrent uses TCP, a transmission protocol for packets. TCP has a
mechanism called slow start.</p>
<p>Slow start is a mechanism which balances the speed of a TCP network
connection. It escalates the amount of data transmitted until it finds
the network&rsquo;s maximum carrying capacity. <strong>cwdn</strong> stands for the
Congestion Window. <img src="666.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} TCP does this because if we send 16 connections at
once, the server may not be used to the traffic and congestion will
happen on the network.</p>
<p>If we&rsquo;re not regularly sending data, TCP may cap our network connection
at a slower speed than normal.</p>
<p>BitTorrent makes sure to always send data by breaking pieces down into
further sub-pieces.</p>
<p>Each sub-piece is about 16KB in size. The size for a piece is not fixed,
but it is somewhere around 1MB.</p>
<p>The protocol always has some number of requests (five) for a sub-piece
pipe-lined. When a new sub-piece is download, the client sends a new
request. This helps speed things up. <img src="68.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} Sub-pieces can be downloaded from other peers.</p>
<p>Two core policies govern the Piece Selection Algorithm.</p>
<p><strong>1. Strict Policy</strong> Once the BitTorrent client requests a sub-piece of
a piece, any remaining sub-pieces of that piece are requested before any
sub-pieces from other pieces. <img src="69.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} In this image, it makes sense to download all the
sub-pieces of this piece first rather than start downloading another
piece.</p>
<p><strong>2. Rarest First</strong> The main policy in BitTorrent is to pick the rarest
first. We want to download the piece which the fewest other peers own.</p>
<p>This is so we can make it &lsquo;un-rare&rsquo;. If only one peer has a piece and
they go offline, no one will get the complete file.</p>
<p>A plethora of benefits exist for this policy.</p>
<ul>
<li>
<p><strong>Growing the seed</strong></p>
<p>Rarest first makes sure that we download only new pieces from the
seed.</p>
<p>The seed will begin as a bottleneck. The one peer with the file.</p>
<p>A downloader can see what pieces their peers possess, and the rarest
first policy will cause us to fetch the pieces from the seed which
have not been uploaded by other peers.</p>
<p>Let&rsquo;s visualise this. <img src="70.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} The list of nodes (peers) is inter-connected.
I cannot draw this as the diagram is unfavourable.</p>
<p>Each arrow towards a sub-piece what that peer has downloaded. We
downloaded a sub-piece that no one else has other than the seed.
This means this sub-piece is rare.</p>
<p>Our upload rate is higher than that of the seed, so all peers will
want to download from us. Also, they would want to download the
rarest pieces first, and as we are one of 2 holders of the rarest
piece.</p>
<p>When everyone downloads from us, we can download faster from them.
This is the tit-for-tat algorithm (discussed later).</p>
</li>
<li>
<p>Increased download speed The more peers that hold the piece, the
faster the download can happen. This is because we can download
sub-pieces from other peers.</p>
</li>
<li>
<p>Enable uploading A rare piece is most wanted by other peers and
getting a rare piece means peers will be interested in uploading
from us. As we will see later, the more we upload, the more we can
download.</p>
</li>
<li>
<p>Most common last It is sensible to leave the most common pieces to
the end of the download. As many peers hold common pieces, the
probability of being able to download them is much larger than that
of rare pieces.</p>
</li>
<li>
<p>Prevent rarest piece missing When the seed dies, all the different
pieces of the file should be distributed somewhere among the
remaining peers.</p>
</li>
</ul>
<p><strong>3. Random First Piece</strong> Once we download, we have nothing to upload.
We need the first piece, fast. The rarest first policy is slow. Rare
pieces are downloaded slower because we can download its sub-pieces from
only a few peers.</p>
<p><strong>4. Endgame Mode</strong> Sometime&rsquo;s a peer with a slow transfer rate will try
to give us a sub-piece. Causing a delay of the download. To prevent
this, there is &ldquo;endgame mode&rdquo;.</p>
<p>Remember the pipe-lining principle? There are always several requests
for sub-pieces pending.</p>
<p>Assume we are downloading from 2 peers, and there is 1 other peer we are
not downloading from. <img src="71.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} When all the sub-pieces a peer lacks are
requested, they broadcast this request to all peers. This helps us get
the last chunk of the file. <img src="72.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} If a peer has the missing sub-piece, they will
send that back to our computer.</p>
<p>Once a sub-piece arrives, we send a cancel-message telling the other
peers to ignore our request. <img src="73.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;}</p>
<h3 id="resource-allocation-using-tit-for-tat">Resource Allocation Using Tit-For-Tat<a hidden class="anchor" aria-hidden="true" href="#resource-allocation-using-tit-for-tat">#</a></h3>
<p>No centralised resource allocation in BitTorrent exists. Instead, every
peer maximises their download rate.</p>
<p>A peer will download from whoever they can. To decide who to upload to,
they will use a variant of the &quot;tit-for-tat&quot;algorithm.</p>
<p>The tit-for-tat strategy comes from game theory. The essence is:</p>
<blockquote>
<p>&quot;Do onto others as they do onto you&quot;</p>
</blockquote>
<ol>
<li>
<p>On the first move, cooperate.</p>
</li>
<li>
<p>On each succeeding move do what your opponent did the previous move.</p>
</li>
<li>
<p>Be prepared to forgive after carrying out just one act of
retaliation.</p>
</li>
</ol>
<h3 id="the-choking-algorithm">The Choking Algorithm<a hidden class="anchor" aria-hidden="true" href="#the-choking-algorithm">#</a></h3>
<p>Choking is a temporary refusal to upload to another peer, but we can
still download from them.</p>
<p>To cooperate peers upload, and to not cooperate they &ldquo;choke&rdquo; the
connection to their peers. The principle is to upload to peers who have
uploaded to us. <img src="74.png" alt="image">{width=&rdquo;\textwidth&rdquo;
height=&rdquo;\textheight&rdquo;} We want several bidirectional connections at the
same time and to achieve <strong>Pareto Efficiency</strong>.</p>
<blockquote>
<p>&quot;We consider an allocation Pareto Efficient if there is no other
allocation in which some individual is better off and no individual is
worse off.&quot;</p>
</blockquote>
<p>Thus the big question, is how to determine which peers to choke and
which to unchoke?</p>
<p>A peer always unchokes a fixed number of its peers (the default is 4).</p>
<p>Current download rates decide which peers to unchoke. We use a 20-second
average to decide this. Because of the use of TCP (slow-start) rapidly
choking and unchoking is bad. Thus, this is calculated every 10 seconds.</p>
<p>If our upload rate is high more peers will allow us to download from
them. <strong>This means that we can get a higher download rate if we are a
good uploader.</strong> This is the most important feature of the BitTorrent
protocol.</p>
<p>The protocol prohibits many &ldquo;free riders&rdquo; which are peers who only
download and don&rsquo;t upload.</p>
<p>For a peer-to-peer network to be efficient, all peers need to contribute
to the network.</p>
<h3 id="optimistic-unchoking">Optimistic Unchoking<a hidden class="anchor" aria-hidden="true" href="#optimistic-unchoking">#</a></h3>
<p>BitTorrent also allows an additional unchoked peer, where the download
rate criteria aren&rsquo;t used.</p>
<p>We call this optimistic unchoking. Checking unused connections aren&rsquo;t
better than the ones in use.</p>
<p>We shift the optimistic unchoke every 30 seconds. Enough time for the
upload reaches full speed. Same for the upload. If this new connection
turns out to be better than one of the existing unchoked connections, it
will replace it.</p>
<p>The optimistic unchoke is randomly selected.</p>
<p>This also allows peers who do not upload and only download to download
the file, even if they refuse to cooperate. Albeit, they will download
at a much slower speed.</p>
<h3 id="anti-snubbing">Anti-Snubbing<a hidden class="anchor" aria-hidden="true" href="#anti-snubbing">#</a></h3>
<p>What happens if all peers uploading to another peer decide to choke it?
We then have to find new peers, but the optimistic unchoking mechanism
only checks one unused connection every 30 seconds. To help the download
rate recover more, BitTorrent has snubbing.</p>
<p>If a client hasn&rsquo;t received anything from a particular peer for 60
seconds, it will presume that it has been &lsquo;snubbed&rsquo;.</p>
<p>Following the mentality of tit-for-tat, we retaliate and refuse to
upload to that peer (except if they become an optimistic unchoke).</p>
<p>The peer will then increase the number of optimistic unchokes to find
new connections quicker.</p>
<h3 id="what-if-we-only-upload">What if we only upload?<a hidden class="anchor" aria-hidden="true" href="#what-if-we-only-upload">#</a></h3>
<p>We see that using the choking algorithm implemented in BitTorrent we
favour peers who are kind to us. If I can download fast from them, we
allow them to upload fast from me.</p>
<p>What about no downloads? Then it&rsquo;s impossible to know which peers to
unchoke using this choking algorithm. When a download is completed, we
use a new choking algorithm.</p>
<p>This new choking algorithm unchokes peers with the highest upload rate.
This ensures that pieces get uploaded faster, and they get replicated
faster.</p>
<p>Peers with good upload rates are also not being served by others.</p>
<h2 id="what-is-a-tracker">What Is a Tracker?<a hidden class="anchor" aria-hidden="true" href="#what-is-a-tracker">#</a></h2>
<p>Trackers are special types of server that help in communication between
peers.</p>
<p>Communication in BitTorrent is important. How do we learn what other
peers exist?</p>
<p>The tracker knows who owns the file, and how much.</p>
<p>Once a peer-to-peer download has started, communication can continue
without a tracker.</p>
<p>Since the creation of the distributed hash table method for trackerless
torrents, BitTorrent trackers are largely redundant.</p>
<h3 id="public-trackers">Public Trackers<a hidden class="anchor" aria-hidden="true" href="#public-trackers">#</a></h3>
<p>These are trackers that anyone can use.</p>
<p>The Pirate Bay operated one of the most popular public trackers until
disabling it in 2009, opting only for magnet links (discussed soon).</p>
<p>Private trackers are private. They restrict use by requiring users to
register with the site. The method for controlling registration is often
an invitation system. To use this tracker we need an invitation.</p>
<h3 id="multi-tracker-torrents">Multi-Tracker Torrents<a hidden class="anchor" aria-hidden="true" href="#multi-tracker-torrents">#</a></h3>
<p>Multi-tracker torrents contain multiple trackers in a single torrent
file. This provides redundancy if one tracker fails, the other trackers
can continue to maintain the swarm for the torrent.</p>
<p>With this configuration, it is possible to have multiple unconnected
swarms for a single torrent - which is bad. Some users can connect to
one specific tracker while being unable to connect to another. This can
create a disjoint set which can impede the efficiency of a torrent to
transfer the files it describes.</p>
<h2 id="magnet-links---trackerless-torrents">Magnet Links - Trackerless Torrents<a hidden class="anchor" aria-hidden="true" href="#magnet-links---trackerless-torrents">#</a></h2>
<p>Earlier, I talked about how the Pirate Bay got rid of trackers and
started using trackerless torrents.</p>
<p>When we download a torrent, we get a hash of that torrent. To download
the torrent without a tracker, we need to find other peers also
downloading the torrent. To do this, we need to use a distributed hash
table.</p>
<p>Let&rsquo;s explore Distributed Hash Tables.</p>
<h3 id="distributed-hash-tables">Distributed Hash Tables<a hidden class="anchor" aria-hidden="true" href="#distributed-hash-tables">#</a></h3>
<p>Distributed Hash Tables (DHT) give us a dictionary-like interface, but
the nodes are distributed across a network. The trick with DHTs is that
the node that gets to store a particular key is found by hashing that
key.</p>
<p>In effect, each peer becomes a mini-tracker.</p>
<p>Each node (client/server implementing the DHT protocol) has a unique
identifier known as the &ldquo;node ID&rdquo;. We choose node IDs at random from the
same 160-bit space as BitTorrent infohashes.</p>
<p>Infohashes are a SHA-1 hash of:</p>
<ul>
<li>
<p>ITEM: length(size) and path (path with filename)</p>
</li>
<li>
<p>Name: The name to search for</p>
</li>
<li>
<p>Piece length: The length(size) of a single piece</p>
</li>
<li>
<p>Pieces: SHA-1 Hash of EVERY piece of this torrent</p>
</li>
<li>
<p>Private: flag for restricted access</p>
</li>
</ul>
<p>We use a distance metric to compare two node IDs or a node ID and an
infohash for &ldquo;closeness&rdquo;.</p>
<p>Nodes must have a routing table containing the contact information for a
few other nodes.</p>
<p>Nodes know about each other in the DHT. They know many nodes with IDs
that are close to their own but few with far-away IDs.</p>
<p>The distance metric is XOR and is interpreted as an integer.
$$distance(A, B) = |A \oplus B |$$ Smaller values are closer.</p>
<p>When a node wants to find peers for a torrent, they use the distance
metric to compare the infohash of the torrent with the IDs of the nodes
in its routing table or the ID of one node with the ID of another node.</p>
<p>Then they contact the nodes in the routing table closet to the infohash
and asks them for contact information of peers downloading the torrent.</p>
<p>If a contacted node knows about peers for the torrent, they return the
peer contact information with the response. Otherwise, the contacted
node must respond with the contact information of the nodes in its
routing table closet to the infohash of the torrent.
<img src="75.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} The original
node queries nodes that are closer to the target infohash until it
cannot find any closer nodes. After the node exhausts the search, the
client then inserts the peer contact information for itself onto the
responding nodes with IDs closest to the infohash of the torrent. In the
future, other nodes can easily find us.</p>
<p>The return value for a query for peers includes an opaque value known as
the &ldquo;token.&rdquo; For a node to announce that its controlling peer is
downloading a torrent, it must present the token received from the same
queried node in a recent query for peers.</p>
<p>When a node attempts to &ldquo;announce&rdquo; a torrent, the queried node checks
the token against the querying node&rsquo;s IP address. This is to prevent
malicious hosts from signing up other hosts for torrents.</p>
<p>The querying node returns the token to the same node that they receive
the token from. We must accept tokens for a reasonable amount of time
after they have been distributed. The BitTorrent implementation uses the
SHA-1 hash of the IP address concatenated onto a secret that changes
every five minutes and tokens up to ten minutes old are accepted.</p>
<h2 id="routing-table">Routing Table<a hidden class="anchor" aria-hidden="true" href="#routing-table">#</a></h2>
<p>Every node maintains a routing table of known good nodes. We use the
routing table starting points for queries in the DHT. We return nodes
from the routing table in response to queries from other nodes.</p>
<p>Not all nodes we learn about are equal. Some are &ldquo;good&rdquo; and some are
not. Many nodes using the DHT can send queries and receive responses,
but cannot respond to queries from other nodes. Each node&rsquo;s routing
table must contain only known good nodes.</p>
<p>A good node is a node has responded to one of our queries within the
last 15 minutes. A node is also good if it has ever responded to our
queries and has sent us a query within the last 15 minutes. After 15
minutes of inactivity, a node becomes questionable. Nodes become bad
when they fail to respond to multiple queries in a row. Nodes that we
see are good are given priority over nodes with an unknown status.
<img src="76.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} The routing
table covers the entire node ID space from 0 to $2^160$. We subdivide
the routing table into &ldquo;buckets&rdquo; that each cover a portion of the space.</p>
<p>An empty table has one bucket with an ID space range of min=0,
max=$2^160$.</p>
<p>An empty table has only one bucket so any node must fit within it. Each
bucket can only hold K nodes, currently eight, before becoming &ldquo;full.&rdquo;</p>
<p>When a bucket is full of known good nodes, we may add no more nodes
unless our node ID falls within the range of the bucket. The bucket is
replaced by two buckets each with half of the old bucket. Nodes from the
old bucket are distributed among the new buckets.</p>
<p>For a new table with only one bucket, we always split the full bucket
into two new buckets covering the ranges 0..$2^159$ and $2^159..2^160$.</p>
<p>When the bucket is full of good nodes, we simply discard the new node.
When nodes in the bucket become bad (if they do) we replace them with a
new node.</p>
<p>When nodes are considered questionable and haven&rsquo;t been since, in the
last 15 minutes, the least recently seen node is pinged. The node either
responds or doesn&rsquo;t respond. A response means we move to the next node.
We do this until we find a node that fails to respond. If we don&rsquo;t find
any, then the bucket is considered good.</p>
<p>When we do find one, we try one more time before discarding the node and
replacing them with a new good node.</p>
<p>Each bucket should maintain a &ldquo;last changed&rdquo; property to show how
&ldquo;fresh&rdquo; the contents are.</p>
<p>When a node in a bucket is pinged and responds, or a node is added to a
bucket, or a node is replaced with another node, the bucket&rsquo;s last
changed property is updated.</p>
<p>Buckets are refreshed if the last changed property has not been updated
in the last 15 minutes.</p>
<h2 id="attacks-on-bittorrent">Attacks on BitTorrent<a hidden class="anchor" aria-hidden="true" href="#attacks-on-bittorrent">#</a></h2>
<p>Few attacks on the BitTorrent network exist. Everything is public. Our
IP address, what we&rsquo;re downloading - everything. Why attack an open
network?</p>
<p>Why attack a completely open network?</p>
<p>Only 7 entries are listed on Exploit-DB - a database of known exploits
against a service. And most of them relate to specific clients.</p>
<p>The principal attack on the BitTorrent network is to stop piracy. We&rsquo;ve
gone this far without talking about piracy, but it is often synonymous
with BitTorrent.</p>
<p>The main attack on BitTorrent is Torrent Poisoning. This attack aims to
get the IP addresses of peers pirating content or to poison the content
in some way.</p>
<p>Madonna&rsquo;s American Life album release is an example of content
poisoning. Before the release, tracks were released of similar length
and file size. The tracks featured a clip of Madonna saying:</p>
<blockquote>
<p>&quot;What the fuck do you think you&rsquo;re doing?&quot;</p>
</blockquote>
<p>Followed by a few minutes of silence.</p>
<p>Here are some methods of poisoning a torrent:</p>
<ul>
<li>
<p>Index Poisoning The index allows users to locate the IP addresses of
peers with the desired content. This method of attack makes
searching for peers difficult.</p>
<p>The attacker inserts a large amount of invalid information into the
index to prevent users from finding the correct information.</p>
<p>The idea is to slow down the download, by having the peer try to
download pieces from an invalid peer.</p>
</li>
<li>
<p>Decoy Insertion They insert corrupted versions of a file into the
network.</p>
<p>Imagine 500 copies of a file and only 2 of them being the real file,
this deters pirates from finding the real file.</p>
<p>Most websites with lists of torrents a voting system. This deters
this attack, as the top of searches is filled with non-corrupted
files However, most websites with lists of torrents a voting</p>
<p>This deters this attack, as the top of searches is filled with
non-corrupted files.</p>
<p>In GameDevTycoon, the file was released before the initial upload to
piracy sites. Unbeknownst to pirates, the file was corrupted.
Winning the game is impossible in the pirated version. Everything
else was perfect.</p>
</li>
</ul>
<h3 id="defence-against-the-dark-bittorrent-attack">Defence Against the Dark Bittorrent Attack<a hidden class="anchor" aria-hidden="true" href="#defence-against-the-dark-bittorrent-attack">#</a></h3>
<p>Most popular torrents are released by individuals or groups who built up
a rapport over many years. On private trackers, individuals can be
pointed to. Poisoned torrents are quickly labelled and the poster can be
banned.</p>
<p>Or, on public trackers, downloading torrents made by trusted groups is
preferable. After all, would you prefer to download Ubuntu from the
Ubuntu team, or the user xxx-HACKER-ELITE-GHOST-PROTOCOL-xxx?</p>
<p>On public trackers, if a torrent is poisoned the torrent is reported and
removed.</p>
<p>The simplest way to defend against a BitTorrent attack is to use an IP
address not associated with you. Whether this is through a VPN or some
other service.</p>
<h2 id="conclusion-1">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion-1">#</a></h2>
<p>And we are done with BitTorrent! Here are some things you may choose to
do:</p>
<ul>
<li>
<p>Build your own BitTorrent client</p>
</li>
<li>
<p>Explore BitTorrent&rsquo;s proposals (BEPs) to learn more about how it
works, and what&rsquo;s next for the algorithm</p>
</li>
<li>
<p>Read the official BitTorrent specification</p>
</li>
</ul>
<h1 id="designing-effective-peer-to-peer-networks">Designing Effective Peer to Peer Networks<a hidden class="anchor" aria-hidden="true" href="#designing-effective-peer-to-peer-networks">#</a></h1>
<p>By the end of the chapter, we should have a good understanding of the
important questions to answer when designing effective P2P networks.</p>
<h2 id="when-should-i-use-a-peer-to-peer-network">When Should I Use a Peer to Peer Network?<a hidden class="anchor" aria-hidden="true" href="#when-should-i-use-a-peer-to-peer-network">#</a></h2>
<p>P2P networks can be used for all networking. We need to use the right
tool for the job.</p>
<p>Quickly and automatic scaling is their game. P2P networks enhance with
more users, not degrade.</p>
<p>If we are building a platform with a shared goal (i.e. shares files) and
we can imagine the platform growing uncontrollably big, P2P networks are
good.</p>
<p>Or if we do not want anyone to shut down our network (in a client-server
model, turn off your servers) a P2P network is effective.</p>
<p>There are 2 types of P2P Networks:</p>
<ol>
<li>Full P2P networks</li>
</ol>
<p>These are networks where everyone node is equal.</p>
<ol>
<li>Full P2P networks</li>
</ol>
<p>Certain nodes have more power than others.</p>
<p>Let&rsquo;s walk through what all good peer to peer networks share.</p>
<h2 id="rewards">Rewards<a hidden class="anchor" aria-hidden="true" href="#rewards">#</a></h2>
<p>All great peer to peer networks have reward systems. The user does some
work, and they are rewarded.</p>
<p>Even if the reward isn&rsquo;t clearly defined, there is always a reward for
taking part in the peer to peer network. And always a reward for giving
back to the network.</p>
<p>Rewards are paramount to P2P networks and my favourite thing to talk
about!</p>
<p>In Bitcoin, this is earning Bitcoin. BitTorrent rewards participants
with faster download speeds. Tor rewards other Tor members with more
privacy.</p>
<p>All of these rewards are given for contributing to the network.</p>
<p>The idea of a reward is to eliminate free-riders who partake in the
network without giving anything back. There are 2 ways to discourage
free-riders:</p>
<ol>
<li>
<p>Forcing every user to give back.</p>
</li>
<li>
<p>Rewarding users who give back.</p>
</li>
</ol>
<p>Tor is the former. The only reward that can be given is to become a
guard node, which provides no obvious benefit for the user other than to
feel good about themselves.</p>
<p>The latter is what most peer to peer networks use, rewarding users who
give back.</p>
<p>In BitTorrent, those who seed (upload) are rewarded with higher download
rates. The more you seed, the faster you can download.</p>
<p>In Bitcoin, users are rewarded for mining the blockchain with Bitcoin.</p>
<p>This leads us to look at peer to peer networks from 2 interesting
perspectives. Human civilisations, or reinforcement learning machines.</p>
<p>Let&rsquo;s start with human civilisations.</p>
<h2 id="human-civilisations">Human Civilisations<a hidden class="anchor" aria-hidden="true" href="#human-civilisations">#</a></h2>
<p>We do work, and we get rewarded. Capitalism. In semi P2P networks (where
one node has more power than the others) we can almost perfectly
replicate capitalism.</p>
<p>If we force everyone to do the same work for the same reward then it is
communism.</p>
<p>Luxury communism uses machines to do the heavy lifting leaving humans to
do other things and is a new 21st-century take. This more closely
relates to P2P networks than traditional communism.</p>
<p>As P2P networks grow, eventually if not governed properly it will fall
back into an client-server architecture. Why use Jim&rsquo;s computer to
download ubuntu.iso when you can download it from LargeCorp which has a
much faster speed.</p>
<p>With planning, we can build a dictatorship of the proletariat where
every ordinary node has power in the network. Not just those with higher
rewards.</p>
<p>There will always be those with more power than others (perhaps they
have more computers on the network) but the point is that everyone has
some power over the network.</p>
<p>And the ordinary nodes will likely always have more power than larger
clusters of nodes, as seen in Bitcoin.</p>
<p>Modelling P2P networks as political movements allows us to talk about
P2P networks as more than just networks, as entire communities.</p>
<p>Eventually people with little to no knowledge about networking can
discuss and change how the network operates using these abstractions.</p>
<h2 id="reinforcement-learning">Reinforcement Learning<a hidden class="anchor" aria-hidden="true" href="#reinforcement-learning">#</a></h2>
<p>We can use artificial intelligence to automatically optimise a P2P
network. Humans are slow when it comes to making changes compared to
computers.</p>
<p>P2P networks already use technology to find the shortest routes or
preferred routes. As networks become more and more complicated, simple
handwritten algorithms might not be enough.</p>
<p>Picture this nifty example.</p>
<p>In our network, we have multiple nodes all interconnected. Each node has
a rating.</p>
<p>This rating signifies how good that node is. A good rating based on how
much reward an individual has. Whether that reward is from speed,
accuracy or trust is problem dependant.</p>
<p>Every time this node is used, its personal reward is increased. Much
like Kohonen&rsquo;s competitive learning rules.</p>
<p>But why stop there? If the node is faster, trustworthy, contributes
heavily to the network it should have a higher reward rating.</p>
<p>And our goal is to create the &quot;best&quot; path across the network, taking
into account all of these numbers and to maximise our reward, whatever
that may be.</p>
<p>Tor already has a similar (albeit smaller) system in place like this.
Guard nodes, bridge nodes, and more.</p>
<p>This seems like the perfect scenario for reinforcement learning.
Multiple inputs to maximise our reward. Exploratory choices, meaning
that a node with a &quot;bad&quot; reating is chosen, preventing some nodes from
hogging all the resources.</p>
<p>Reinforcement learning is the closet computer learning to how humans
learn according to Sutton and Barto.</p>
<p>Humans will eventually optimise manually. Where good nodes have better
jobs or are chosen more than others. Reinforcement learning is much
faster than any human could be.</p>
<p>We, as humans, naturally and manually improve the network over time.
What if we could use AI to speed this process up?</p>
<h2 id="optimisation-of-the-network">Optimisation of the Network<a hidden class="anchor" aria-hidden="true" href="#optimisation-of-the-network">#</a></h2>
<p>An ideal P2P network will improve the more people that use it.</p>
<p>In Tor, the more people that use it the more privacy is given. I talk
more about this in my Tor blog post.</p>
<p>A simple distinction, but one that must be made. As the network grows
older, ideally, <strong>it reaches its global optimised state.</strong></p>
<p>Unlike client-server, where the more users there are the harder it
becomes to maintain the network.
<img src="image-4.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;} Take the
example of downloading a file. Client-Server starts out being incredibly
fast, but over time as the file becomes more popular that download speed
degrades. <img src="image-3.png" alt="image">{width=&rdquo;\textwidth&rdquo; height=&rdquo;\textheight&rdquo;}
With a P2P network, at the start it is slow to download (assuming the
initial uploader is slow) but the speed increases over time. What&rsquo;s
important is that over ttime, client-server gets worse with more users
but P2P gets better.</p>
<p>Optimisation of the network as it grows is often done through the
rewards system.</p>
<p>As Tor grows, the privacy of each user increases. Thus, the more that
use Tor, the better the privacy.</p>
<p>Each user has their personal reward, but together this creates a
positive reward for the whole network.</p>
<p>In Bitcoin, the more that mine Bitcoin, the harder it is to mine, and
the larger incentive it is to use better computers. Better computers =
faster mines = more money.</p>
<p>This creates competition amongst users. <strong>Who can contribute to the
network the most?</strong> Users are fighting for their own personal reward,
but this fight improves the network as a whole.</p>
<p>It is almost impossible to perform a 51 percent attack on the network
when miners are hyper-competitive like this.</p>
<p><strong>Users work towards their own personal rewards, which means the network
gets better from not only more users but better rewards.</strong> The entire
network scales majestically upward.</p>
<p>When choosing a reward, it is important to look at the local rewards
(what the user gets) and to look at the greater rewards (what the
network will get for participating).</p>
<p>I also recommend rewards which increase as the network grows. Scalable
rewards. If the price of Bitcoin did not scale with how many users it
had, the network degrades or upgrades much slower over time.</p>
<h2 id="humble-beginnings">Humble Beginnings<a hidden class="anchor" aria-hidden="true" href="#humble-beginnings">#</a></h2>
<p>With a client-server architecture, it can be amazing from the start. But
with a peer to peer network, it sucks for the first few users.</p>
<p>With Bitcoin, what was the incentive? You get this worth coin.&hellip;
nothing at all.</p>
<p>Tor. The incentive? Well, if there are only 3 users then there is no
incentive. No privacy. 51 percent attacks is a matter of whether someone
loses WiFi on the train or not.</p>
<p>BitTorrent. The incentive? You can download this one person&rsquo;s files.</p>
<p>In peer to peer networks, generally, they suck for the first couple
users and are only worthwhile over time.</p>
<p>So how then, do we build an effective peer to peer network that other
people will want to use?</p>
<p>There are 2 methods to this.</p>
<ol>
<li>Forceful use</li>
</ol>
<p>We can force users to use the network. This is how Tor got its start.
The US Naval Resarch Labs built Tor, and effectively they could force
others in the Navy to use it.</p>
<ol>
<li>Incredible technology</li>
</ol>
<p>The other option is incredible technology. In a peer to peer network,
the first few users are often those who recognise how incredible the
technology is.</p>
<p>Think about Bitcoin. The first few users fell in love with the
technology behind it, and truly believed it could one day be great.</p>
<p>With a great rewards system in place, the first users of Bitcoin
realised it could grow up to be something huge. <strong>Amazing technology
attracts the first few users, and those users are often technologically
minded.</strong></p>
<h2 id="jobs-for-the-people">Jobs for the People<a hidden class="anchor" aria-hidden="true" href="#jobs-for-the-people">#</a></h2>
<p>In almost all peer to peer networks, jobs are assigned to nodes.</p>
<p>In Bitcoin, we have miners whose job it is to mine the blockchain.</p>
<p>In Tor, we have guard nodes.</p>
<p>If a node has proven to be trustworthy than we shall make it a guard
node. If a node wants to mine the blockchain, it becomes a miner.</p>
<p>These nodes do not have more rights than the other nodes, they simply
have a job to do. And sometimes this job provides a reward, and
sometimes it doesn&rsquo;t.</p>
<p>If we give everyone the same job, the network will tend towards global
optimisation much slower.</p>
<p>Let&rsquo;s say we have a new file-sharing system. Our system will let you
download files from others.</p>
<p>We have a file, Ubuntu.iso, which is being seeded by 10 people.</p>
<p>We choose at randomly a seed to download from. This seed has an upload
speed of 1 Mbps while all the other seeders have an upload speed of
200mbps.</p>
<p>It makes logical sense to use the uploaders with faster speed.</p>
<p>It makes sense logically to choose from a subsection of people with high
upload speeds. Effectively, we have given these people &lsquo;jobs&rsquo;.</p>
<p>There are 2 types of jobs in peer to peer networks:</p>
<ol>
<li>
<p>Rewarded Jobs</p>
</li>
<li>
<p>Unpaid Internships (jobs)</p>
</li>
</ol>
<p>With rewarded jobs, the uploaders get a higher reward for working. This
reward might be faster download speeds, such as in BitTorrent.</p>
<p>With unpaid jobs, there is no reward. There is no incentive for one to
choose a job, it is gifted to those. This is how guard nodes work in
Tor.</p>
<p>If we have a job which peopl have to opt-in to, but doesn&rsquo;t provide a
reward it is unlikely for many people to opt-in.</p>
<p>Deciding on what jobs to give, and whether it is rewarded or not is
problem specific.</p>
<p>For example, we have a job called &quot;maintainer of the Blockchain&quot;. This
job means people have a copy of the blockchain and maintains it. And
only they do, no one else can. Any cryptocurrency nerd reading this may
already see the problem.</p>
<p>To view the blockchain, you need to have this job. But not every citizen
of the world has a spare 300gb to view the chain. They cannot get the
job, because they do not meet the required specification.</p>
<p>You also have to meet a plethora of other specifications. Most of them a
normal home user cannot achieve.</p>
<p>This is another issue. Can we reject people if they do not meet the job
specification? Again, problem specific.</p>
<p>With only a small per cent controlling the blockchain, it leaves it open
to a 51</p>
<p>I propose that jobs are automatically assigned based on the
specification of the user, but any user can request a job.</p>
<p>The only jobs they should be rejected for is high trust jobs, such as
guard nodes. But, the specification of their computer should not be
taken into account for trust jobs.</p>
<p>Humans picking jobs are too slow. The network needs to react fast and
scale fast. Humans are not fast. So automatic assignment it is.</p>
<p>But we do not want to prevent humans from accessing resources because of
their circumstances.</p>
<p>When assigning jobs, the jobs must work in harmony.</p>
<p>We should take inspiration from beehives or ant colonies for this. Human
jobs are simply too hard to model, to focus on a much smaller example is
wise.</p>
<p>Should there be a punishment if someone takes a job for which they are
unfit? Should a 30gb computer take the punishment for trying to maintain
a 300gb file?</p>
<p>On the one hand, only a very small per cent of the population will
ignore the assigned job and choose something for which they are unfit.</p>
<p>But, to achieve global optimisation we must make sure every single thing
is accounted for.</p>
<p>Unfortunately, in this world, those that do jobs that they are not
capable of should be punished. I would <strong>not say to reduce the resources
available to them through the job</strong>, but perhaps <strong>reduce the reward of
using the network in some way.</strong></p>
<h2 id="data-structures">Data Structures<a hidden class="anchor" aria-hidden="true" href="#data-structures">#</a></h2>
<p>Every single effective peer to peer network uses data structures.</p>
<p>The blockchain is just a fancy linked list with some extra properties.</p>
<p>BitTorrent&rsquo;s magnet links work based on distributed hash tables.</p>
<p>Data structures are vital to peer to peer networks. I do not want to get
into every data structure available, but knowledge of them is important.</p>
<p>We can design a network using a distributed data structure that already
exists, or we can build a new data structure/algorithm based on
pre-existing ones.</p>
<h2 id="policy-changes">Policy Changes<a hidden class="anchor" aria-hidden="true" href="#policy-changes">#</a></h2>
<p>Throughout this article, I have talked about designing the network to be
perfect from the get-go. Anyone knows this isn&rsquo;t possible. So how then,
do we change the network when it&rsquo;s already running? How do we implement
policy changes?</p>
<ul>
<li>
<p>Dictatorship</p>
</li>
<li>
<p>Let the people decide</p>
</li>
<li>
<p>The people can form a democracy</p>
</li>
</ul>
<p>In our first instance, we have a dictatorship.</p>
<p>You, the creator decides on changes. You create these changes, and they
go out to the network. We don&rsquo;t care what the participants think, only
that the change has taken place.</p>
<p>This is the most effective for easily implementing policy changes, but
it ruins the trust.</p>
<p>Good peer to peer networks reduces trust. We should not need to trust
anyone. However, trust is important in some networks. It depends on the
network itself.</p>
<p>If the network was for a digital currency, why would you trust this
entire currency in the hands of a single person?</p>
<p>But for a privacy centred network, having this trust in one person or
body of people can increase the trust throughout the network. It reduces
the chance of a 51</p>
<p>As the network progresses, it strays further and further away from a 51</p>
<p>In the early days of a P2P network, it is very much a dictatorship. A
few small people decide on changes to the network (think of the early
days of Bitcoin) and this eventually moves towards democracy as the
network grows.</p>
<p>But again, this brings problems. What if there is a critical failure in
the code and there needs to be a change made during the networks
primetime? This is for the designer to decide.</p>
<p>We can alternatively let the people decide.</p>
<p>From the get-go, no single person has full control. Every time a change
is made, a percent of the network (likely 51) will need to agree to the
change. Complete control for the network. No trusting the developer
involved.</p>
<p>At the start, this may be problematic. What if we have a node in the
network purely from FOMO and doesn&rsquo;t care about updates?</p>
<p>Humans are incredibly slow too. Imagine a critical bug in the code that
had to be fixed right there and then. Humans may take weeks to decide.
Many will not even respond to the decision.</p>
<p>The alternative is a democracy.</p>
<p>Give certain people more power than others. Have the community vote in
leaders, or have the leaders be pre-selected.</p>
<p>These leaders then decide on changes to the codebase. This reduces
trust, especially if they are voted in.</p>
<p>But nothing is stopping them from teaming together to get the maximum
personal reward while not doing anything for the many.</p>
<p>All in all, deciding on policy changes is a tricky subject. And one that
should be decided before the network is made.</p>
<p>Although something to remember is trust. Will the users need to trust
you, personally?</p>
<p>If so, try and work towards a goal where that trust is reduced.
Diversify that trust over to others. Remove trust completely, make them
only trust themselves.</p>
<p>Effective peer to peer networks is unlike client-server models where one
person controls all the power. Effective P2P networks are for the
people.</p>
<h2 id="the-cathedral-or-the-bazaar">The Cathedral or the Bazaar<a hidden class="anchor" aria-hidden="true" href="#the-cathedral-or-the-bazaar">#</a></h2>
<p>The Cathedral is waterfall development. Slow, well planned. The people
working on it are cathedral builders. The final product is presented and
sold to the public as the final product.</p>
<p>The Bazaar is the opposite. Work fast. Break things. Release early.
Release often. Listen to your customers.</p>
<p>When building a full P2P network, we would build both the cathedral and
the bazaar.</p>
<p>In an ideal full P2P network, eventually, the creator&rsquo;s power dwindles
to almost nothing (they become just another normal node in the network).</p>
<p>This is what Satoshi Nakamoto did. They created the cathedral first, and
then over time moved to the bazaar - eventually losing all power to
change anything in the network without the permission of the network.</p>
<p>Our P2P network could explode on day 1 and we would have no control to
finish building the cathedral.</p>
<p>For this reason, in a full P2P network where all nodes are equal, we
should build a cathedral and then transition naturally to a bazaar.</p>
<p>In semi P2P network where some nodes have more power than others, the
developer doesn&rsquo;t have to give up their child anytime soon.</p>
<p>However, this requires the nodes to trust the developers. Something that
not all P2P networks have the liberty of.</p>
<h2 id="open-source-or-not">Open Source or Not?<a hidden class="anchor" aria-hidden="true" href="#open-source-or-not">#</a></h2>
<p>The main thing in P2P networks is removing trust. We don&rsquo;t necessarily
want people to trust us when building a network, preferably we would
want to remove as much trust as possible.</p>
<p>Closed source systems do not instil much trust, therefore we must choose
an open-source system.</p>
<h1 id="conclusion-2">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion-2">#</a></h1>

</div>
  <footer class="post-footer">



<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Peer 2 Peer Networks on twitter"
        href="https://twitter.com/intent/tweet/?text=Peer%202%20Peer%20Networks&amp;url=https%3a%2f%2fpolymath.cloud%2fp2p-book%2f&amp;hashtags=">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Peer 2 Peer Networks on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fpolymath.cloud%2fp2p-book%2f&amp;title=Peer%202%20Peer%20Networks&amp;summary=Peer%202%20Peer%20Networks&amp;source=https%3a%2f%2fpolymath.cloud%2fp2p-book%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Peer 2 Peer Networks on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fpolymath.cloud%2fp2p-book%2f&title=Peer%202%20Peer%20Networks">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Peer 2 Peer Networks on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fpolymath.cloud%2fp2p-book%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Peer 2 Peer Networks on whatsapp"
        href="https://api.whatsapp.com/send?text=Peer%202%20Peer%20Networks%20-%20https%3a%2f%2fpolymath.cloud%2fp2p-book%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Peer 2 Peer Networks on telegram"
        href="https://telegram.me/share/url?text=Peer%202%20Peer%20Networks&amp;url=https%3a%2f%2fpolymath.cloud%2fp2p-book%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>

  
  <br>
  <script src="https://f.convertkit.com/ckjs/ck.5.js"></script>
  <form action="https://app.convertkit.com/forms/1896338/subscriptions" class="seva-form formkit-form" method="post" data-sv-form="1896338" data-uid="9d5f55b5a0" data-format="inline" data-version="5" data-options="{&quot;settings&quot;:{&quot;after_subscribe&quot;:{&quot;action&quot;:&quot;message&quot;,&quot;success_message&quot;:&quot;Success! Now check your email to confirm your subscription.&quot;,&quot;redirect_url&quot;:&quot;&quot;},&quot;analytics&quot;:{&quot;google&quot;:null,&quot;facebook&quot;:null,&quot;segment&quot;:null,&quot;pinterest&quot;:null,&quot;sparkloop&quot;:null,&quot;googletagmanager&quot;:null},&quot;modal&quot;:{&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;powered_by&quot;:{&quot;show&quot;:true,&quot;url&quot;:&quot;https://convertkit.com?utm_source=dynamic&amp;utm_medium=referral&amp;utm_campaign=poweredby&amp;utm_content=form&quot;},&quot;recaptcha&quot;:{&quot;enabled&quot;:false},&quot;return_visitor&quot;:{&quot;action&quot;:&quot;show&quot;,&quot;custom_content&quot;:&quot;&quot;},&quot;slide_in&quot;:{&quot;display_in&quot;:&quot;bottom_right&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;sticky_bar&quot;:{&quot;display_in&quot;:&quot;top&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15}},&quot;version&quot;:&quot;5&quot;}" min-width="400 500 600 700 800" style="background-color: rgb(249, 250, 251); border-radius: 4px;"><div class="formkit-background" style="opacity: 0.2;"></div><div data-style="minimal"><div class="formkit-header" data-element="header" style="color: rgb(77, 77, 77); font-size: 27px; font-weight: 700;"><h1>Join the Newsletter</h1></div><div class="formkit-subheader" data-element="subheader" style="color: rgb(104, 104, 104); font-size: 18px;">Subscribe to get our latest content by email.</div><ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul><div data-element="fields" data-stacked="false" class="seva-fields formkit-fields"><div class="formkit-field"><input class="formkit-input" name="email_address" aria-label="Email Address" placeholder="Email Address" required="" type="email" style="color: rgb(0, 0, 0); border-color: rgb(227, 227, 227); border-radius: 4px; font-weight: 400;"></div><button data-element="submit" class="formkit-submit formkit-submit" style="color: rgb(255, 255, 255); background-color: rgb(22, 119, 190); border-radius: 4px; font-weight: 400;"><div class="formkit-spinner"><div></div><div></div><div></div></div><span class="">Subscribe</span></button></div><div class="formkit-guarantee" data-element="guarantee" style="color: rgb(77, 77, 77); font-size: 13px; font-weight: 400;">We won't send you spam. Unsubscribe at any time.</div><div class="formkit-powered-by-convertkit-container"><a href="https://convertkit.com?utm_source=dynamic&amp;utm_medium=referral&amp;utm_campaign=poweredby&amp;utm_content=form" data-element="powered-by" class="formkit-powered-by-convertkit" data-variant="dark" target="_blank" rel="noopener noreferrer">Built with ConvertKit</a></div></div><style>.formkit-form[data-uid="9d5f55b5a0"] *{box-sizing:border-box;}.formkit-form[data-uid="9d5f55b5a0"]{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.formkit-form[data-uid="9d5f55b5a0"] legend{border:none;font-size:inherit;margin-bottom:10px;padding:0;position:relative;display:table;}.formkit-form[data-uid="9d5f55b5a0"] fieldset{border:0;padding:0.01em 0 0 0;margin:0;min-width:0;}.formkit-form[data-uid="9d5f55b5a0"] body:not(:-moz-handler-blocked) fieldset{display:table-cell;}.formkit-form[data-uid="9d5f55b5a0"] h1,.formkit-form[data-uid="9d5f55b5a0"] h2,.formkit-form[data-uid="9d5f55b5a0"] h3,.formkit-form[data-uid="9d5f55b5a0"] h4,.formkit-form[data-uid="9d5f55b5a0"] h5,.formkit-form[data-uid="9d5f55b5a0"] h6{color:inherit;font-size:inherit;font-weight:inherit;}.formkit-form[data-uid="9d5f55b5a0"] p{color:inherit;font-size:inherit;font-weight:inherit;}.formkit-form[data-uid="9d5f55b5a0"] ol:not([template-default]),.formkit-form[data-uid="9d5f55b5a0"] ul:not([template-default]),.formkit-form[data-uid="9d5f55b5a0"] blockquote:not([template-default]){text-align:left;}.formkit-form[data-uid="9d5f55b5a0"] p:not([template-default]),.formkit-form[data-uid="9d5f55b5a0"] hr:not([template-default]),.formkit-form[data-uid="9d5f55b5a0"] blockquote:not([template-default]),.formkit-form[data-uid="9d5f55b5a0"] ol:not([template-default]),.formkit-form[data-uid="9d5f55b5a0"] ul:not([template-default]){color:inherit;font-style:initial;}.formkit-form[data-uid="9d5f55b5a0"] .ordered-list,.formkit-form[data-uid="9d5f55b5a0"] .unordered-list{list-style-position:outside !important;padding-left:1em;}.formkit-form[data-uid="9d5f55b5a0"] .list-item{padding-left:0;}.formkit-form[data-uid="9d5f55b5a0"][data-format="modal"]{display:none;}.formkit-form[data-uid="9d5f55b5a0"][data-format="slide in"]{display:none;}.formkit-form[data-uid="9d5f55b5a0"][data-format="sticky bar"]{display:none;}.formkit-sticky-bar .formkit-form[data-uid="9d5f55b5a0"][data-format="sticky bar"]{display:block;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-input,.formkit-form[data-uid="9d5f55b5a0"] .formkit-select,.formkit-form[data-uid="9d5f55b5a0"] .formkit-checkboxes{width:100%;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-button,.formkit-form[data-uid="9d5f55b5a0"] .formkit-submit{border:0;border-radius:5px;color:#ffffff;cursor:pointer;display:inline-block;text-align:center;font-size:15px;font-weight:500;cursor:pointer;margin-bottom:15px;overflow:hidden;padding:0;position:relative;vertical-align:middle;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-button:hover,.formkit-form[data-uid="9d5f55b5a0"] .formkit-submit:hover,.formkit-form[data-uid="9d5f55b5a0"] .formkit-button:focus,.formkit-form[data-uid="9d5f55b5a0"] .formkit-submit:focus{outline:none;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-button:hover > span,.formkit-form[data-uid="9d5f55b5a0"] .formkit-submit:hover > span,.formkit-form[data-uid="9d5f55b5a0"] .formkit-button:focus > span,.formkit-form[data-uid="9d5f55b5a0"] .formkit-submit:focus > span{background-color:rgba(0,0,0,0.1);}.formkit-form[data-uid="9d5f55b5a0"] .formkit-button > span,.formkit-form[data-uid="9d5f55b5a0"] .formkit-submit > span{display:block;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;padding:12px 24px;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-input{background:#ffffff;font-size:15px;padding:12px;border:1px solid #e3e3e3;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;line-height:1.4;margin:0;-webkit-transition:border-color ease-out 300ms;transition:border-color ease-out 300ms;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-input:focus{outline:none;border-color:#1677be;-webkit-transition:border-color ease 300ms;transition:border-color ease 300ms;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-input::-webkit-input-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-input::-moz-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-input:-ms-input-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-input::placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="dropdown"]{position:relative;display:inline-block;width:100%;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="dropdown"]::before{content:"";top:calc(50% - 2.5px);right:10px;position:absolute;pointer-events:none;border-color:#4f4f4f transparent transparent transparent;border-style:solid;border-width:6px 6px 0 6px;height:0;width:0;z-index:999;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="dropdown"] select{height:auto;width:100%;cursor:pointer;color:#333333;line-height:1.4;margin-bottom:0;padding:0 6px;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:15px;padding:12px;padding-right:25px;border:1px solid #e3e3e3;background:#ffffff;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="dropdown"] select:focus{outline:none;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"]{text-align:left;margin:0;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"]{margin-bottom:10px;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"] *{cursor:pointer;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"]:last-of-type{margin-bottom:0;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]{display:none;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"] + label::after{content:none;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]:checked + label::after{border-color:#ffffff;content:"";}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]:checked + label::before{background:#10bf7a;border-color:#10bf7a;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"] label{position:relative;display:inline-block;padding-left:28px;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"] label::before,.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"] label::after{position:absolute;content:"";display:inline-block;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"] label::before{height:16px;width:16px;border:1px solid #e3e3e3;background:#ffffff;left:0px;top:3px;}.formkit-form[data-uid="9d5f55b5a0"] [data-group="checkboxes"] [data-group="checkbox"] label::after{height:4px;width:8px;border-left:2px solid #4d4d4d;border-bottom:2px solid #4d4d4d;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);left:4px;top:8px;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-alert{background:#f9fafb;border:1px solid #e3e3e3;border-radius:5px;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;list-style:none;margin:25px auto;padding:12px;text-align:center;width:100%;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-alert:empty{display:none;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-alert-success{background:#d3fbeb;border-color:#10bf7a;color:#0c905c;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-alert-error{background:#fde8e2;border-color:#f2643b;color:#ea4110;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-spinner{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:0px;width:0px;margin:0 auto;position:absolute;top:0;left:0;right:0;width:0px;overflow:hidden;text-align:center;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-spinner > div{margin:auto;width:12px;height:12px;background-color:#fff;opacity:0.3;border-radius:100%;display:inline-block;-webkit-animation:formkit-bouncedelay-formkit-form-data-uid-9d5f55b5a0- 1.4s infinite ease-in-out both;animation:formkit-bouncedelay-formkit-form-data-uid-9d5f55b5a0- 1.4s infinite ease-in-out both;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-spinner > div:nth-child(1){-webkit-animation-delay:-0.32s;animation-delay:-0.32s;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-spinner > div:nth-child(2){-webkit-animation-delay:-0.16s;animation-delay:-0.16s;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-submit[data-active] .formkit-spinner{opacity:1;height:100%;width:50px;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-submit[data-active] .formkit-spinner ~ span{opacity:0;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-powered-by[data-active="false"]{opacity:0.35;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-powered-by-convertkit-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;z-index:5;margin:10px 0;position:relative;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-powered-by-convertkit-container[data-active="false"]{opacity:0.35;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-powered-by-convertkit{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#ffffff;border:1px solid #dce1e5;border-radius:4px;color:#373f45;cursor:pointer;display:block;height:36px;margin:0 auto;opacity:0.95;padding:0;-webkit-text-decoration:none;text-decoration:none;text-indent:100%;-webkit-transition:ease-in-out all 200ms;transition:ease-in-out all 200ms;white-space:nowrap;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:190px;background-repeat:no-repeat;background-position:center;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg width='162' height='20' viewBox='0 0 162 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M83.0561 15.2457C86.675 15.2457 89.4722 12.5154 89.4722 9.14749C89.4722 5.99211 86.8443 4.06563 85.1038 4.06563C82.6801 4.06563 80.7373 5.76407 80.4605 8.28551C80.4092 8.75244 80.0387 9.14403 79.5686 9.14069C78.7871 9.13509 77.6507 9.12841 76.9314 9.13092C76.6217 9.13199 76.3658 8.88106 76.381 8.57196C76.4895 6.38513 77.2218 4.3404 78.618 2.76974C80.1695 1.02445 82.4289 0 85.1038 0C89.5979 0 93.8406 4.07791 93.8406 9.14749C93.8406 14.7608 89.1832 19.3113 83.1517 19.3113C78.8502 19.3113 74.5179 16.5041 73.0053 12.5795C72.9999 12.565 72.9986 12.5492 73.0015 12.534C73.0218 12.4179 73.0617 12.3118 73.1011 12.2074C73.1583 12.0555 73.2143 11.907 73.2062 11.7359L73.18 11.1892C73.174 11.0569 73.2075 10.9258 73.2764 10.8127C73.3452 10.6995 73.4463 10.6094 73.5666 10.554L73.7852 10.4523C73.9077 10.3957 74.0148 10.3105 74.0976 10.204C74.1803 10.0974 74.2363 9.97252 74.2608 9.83983C74.3341 9.43894 74.6865 9.14749 75.0979 9.14749C75.7404 9.14749 76.299 9.57412 76.5088 10.1806C77.5188 13.1 79.1245 15.2457 83.0561 15.2457Z' fill='%23373F45'/%3E%3Cpath d='M155.758 6.91365C155.028 6.91365 154.804 6.47916 154.804 5.98857C154.804 5.46997 154.986 5.06348 155.758 5.06348C156.53 5.06348 156.712 5.46997 156.712 5.98857C156.712 6.47905 156.516 6.91365 155.758 6.91365ZM142.441 12.9304V9.32833L141.415 9.32323V8.90392C141.415 8.44719 141.786 8.07758 142.244 8.07986L142.441 8.08095V6.55306L144.082 6.09057V8.08073H145.569V8.50416C145.569 8.61242 145.548 8.71961 145.506 8.81961C145.465 8.91961 145.404 9.01047 145.328 9.08699C145.251 9.16351 145.16 9.2242 145.06 9.26559C144.96 9.30698 144.853 9.32826 144.745 9.32822H144.082V12.7201C144.082 13.2423 144.378 13.4256 144.76 13.4887C145.209 13.5629 145.583 13.888 145.583 14.343V14.9626C144.029 14.9626 142.441 14.8942 142.441 12.9304Z' fill='%23373F45'/%3E%3Cpath d='M110.058 7.92554C108.417 7.88344 106.396 8.92062 106.396 11.5137C106.396 14.0646 108.417 15.0738 110.058 15.0318C111.742 15.0738 113.748 14.0646 113.748 11.5137C113.748 8.92062 111.742 7.88344 110.058 7.92554ZM110.07 13.7586C108.878 13.7586 108.032 12.8905 108.032 11.461C108.032 10.1013 108.878 9.20569 110.071 9.20569C111.263 9.20569 112.101 10.0995 112.101 11.459C112.101 12.8887 111.263 13.7586 110.07 13.7586Z' fill='%23373F45'/%3E%3Cpath d='M118.06 7.94098C119.491 7.94098 120.978 8.33337 120.978 11.1366V14.893H120.063C119.608 14.893 119.238 14.524 119.238 14.0689V10.9965C119.238 9.66506 118.747 9.16047 117.891 9.16047C117.414 9.16047 116.797 9.52486 116.502 9.81915V14.069C116.502 14.1773 116.481 14.2845 116.44 14.3845C116.398 14.4845 116.337 14.5753 116.261 14.6519C116.184 14.7284 116.093 14.7891 115.993 14.8305C115.893 14.8719 115.786 14.8931 115.678 14.8931H114.847V8.10918H115.773C115.932 8.10914 116.087 8.16315 116.212 8.26242C116.337 8.36168 116.424 8.50033 116.46 8.65577C116.881 8.19328 117.428 7.94098 118.06 7.94098ZM122.854 8.09713C123.024 8.09708 123.19 8.1496 123.329 8.2475C123.468 8.34541 123.574 8.48391 123.631 8.64405L125.133 12.8486L126.635 8.64415C126.692 8.48402 126.798 8.34551 126.937 8.2476C127.076 8.1497 127.242 8.09718 127.412 8.09724H128.598L126.152 14.3567C126.091 14.5112 125.986 14.6439 125.849 14.7374C125.711 14.831 125.549 14.881 125.383 14.8809H124.333L121.668 8.09713H122.854Z' fill='%23373F45'/%3E%3Cpath d='M135.085 14.5514C134.566 14.7616 133.513 15.0416 132.418 15.0416C130.496 15.0416 129.024 13.9345 129.024 11.4396C129.024 9.19701 130.451 7.99792 132.191 7.99792C134.338 7.99792 135.254 9.4378 135.158 11.3979C135.139 11.8029 134.786 12.0983 134.38 12.0983H130.679C130.763 13.1916 131.562 13.7662 132.615 13.7662C133.028 13.7662 133.462 13.7452 133.983 13.6481C134.535 13.545 135.085 13.9375 135.085 14.4985V14.5514ZM133.673 10.949C133.785 9.87621 133.061 9.28752 132.191 9.28752C131.321 9.28752 130.734 9.93979 130.679 10.9489L133.673 10.949Z' fill='%23373F45'/%3E%3Cpath d='M137.345 8.11122C137.497 8.11118 137.645 8.16229 137.765 8.25635C137.884 8.35041 137.969 8.48197 138.005 8.62993C138.566 8.20932 139.268 7.94303 139.759 7.94303C139.801 7.94303 140.068 7.94303 140.489 7.99913V8.7265C140.489 9.11748 140.15 9.4147 139.759 9.4147C139.31 9.4147 138.651 9.5829 138.131 9.8773V14.8951H136.462V8.11112L137.345 8.11122ZM156.6 14.0508V8.09104H155.769C155.314 8.09104 154.944 8.45999 154.944 8.9151V14.8748H155.775C156.23 14.8748 156.6 14.5058 156.6 14.0508ZM158.857 12.9447V9.34254H157.749V8.91912C157.749 8.46401 158.118 8.09506 158.574 8.09506H158.857V6.56739L160.499 6.10479V8.09506H161.986V8.51848C161.986 8.97359 161.617 9.34254 161.161 9.34254H160.499V12.7345C160.499 13.2566 160.795 13.44 161.177 13.503C161.626 13.5774 162 13.9024 162 14.3574V14.977C160.446 14.977 158.857 14.9086 158.857 12.9447ZM98.1929 10.1124C98.2033 6.94046 100.598 5.16809 102.895 5.16809C104.171 5.16809 105.342 5.44285 106.304 6.12953L105.914 6.6631C105.654 7.02011 105.16 7.16194 104.749 6.99949C104.169 6.7702 103.622 6.7218 103.215 6.7218C101.335 6.7218 99.9169 7.92849 99.9068 10.1123C99.9169 12.2959 101.335 13.5201 103.215 13.5201C103.622 13.5201 104.169 13.4717 104.749 13.2424C105.16 13.0799 105.654 13.2046 105.914 13.5615L106.304 14.0952C105.342 14.7819 104.171 15.0566 102.895 15.0566C100.598 15.0566 98.2033 13.2842 98.1929 10.1124ZM147.619 5.21768C148.074 5.21768 148.444 5.58663 148.444 6.04174V9.81968L151.82 5.58131C151.897 5.47733 151.997 5.39282 152.112 5.3346C152.227 5.27638 152.355 5.24607 152.484 5.24611H153.984L150.166 10.0615L153.984 14.8749H152.484C152.355 14.8749 152.227 14.8446 152.112 14.7864C151.997 14.7281 151.897 14.6436 151.82 14.5397L148.444 10.3025V14.0508C148.444 14.5059 148.074 14.8749 147.619 14.8749H146.746V5.21768H147.619Z' fill='%23373F45'/%3E%3Cpath d='M0.773438 6.5752H2.68066C3.56543 6.5752 4.2041 6.7041 4.59668 6.96191C4.99219 7.21973 5.18994 7.62695 5.18994 8.18359C5.18994 8.55859 5.09326 8.87061 4.8999 9.11963C4.70654 9.36865 4.42822 9.52539 4.06494 9.58984V9.63379C4.51611 9.71875 4.84717 9.88721 5.05811 10.1392C5.27197 10.3882 5.37891 10.7266 5.37891 11.1543C5.37891 11.7314 5.17676 12.1841 4.77246 12.5122C4.37109 12.8374 3.81152 13 3.09375 13H0.773438V6.5752ZM1.82373 9.22949H2.83447C3.27393 9.22949 3.59473 9.16064 3.79688 9.02295C3.99902 8.88232 4.1001 8.64502 4.1001 8.31104C4.1001 8.00928 3.99023 7.79102 3.77051 7.65625C3.55371 7.52148 3.20801 7.4541 2.7334 7.4541H1.82373V9.22949ZM1.82373 10.082V12.1167H2.93994C3.37939 12.1167 3.71045 12.0332 3.93311 11.8662C4.15869 11.6963 4.27148 11.4297 4.27148 11.0664C4.27148 10.7324 4.15723 10.4849 3.92871 10.3237C3.7002 10.1626 3.35303 10.082 2.88721 10.082H1.82373Z' fill='%23373F45'/%3E%3Cpath d='M13.011 6.5752V10.7324C13.011 11.207 12.9084 11.623 12.7034 11.9805C12.5012 12.335 12.2068 12.6089 11.8201 12.8022C11.4363 12.9927 10.9763 13.0879 10.4402 13.0879C9.6433 13.0879 9.02368 12.877 8.5813 12.4551C8.13892 12.0332 7.91772 11.4531 7.91772 10.7148V6.5752H8.9724V10.6401C8.9724 11.1704 9.09546 11.5615 9.34155 11.8135C9.58765 12.0654 9.96557 12.1914 10.4753 12.1914C11.4656 12.1914 11.9607 11.6714 11.9607 10.6313V6.5752H13.011Z' fill='%23373F45'/%3E%3Cpath d='M15.9146 13V6.5752H16.9649V13H15.9146Z' fill='%23373F45'/%3E%3Cpath d='M19.9255 13V6.5752H20.9758V12.0991H23.696V13H19.9255Z' fill='%23373F45'/%3E%3Cpath d='M28.2828 13H27.2325V7.47607H25.3428V6.5752H30.1724V7.47607H28.2828V13Z' fill='%23373F45'/%3E%3Cpath d='M41.9472 13H40.8046L39.7148 9.16796C39.6679 9.00097 39.6093 8.76074 39.539 8.44727C39.4687 8.13086 39.4262 7.91113 39.4116 7.78809C39.3823 7.97559 39.3339 8.21875 39.2665 8.51758C39.2021 8.81641 39.1479 9.03905 39.1039 9.18554L38.0405 13H36.8979L36.0673 9.7832L35.2236 6.5752H36.2958L37.2143 10.3193C37.3578 10.9199 37.4604 11.4502 37.5219 11.9102C37.5541 11.6611 37.6025 11.3828 37.6669 11.0752C37.7314 10.7676 37.79 10.5186 37.8427 10.3281L38.8886 6.5752H39.9301L41.0024 10.3457C41.1049 10.6943 41.2133 11.2158 41.3276 11.9102C41.3715 11.4912 41.477 10.958 41.644 10.3105L42.558 6.5752H43.6215L41.9472 13Z' fill='%23373F45'/%3E%3Cpath d='M45.7957 13V6.5752H46.846V13H45.7957Z' fill='%23373F45'/%3E%3Cpath d='M52.0258 13H50.9755V7.47607H49.0859V6.5752H53.9155V7.47607H52.0258V13Z' fill='%23373F45'/%3E%3Cpath d='M61.2312 13H60.1765V10.104H57.2146V13H56.1643V6.5752H57.2146V9.20312H60.1765V6.5752H61.2312V13Z' fill='%23373F45'/%3E%3C/svg%3E");}.formkit-form[data-uid="9d5f55b5a0"] .formkit-powered-by-convertkit:hover,.formkit-form[data-uid="9d5f55b5a0"] .formkit-powered-by-convertkit:focus{background-color:#ffffff;-webkit-transform:scale(1.025) perspective(1px);-ms-transform:scale(1.025) perspective(1px);transform:scale(1.025) perspective(1px);opacity:1;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-powered-by-convertkit[data-variant="dark"],.formkit-form[data-uid="9d5f55b5a0"] .formkit-powered-by-convertkit[data-variant="light"]{background-color:transparent;border-color:transparent;width:166px;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-powered-by-convertkit[data-variant="light"]{color:#ffffff;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg width='162' height='20' viewBox='0 0 162 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M83.0561 15.2457C86.675 15.2457 89.4722 12.5154 89.4722 9.14749C89.4722 5.99211 86.8443 4.06563 85.1038 4.06563C82.6801 4.06563 80.7373 5.76407 80.4605 8.28551C80.4092 8.75244 80.0387 9.14403 79.5686 9.14069C78.7871 9.13509 77.6507 9.12841 76.9314 9.13092C76.6217 9.13199 76.3658 8.88106 76.381 8.57196C76.4895 6.38513 77.2218 4.3404 78.618 2.76974C80.1695 1.02445 82.4289 0 85.1038 0C89.5979 0 93.8406 4.07791 93.8406 9.14749C93.8406 14.7608 89.1832 19.3113 83.1517 19.3113C78.8502 19.3113 74.5179 16.5041 73.0053 12.5795C72.9999 12.565 72.9986 12.5492 73.0015 12.534C73.0218 12.4179 73.0617 12.3118 73.1011 12.2074C73.1583 12.0555 73.2143 11.907 73.2062 11.7359L73.18 11.1892C73.174 11.0569 73.2075 10.9258 73.2764 10.8127C73.3452 10.6995 73.4463 10.6094 73.5666 10.554L73.7852 10.4523C73.9077 10.3957 74.0148 10.3105 74.0976 10.204C74.1803 10.0974 74.2363 9.97252 74.2608 9.83983C74.3341 9.43894 74.6865 9.14749 75.0979 9.14749C75.7404 9.14749 76.299 9.57412 76.5088 10.1806C77.5188 13.1 79.1245 15.2457 83.0561 15.2457Z' fill='white'/%3E%3Cpath d='M155.758 6.91365C155.028 6.91365 154.804 6.47916 154.804 5.98857C154.804 5.46997 154.986 5.06348 155.758 5.06348C156.53 5.06348 156.712 5.46997 156.712 5.98857C156.712 6.47905 156.516 6.91365 155.758 6.91365ZM142.441 12.9304V9.32833L141.415 9.32323V8.90392C141.415 8.44719 141.786 8.07758 142.244 8.07986L142.441 8.08095V6.55306L144.082 6.09057V8.08073H145.569V8.50416C145.569 8.61242 145.548 8.71961 145.506 8.81961C145.465 8.91961 145.404 9.01047 145.328 9.08699C145.251 9.16351 145.16 9.2242 145.06 9.26559C144.96 9.30698 144.853 9.32826 144.745 9.32822H144.082V12.7201C144.082 13.2423 144.378 13.4256 144.76 13.4887C145.209 13.5629 145.583 13.888 145.583 14.343V14.9626C144.029 14.9626 142.441 14.8942 142.441 12.9304Z' fill='white'/%3E%3Cpath d='M110.058 7.92554C108.417 7.88344 106.396 8.92062 106.396 11.5137C106.396 14.0646 108.417 15.0738 110.058 15.0318C111.742 15.0738 113.748 14.0646 113.748 11.5137C113.748 8.92062 111.742 7.88344 110.058 7.92554ZM110.07 13.7586C108.878 13.7586 108.032 12.8905 108.032 11.461C108.032 10.1013 108.878 9.20569 110.071 9.20569C111.263 9.20569 112.101 10.0995 112.101 11.459C112.101 12.8887 111.263 13.7586 110.07 13.7586Z' fill='white'/%3E%3Cpath d='M118.06 7.94098C119.491 7.94098 120.978 8.33337 120.978 11.1366V14.893H120.063C119.608 14.893 119.238 14.524 119.238 14.0689V10.9965C119.238 9.66506 118.747 9.16047 117.891 9.16047C117.414 9.16047 116.797 9.52486 116.502 9.81915V14.069C116.502 14.1773 116.481 14.2845 116.44 14.3845C116.398 14.4845 116.337 14.5753 116.261 14.6519C116.184 14.7284 116.093 14.7891 115.993 14.8305C115.893 14.8719 115.786 14.8931 115.678 14.8931H114.847V8.10918H115.773C115.932 8.10914 116.087 8.16315 116.212 8.26242C116.337 8.36168 116.424 8.50033 116.46 8.65577C116.881 8.19328 117.428 7.94098 118.06 7.94098ZM122.854 8.09713C123.024 8.09708 123.19 8.1496 123.329 8.2475C123.468 8.34541 123.574 8.48391 123.631 8.64405L125.133 12.8486L126.635 8.64415C126.692 8.48402 126.798 8.34551 126.937 8.2476C127.076 8.1497 127.242 8.09718 127.412 8.09724H128.598L126.152 14.3567C126.091 14.5112 125.986 14.6439 125.849 14.7374C125.711 14.831 125.549 14.881 125.383 14.8809H124.333L121.668 8.09713H122.854Z' fill='white'/%3E%3Cpath d='M135.085 14.5514C134.566 14.7616 133.513 15.0416 132.418 15.0416C130.496 15.0416 129.024 13.9345 129.024 11.4396C129.024 9.19701 130.451 7.99792 132.191 7.99792C134.338 7.99792 135.254 9.4378 135.158 11.3979C135.139 11.8029 134.786 12.0983 134.38 12.0983H130.679C130.763 13.1916 131.562 13.7662 132.615 13.7662C133.028 13.7662 133.462 13.7452 133.983 13.6481C134.535 13.545 135.085 13.9375 135.085 14.4985V14.5514ZM133.673 10.949C133.785 9.87621 133.061 9.28752 132.191 9.28752C131.321 9.28752 130.734 9.93979 130.679 10.9489L133.673 10.949Z' fill='white'/%3E%3Cpath d='M137.345 8.11122C137.497 8.11118 137.645 8.16229 137.765 8.25635C137.884 8.35041 137.969 8.48197 138.005 8.62993C138.566 8.20932 139.268 7.94303 139.759 7.94303C139.801 7.94303 140.068 7.94303 140.489 7.99913V8.7265C140.489 9.11748 140.15 9.4147 139.759 9.4147C139.31 9.4147 138.651 9.5829 138.131 9.8773V14.8951H136.462V8.11112L137.345 8.11122ZM156.6 14.0508V8.09104H155.769C155.314 8.09104 154.944 8.45999 154.944 8.9151V14.8748H155.775C156.23 14.8748 156.6 14.5058 156.6 14.0508ZM158.857 12.9447V9.34254H157.749V8.91912C157.749 8.46401 158.118 8.09506 158.574 8.09506H158.857V6.56739L160.499 6.10479V8.09506H161.986V8.51848C161.986 8.97359 161.617 9.34254 161.161 9.34254H160.499V12.7345C160.499 13.2566 160.795 13.44 161.177 13.503C161.626 13.5774 162 13.9024 162 14.3574V14.977C160.446 14.977 158.857 14.9086 158.857 12.9447ZM98.1929 10.1124C98.2033 6.94046 100.598 5.16809 102.895 5.16809C104.171 5.16809 105.342 5.44285 106.304 6.12953L105.914 6.6631C105.654 7.02011 105.16 7.16194 104.749 6.99949C104.169 6.7702 103.622 6.7218 103.215 6.7218C101.335 6.7218 99.9169 7.92849 99.9068 10.1123C99.9169 12.2959 101.335 13.5201 103.215 13.5201C103.622 13.5201 104.169 13.4717 104.749 13.2424C105.16 13.0799 105.654 13.2046 105.914 13.5615L106.304 14.0952C105.342 14.7819 104.171 15.0566 102.895 15.0566C100.598 15.0566 98.2033 13.2842 98.1929 10.1124ZM147.619 5.21768C148.074 5.21768 148.444 5.58663 148.444 6.04174V9.81968L151.82 5.58131C151.897 5.47733 151.997 5.39282 152.112 5.3346C152.227 5.27638 152.355 5.24607 152.484 5.24611H153.984L150.166 10.0615L153.984 14.8749H152.484C152.355 14.8749 152.227 14.8446 152.112 14.7864C151.997 14.7281 151.897 14.6436 151.82 14.5397L148.444 10.3025V14.0508C148.444 14.5059 148.074 14.8749 147.619 14.8749H146.746V5.21768H147.619Z' fill='white'/%3E%3Cpath d='M0.773438 6.5752H2.68066C3.56543 6.5752 4.2041 6.7041 4.59668 6.96191C4.99219 7.21973 5.18994 7.62695 5.18994 8.18359C5.18994 8.55859 5.09326 8.87061 4.8999 9.11963C4.70654 9.36865 4.42822 9.52539 4.06494 9.58984V9.63379C4.51611 9.71875 4.84717 9.88721 5.05811 10.1392C5.27197 10.3882 5.37891 10.7266 5.37891 11.1543C5.37891 11.7314 5.17676 12.1841 4.77246 12.5122C4.37109 12.8374 3.81152 13 3.09375 13H0.773438V6.5752ZM1.82373 9.22949H2.83447C3.27393 9.22949 3.59473 9.16064 3.79688 9.02295C3.99902 8.88232 4.1001 8.64502 4.1001 8.31104C4.1001 8.00928 3.99023 7.79102 3.77051 7.65625C3.55371 7.52148 3.20801 7.4541 2.7334 7.4541H1.82373V9.22949ZM1.82373 10.082V12.1167H2.93994C3.37939 12.1167 3.71045 12.0332 3.93311 11.8662C4.15869 11.6963 4.27148 11.4297 4.27148 11.0664C4.27148 10.7324 4.15723 10.4849 3.92871 10.3237C3.7002 10.1626 3.35303 10.082 2.88721 10.082H1.82373Z' fill='white'/%3E%3Cpath d='M13.011 6.5752V10.7324C13.011 11.207 12.9084 11.623 12.7034 11.9805C12.5012 12.335 12.2068 12.6089 11.8201 12.8022C11.4363 12.9927 10.9763 13.0879 10.4402 13.0879C9.6433 13.0879 9.02368 12.877 8.5813 12.4551C8.13892 12.0332 7.91772 11.4531 7.91772 10.7148V6.5752H8.9724V10.6401C8.9724 11.1704 9.09546 11.5615 9.34155 11.8135C9.58765 12.0654 9.96557 12.1914 10.4753 12.1914C11.4656 12.1914 11.9607 11.6714 11.9607 10.6313V6.5752H13.011Z' fill='white'/%3E%3Cpath d='M15.9146 13V6.5752H16.9649V13H15.9146Z' fill='white'/%3E%3Cpath d='M19.9255 13V6.5752H20.9758V12.0991H23.696V13H19.9255Z' fill='white'/%3E%3Cpath d='M28.2828 13H27.2325V7.47607H25.3428V6.5752H30.1724V7.47607H28.2828V13Z' fill='white'/%3E%3Cpath d='M41.9472 13H40.8046L39.7148 9.16796C39.6679 9.00097 39.6093 8.76074 39.539 8.44727C39.4687 8.13086 39.4262 7.91113 39.4116 7.78809C39.3823 7.97559 39.3339 8.21875 39.2665 8.51758C39.2021 8.81641 39.1479 9.03905 39.1039 9.18554L38.0405 13H36.8979L36.0673 9.7832L35.2236 6.5752H36.2958L37.2143 10.3193C37.3578 10.9199 37.4604 11.4502 37.5219 11.9102C37.5541 11.6611 37.6025 11.3828 37.6669 11.0752C37.7314 10.7676 37.79 10.5186 37.8427 10.3281L38.8886 6.5752H39.9301L41.0024 10.3457C41.1049 10.6943 41.2133 11.2158 41.3276 11.9102C41.3715 11.4912 41.477 10.958 41.644 10.3105L42.558 6.5752H43.6215L41.9472 13Z' fill='white'/%3E%3Cpath d='M45.7957 13V6.5752H46.846V13H45.7957Z' fill='white'/%3E%3Cpath d='M52.0258 13H50.9755V7.47607H49.0859V6.5752H53.9155V7.47607H52.0258V13Z' fill='white'/%3E%3Cpath d='M61.2312 13H60.1765V10.104H57.2146V13H56.1643V6.5752H57.2146V9.20312H60.1765V6.5752H61.2312V13Z' fill='white'/%3E%3C/svg%3E");}@-webkit-keyframes formkit-bouncedelay-formkit-form-data-uid-9d5f55b5a0-{0%,80%,100%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}40%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}@keyframes formkit-bouncedelay-formkit-form-data-uid-9d5f55b5a0-{0%,80%,100%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}40%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}.formkit-form[data-uid="9d5f55b5a0"] blockquote{padding:10px 20px;margin:0 0 20px;border-left:5px solid #e1e1e1;} .formkit-form[data-uid="9d5f55b5a0"]{border:1px solid #e3e3e3;max-width:700px;position:relative;overflow:hidden;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-background{width:100%;height:100%;position:absolute;top:0;left:0;background-size:cover;background-position:center;opacity:0.3;}.formkit-form[data-uid="9d5f55b5a0"] [data-style="minimal"]{padding:20px;width:100%;position:relative;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-header{margin:0 0 27px 0;text-align:center;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-subheader{margin:18px 0;text-align:center;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-guarantee{font-size:13px;margin:10px 0 15px 0;text-align:center;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-guarantee > p{margin:0;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-powered-by-convertkit-container{margin-bottom:0;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-fields{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:25px auto 0 auto;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-field{min-width:220px;}.formkit-form[data-uid="9d5f55b5a0"] .formkit-field,.formkit-form[data-uid="9d5f55b5a0"] .formkit-submit{margin:0 0 15px 0;-webkit-flex:1 0 100%;-ms-flex:1 0 100%;flex:1 0 100%;}.formkit-form[data-uid="9d5f55b5a0"][min-width~="600"] [data-style="minimal"]{padding:40px;}.formkit-form[data-uid="9d5f55b5a0"][min-width~="600"] .formkit-fields[data-stacked="false"]{margin-left:-5px;margin-right:-5px;}.formkit-form[data-uid="9d5f55b5a0"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-field,.formkit-form[data-uid="9d5f55b5a0"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-submit{margin:0 5px 15px 5px;}.formkit-form[data-uid="9d5f55b5a0"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-field{-webkit-flex:100 1 auto;-ms-flex:100 1 auto;flex:100 1 auto;}.formkit-form[data-uid="9d5f55b5a0"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-submit{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;} </style></form>
  <br>
</article>
    </main><footer class="footer">
    <span>&copy; 2020 <a href="https://polymath.cloud">Polymath.cloud</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<button class="top-link" id="top-link" type="button" aria-label="go to top" title="Go to Top" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6">
        <path d="M12 6H0l6-6z" /></svg>
</button>

<script src="https://f.convertkit.com/ckjs/ck.5.js"></script>
      <form action="https://app.convertkit.com/forms/1896317/subscriptions" class="seva-form formkit-form" method="post" data-sv-form="1896317" data-uid="813d4e331a" data-format="slide in" data-version="5" data-options="{&quot;settings&quot;:{&quot;after_subscribe&quot;:{&quot;action&quot;:&quot;message&quot;,&quot;success_message&quot;:&quot;Success! Now check your email to confirm your subscription.&quot;,&quot;redirect_url&quot;:&quot;&quot;},&quot;analytics&quot;:{&quot;google&quot;:null,&quot;facebook&quot;:null,&quot;segment&quot;:null,&quot;pinterest&quot;:null,&quot;sparkloop&quot;:null,&quot;googletagmanager&quot;:null},&quot;modal&quot;:{&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;powered_by&quot;:{&quot;show&quot;:true,&quot;url&quot;:&quot;https://convertkit.com?utm_source=dynamic&amp;utm_medium=referral&amp;utm_campaign=poweredby&amp;utm_content=form&quot;},&quot;recaptcha&quot;:{&quot;enabled&quot;:false},&quot;return_visitor&quot;:{&quot;action&quot;:&quot;show&quot;,&quot;custom_content&quot;:&quot;&quot;},&quot;slide_in&quot;:{&quot;display_in&quot;:&quot;bottom_right&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:&quot;0&quot;,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:&quot;0&quot;},&quot;sticky_bar&quot;:{&quot;display_in&quot;:&quot;top&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15}},&quot;version&quot;:&quot;5&quot;}" min-width="400 500 600 700 800" style="background-color: rgb(249, 250, 251); border-radius: 4px;"><div class="formkit-background" style="opacity: 0.2;"></div><div data-style="minimal"><div class="formkit-header" data-element="header" style="color: rgb(77, 77, 77); font-size: 27px; font-weight: 700;"><h1>At least this isn't a full screen popup</h1></div><div class="formkit-subheader" data-element="subheader" style="color: rgb(104, 104, 104); font-size: 18px;"><p>Subscribe to get:</p><p><strong>3 free books</strong> on computer science</p><p>Access to my <strong>weekly newsletter</strong> "Computer Science for Devs"</p></div><ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul><div data-element="fields" data-stacked="false" class="seva-fields formkit-fields"><div class="formkit-field"><input class="formkit-input" name="email_address" aria-label="Email Address" placeholder="Email Address" required="" type="email" style="color: rgb(0, 0, 0); border-color: rgb(227, 227, 227); border-radius: 4px; font-weight: 400;"></div><button data-element="submit" class="formkit-submit formkit-submit" style="color: rgb(255, 255, 255); background-color: rgb(22, 119, 190); border-radius: 4px; font-weight: 400;"><div class="formkit-spinner"><div></div><div></div><div></div></div><span class="">Subscribe</span></button></div><div class="formkit-guarantee" data-element="guarantee" style="color: rgb(77, 77, 77); font-size: 13px; font-weight: 400;">We won't send you spam. Unsubscribe at any time.</div><div class="formkit-powered-by-convertkit-container"><a href="https://convertkit.com?utm_source=dynamic&amp;utm_medium=referral&amp;utm_campaign=poweredby&amp;utm_content=form" data-element="powered-by" class="formkit-powered-by-convertkit" data-variant="dark" target="_blank" rel="noopener noreferrer">Built with ConvertKit</a></div></div><style>.formkit-form[data-uid="813d4e331a"] *{box-sizing:border-box;}.formkit-form[data-uid="813d4e331a"]{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.formkit-form[data-uid="813d4e331a"] legend{border:none;font-size:inherit;margin-bottom:10px;padding:0;position:relative;display:table;}.formkit-form[data-uid="813d4e331a"] fieldset{border:0;padding:0.01em 0 0 0;margin:0;min-width:0;}.formkit-form[data-uid="813d4e331a"] body:not(:-moz-handler-blocked) fieldset{display:table-cell;}.formkit-form[data-uid="813d4e331a"] h1,.formkit-form[data-uid="813d4e331a"] h2,.formkit-form[data-uid="813d4e331a"] h3,.formkit-form[data-uid="813d4e331a"] h4,.formkit-form[data-uid="813d4e331a"] h5,.formkit-form[data-uid="813d4e331a"] h6{color:inherit;font-size:inherit;font-weight:inherit;}.formkit-form[data-uid="813d4e331a"] p{color:inherit;font-size:inherit;font-weight:inherit;}.formkit-form[data-uid="813d4e331a"] ol:not([template-default]),.formkit-form[data-uid="813d4e331a"] ul:not([template-default]),.formkit-form[data-uid="813d4e331a"] blockquote:not([template-default]){text-align:left;}.formkit-form[data-uid="813d4e331a"] p:not([template-default]),.formkit-form[data-uid="813d4e331a"] hr:not([template-default]),.formkit-form[data-uid="813d4e331a"] blockquote:not([template-default]),.formkit-form[data-uid="813d4e331a"] ol:not([template-default]),.formkit-form[data-uid="813d4e331a"] ul:not([template-default]){color:inherit;font-style:initial;}.formkit-form[data-uid="813d4e331a"] .ordered-list,.formkit-form[data-uid="813d4e331a"] .unordered-list{list-style-position:outside !important;padding-left:1em;}.formkit-form[data-uid="813d4e331a"] .list-item{padding-left:0;}.formkit-form[data-uid="813d4e331a"][data-format="modal"]{display:none;}.formkit-form[data-uid="813d4e331a"][data-format="slide in"]{display:none;}.formkit-form[data-uid="813d4e331a"][data-format="sticky bar"]{display:none;}.formkit-sticky-bar .formkit-form[data-uid="813d4e331a"][data-format="sticky bar"]{display:block;}.formkit-form[data-uid="813d4e331a"] .formkit-input,.formkit-form[data-uid="813d4e331a"] .formkit-select,.formkit-form[data-uid="813d4e331a"] .formkit-checkboxes{width:100%;}.formkit-form[data-uid="813d4e331a"] .formkit-button,.formkit-form[data-uid="813d4e331a"] .formkit-submit{border:0;border-radius:5px;color:#ffffff;cursor:pointer;display:inline-block;text-align:center;font-size:15px;font-weight:500;cursor:pointer;margin-bottom:15px;overflow:hidden;padding:0;position:relative;vertical-align:middle;}.formkit-form[data-uid="813d4e331a"] .formkit-button:hover,.formkit-form[data-uid="813d4e331a"] .formkit-submit:hover,.formkit-form[data-uid="813d4e331a"] .formkit-button:focus,.formkit-form[data-uid="813d4e331a"] .formkit-submit:focus{outline:none;}.formkit-form[data-uid="813d4e331a"] .formkit-button:hover > span,.formkit-form[data-uid="813d4e331a"] .formkit-submit:hover > span,.formkit-form[data-uid="813d4e331a"] .formkit-button:focus > span,.formkit-form[data-uid="813d4e331a"] .formkit-submit:focus > span{background-color:rgba(0,0,0,0.1);}.formkit-form[data-uid="813d4e331a"] .formkit-button > span,.formkit-form[data-uid="813d4e331a"] .formkit-submit > span{display:block;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;padding:12px 24px;}.formkit-form[data-uid="813d4e331a"] .formkit-input{background:#ffffff;font-size:15px;padding:12px;border:1px solid #e3e3e3;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;line-height:1.4;margin:0;-webkit-transition:border-color ease-out 300ms;transition:border-color ease-out 300ms;}.formkit-form[data-uid="813d4e331a"] .formkit-input:focus{outline:none;border-color:#1677be;-webkit-transition:border-color ease 300ms;transition:border-color ease 300ms;}.formkit-form[data-uid="813d4e331a"] .formkit-input::-webkit-input-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="813d4e331a"] .formkit-input::-moz-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="813d4e331a"] .formkit-input:-ms-input-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="813d4e331a"] .formkit-input::placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="813d4e331a"] [data-group="dropdown"]{position:relative;display:inline-block;width:100%;}.formkit-form[data-uid="813d4e331a"] [data-group="dropdown"]::before{content:"";top:calc(50% - 2.5px);right:10px;position:absolute;pointer-events:none;border-color:#4f4f4f transparent transparent transparent;border-style:solid;border-width:6px 6px 0 6px;height:0;width:0;z-index:999;}.formkit-form[data-uid="813d4e331a"] [data-group="dropdown"] select{height:auto;width:100%;cursor:pointer;color:#333333;line-height:1.4;margin-bottom:0;padding:0 6px;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:15px;padding:12px;padding-right:25px;border:1px solid #e3e3e3;background:#ffffff;}.formkit-form[data-uid="813d4e331a"] [data-group="dropdown"] select:focus{outline:none;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"]{text-align:left;margin:0;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"]{margin-bottom:10px;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"] *{cursor:pointer;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"]:last-of-type{margin-bottom:0;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]{display:none;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"] + label::after{content:none;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]:checked + label::after{border-color:#ffffff;content:"";}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]:checked + label::before{background:#10bf7a;border-color:#10bf7a;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"] label{position:relative;display:inline-block;padding-left:28px;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"] label::before,.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"] label::after{position:absolute;content:"";display:inline-block;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"] label::before{height:16px;width:16px;border:1px solid #e3e3e3;background:#ffffff;left:0px;top:3px;}.formkit-form[data-uid="813d4e331a"] [data-group="checkboxes"] [data-group="checkbox"] label::after{height:4px;width:8px;border-left:2px solid #4d4d4d;border-bottom:2px solid #4d4d4d;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);left:4px;top:8px;}.formkit-form[data-uid="813d4e331a"] .formkit-alert{background:#f9fafb;border:1px solid #e3e3e3;border-radius:5px;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;list-style:none;margin:25px auto;padding:12px;text-align:center;width:100%;}.formkit-form[data-uid="813d4e331a"] .formkit-alert:empty{display:none;}.formkit-form[data-uid="813d4e331a"] .formkit-alert-success{background:#d3fbeb;border-color:#10bf7a;color:#0c905c;}.formkit-form[data-uid="813d4e331a"] .formkit-alert-error{background:#fde8e2;border-color:#f2643b;color:#ea4110;}.formkit-form[data-uid="813d4e331a"] .formkit-spinner{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:0px;width:0px;margin:0 auto;position:absolute;top:0;left:0;right:0;width:0px;overflow:hidden;text-align:center;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;}.formkit-form[data-uid="813d4e331a"] .formkit-spinner > div{margin:auto;width:12px;height:12px;background-color:#fff;opacity:0.3;border-radius:100%;display:inline-block;-webkit-animation:formkit-bouncedelay-formkit-form-data-uid-813d4e331a- 1.4s infinite ease-in-out both;animation:formkit-bouncedelay-formkit-form-data-uid-813d4e331a- 1.4s infinite ease-in-out both;}.formkit-form[data-uid="813d4e331a"] .formkit-spinner > div:nth-child(1){-webkit-animation-delay:-0.32s;animation-delay:-0.32s;}.formkit-form[data-uid="813d4e331a"] .formkit-spinner > div:nth-child(2){-webkit-animation-delay:-0.16s;animation-delay:-0.16s;}.formkit-form[data-uid="813d4e331a"] .formkit-submit[data-active] .formkit-spinner{opacity:1;height:100%;width:50px;}.formkit-form[data-uid="813d4e331a"] .formkit-submit[data-active] .formkit-spinner ~ span{opacity:0;}.formkit-form[data-uid="813d4e331a"] .formkit-powered-by[data-active="false"]{opacity:0.35;}.formkit-form[data-uid="813d4e331a"] .formkit-powered-by-convertkit-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;z-index:5;margin:10px 0;position:relative;}.formkit-form[data-uid="813d4e331a"] .formkit-powered-by-convertkit-container[data-active="false"]{opacity:0.35;}.formkit-form[data-uid="813d4e331a"] .formkit-powered-by-convertkit{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#ffffff;border:1px solid #dce1e5;border-radius:4px;color:#373f45;cursor:pointer;display:block;height:36px;margin:0 auto;opacity:0.95;padding:0;-webkit-text-decoration:none;text-decoration:none;text-indent:100%;-webkit-transition:ease-in-out all 200ms;transition:ease-in-out all 200ms;white-space:nowrap;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:190px;background-repeat:no-repeat;background-position:center;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg width='162' height='20' viewBox='0 0 162 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M83.0561 15.2457C86.675 15.2457 89.4722 12.5154 89.4722 9.14749C89.4722 5.99211 86.8443 4.06563 85.1038 4.06563C82.6801 4.06563 80.7373 5.76407 80.4605 8.28551C80.4092 8.75244 80.0387 9.14403 79.5686 9.14069C78.7871 9.13509 77.6507 9.12841 76.9314 9.13092C76.6217 9.13199 76.3658 8.88106 76.381 8.57196C76.4895 6.38513 77.2218 4.3404 78.618 2.76974C80.1695 1.02445 82.4289 0 85.1038 0C89.5979 0 93.8406 4.07791 93.8406 9.14749C93.8406 14.7608 89.1832 19.3113 83.1517 19.3113C78.8502 19.3113 74.5179 16.5041 73.0053 12.5795C72.9999 12.565 72.9986 12.5492 73.0015 12.534C73.0218 12.4179 73.0617 12.3118 73.1011 12.2074C73.1583 12.0555 73.2143 11.907 73.2062 11.7359L73.18 11.1892C73.174 11.0569 73.2075 10.9258 73.2764 10.8127C73.3452 10.6995 73.4463 10.6094 73.5666 10.554L73.7852 10.4523C73.9077 10.3957 74.0148 10.3105 74.0976 10.204C74.1803 10.0974 74.2363 9.97252 74.2608 9.83983C74.3341 9.43894 74.6865 9.14749 75.0979 9.14749C75.7404 9.14749 76.299 9.57412 76.5088 10.1806C77.5188 13.1 79.1245 15.2457 83.0561 15.2457Z' fill='%23373F45'/%3E%3Cpath d='M155.758 6.91365C155.028 6.91365 154.804 6.47916 154.804 5.98857C154.804 5.46997 154.986 5.06348 155.758 5.06348C156.53 5.06348 156.712 5.46997 156.712 5.98857C156.712 6.47905 156.516 6.91365 155.758 6.91365ZM142.441 12.9304V9.32833L141.415 9.32323V8.90392C141.415 8.44719 141.786 8.07758 142.244 8.07986L142.441 8.08095V6.55306L144.082 6.09057V8.08073H145.569V8.50416C145.569 8.61242 145.548 8.71961 145.506 8.81961C145.465 8.91961 145.404 9.01047 145.328 9.08699C145.251 9.16351 145.16 9.2242 145.06 9.26559C144.96 9.30698 144.853 9.32826 144.745 9.32822H144.082V12.7201C144.082 13.2423 144.378 13.4256 144.76 13.4887C145.209 13.5629 145.583 13.888 145.583 14.343V14.9626C144.029 14.9626 142.441 14.8942 142.441 12.9304Z' fill='%23373F45'/%3E%3Cpath d='M110.058 7.92554C108.417 7.88344 106.396 8.92062 106.396 11.5137C106.396 14.0646 108.417 15.0738 110.058 15.0318C111.742 15.0738 113.748 14.0646 113.748 11.5137C113.748 8.92062 111.742 7.88344 110.058 7.92554ZM110.07 13.7586C108.878 13.7586 108.032 12.8905 108.032 11.461C108.032 10.1013 108.878 9.20569 110.071 9.20569C111.263 9.20569 112.101 10.0995 112.101 11.459C112.101 12.8887 111.263 13.7586 110.07 13.7586Z' fill='%23373F45'/%3E%3Cpath d='M118.06 7.94098C119.491 7.94098 120.978 8.33337 120.978 11.1366V14.893H120.063C119.608 14.893 119.238 14.524 119.238 14.0689V10.9965C119.238 9.66506 118.747 9.16047 117.891 9.16047C117.414 9.16047 116.797 9.52486 116.502 9.81915V14.069C116.502 14.1773 116.481 14.2845 116.44 14.3845C116.398 14.4845 116.337 14.5753 116.261 14.6519C116.184 14.7284 116.093 14.7891 115.993 14.8305C115.893 14.8719 115.786 14.8931 115.678 14.8931H114.847V8.10918H115.773C115.932 8.10914 116.087 8.16315 116.212 8.26242C116.337 8.36168 116.424 8.50033 116.46 8.65577C116.881 8.19328 117.428 7.94098 118.06 7.94098ZM122.854 8.09713C123.024 8.09708 123.19 8.1496 123.329 8.2475C123.468 8.34541 123.574 8.48391 123.631 8.64405L125.133 12.8486L126.635 8.64415C126.692 8.48402 126.798 8.34551 126.937 8.2476C127.076 8.1497 127.242 8.09718 127.412 8.09724H128.598L126.152 14.3567C126.091 14.5112 125.986 14.6439 125.849 14.7374C125.711 14.831 125.549 14.881 125.383 14.8809H124.333L121.668 8.09713H122.854Z' fill='%23373F45'/%3E%3Cpath d='M135.085 14.5514C134.566 14.7616 133.513 15.0416 132.418 15.0416C130.496 15.0416 129.024 13.9345 129.024 11.4396C129.024 9.19701 130.451 7.99792 132.191 7.99792C134.338 7.99792 135.254 9.4378 135.158 11.3979C135.139 11.8029 134.786 12.0983 134.38 12.0983H130.679C130.763 13.1916 131.562 13.7662 132.615 13.7662C133.028 13.7662 133.462 13.7452 133.983 13.6481C134.535 13.545 135.085 13.9375 135.085 14.4985V14.5514ZM133.673 10.949C133.785 9.87621 133.061 9.28752 132.191 9.28752C131.321 9.28752 130.734 9.93979 130.679 10.9489L133.673 10.949Z' fill='%23373F45'/%3E%3Cpath d='M137.345 8.11122C137.497 8.11118 137.645 8.16229 137.765 8.25635C137.884 8.35041 137.969 8.48197 138.005 8.62993C138.566 8.20932 139.268 7.94303 139.759 7.94303C139.801 7.94303 140.068 7.94303 140.489 7.99913V8.7265C140.489 9.11748 140.15 9.4147 139.759 9.4147C139.31 9.4147 138.651 9.5829 138.131 9.8773V14.8951H136.462V8.11112L137.345 8.11122ZM156.6 14.0508V8.09104H155.769C155.314 8.09104 154.944 8.45999 154.944 8.9151V14.8748H155.775C156.23 14.8748 156.6 14.5058 156.6 14.0508ZM158.857 12.9447V9.34254H157.749V8.91912C157.749 8.46401 158.118 8.09506 158.574 8.09506H158.857V6.56739L160.499 6.10479V8.09506H161.986V8.51848C161.986 8.97359 161.617 9.34254 161.161 9.34254H160.499V12.7345C160.499 13.2566 160.795 13.44 161.177 13.503C161.626 13.5774 162 13.9024 162 14.3574V14.977C160.446 14.977 158.857 14.9086 158.857 12.9447ZM98.1929 10.1124C98.2033 6.94046 100.598 5.16809 102.895 5.16809C104.171 5.16809 105.342 5.44285 106.304 6.12953L105.914 6.6631C105.654 7.02011 105.16 7.16194 104.749 6.99949C104.169 6.7702 103.622 6.7218 103.215 6.7218C101.335 6.7218 99.9169 7.92849 99.9068 10.1123C99.9169 12.2959 101.335 13.5201 103.215 13.5201C103.622 13.5201 104.169 13.4717 104.749 13.2424C105.16 13.0799 105.654 13.2046 105.914 13.5615L106.304 14.0952C105.342 14.7819 104.171 15.0566 102.895 15.0566C100.598 15.0566 98.2033 13.2842 98.1929 10.1124ZM147.619 5.21768C148.074 5.21768 148.444 5.58663 148.444 6.04174V9.81968L151.82 5.58131C151.897 5.47733 151.997 5.39282 152.112 5.3346C152.227 5.27638 152.355 5.24607 152.484 5.24611H153.984L150.166 10.0615L153.984 14.8749H152.484C152.355 14.8749 152.227 14.8446 152.112 14.7864C151.997 14.7281 151.897 14.6436 151.82 14.5397L148.444 10.3025V14.0508C148.444 14.5059 148.074 14.8749 147.619 14.8749H146.746V5.21768H147.619Z' fill='%23373F45'/%3E%3Cpath d='M0.773438 6.5752H2.68066C3.56543 6.5752 4.2041 6.7041 4.59668 6.96191C4.99219 7.21973 5.18994 7.62695 5.18994 8.18359C5.18994 8.55859 5.09326 8.87061 4.8999 9.11963C4.70654 9.36865 4.42822 9.52539 4.06494 9.58984V9.63379C4.51611 9.71875 4.84717 9.88721 5.05811 10.1392C5.27197 10.3882 5.37891 10.7266 5.37891 11.1543C5.37891 11.7314 5.17676 12.1841 4.77246 12.5122C4.37109 12.8374 3.81152 13 3.09375 13H0.773438V6.5752ZM1.82373 9.22949H2.83447C3.27393 9.22949 3.59473 9.16064 3.79688 9.02295C3.99902 8.88232 4.1001 8.64502 4.1001 8.31104C4.1001 8.00928 3.99023 7.79102 3.77051 7.65625C3.55371 7.52148 3.20801 7.4541 2.7334 7.4541H1.82373V9.22949ZM1.82373 10.082V12.1167H2.93994C3.37939 12.1167 3.71045 12.0332 3.93311 11.8662C4.15869 11.6963 4.27148 11.4297 4.27148 11.0664C4.27148 10.7324 4.15723 10.4849 3.92871 10.3237C3.7002 10.1626 3.35303 10.082 2.88721 10.082H1.82373Z' fill='%23373F45'/%3E%3Cpath d='M13.011 6.5752V10.7324C13.011 11.207 12.9084 11.623 12.7034 11.9805C12.5012 12.335 12.2068 12.6089 11.8201 12.8022C11.4363 12.9927 10.9763 13.0879 10.4402 13.0879C9.6433 13.0879 9.02368 12.877 8.5813 12.4551C8.13892 12.0332 7.91772 11.4531 7.91772 10.7148V6.5752H8.9724V10.6401C8.9724 11.1704 9.09546 11.5615 9.34155 11.8135C9.58765 12.0654 9.96557 12.1914 10.4753 12.1914C11.4656 12.1914 11.9607 11.6714 11.9607 10.6313V6.5752H13.011Z' fill='%23373F45'/%3E%3Cpath d='M15.9146 13V6.5752H16.9649V13H15.9146Z' fill='%23373F45'/%3E%3Cpath d='M19.9255 13V6.5752H20.9758V12.0991H23.696V13H19.9255Z' fill='%23373F45'/%3E%3Cpath d='M28.2828 13H27.2325V7.47607H25.3428V6.5752H30.1724V7.47607H28.2828V13Z' fill='%23373F45'/%3E%3Cpath d='M41.9472 13H40.8046L39.7148 9.16796C39.6679 9.00097 39.6093 8.76074 39.539 8.44727C39.4687 8.13086 39.4262 7.91113 39.4116 7.78809C39.3823 7.97559 39.3339 8.21875 39.2665 8.51758C39.2021 8.81641 39.1479 9.03905 39.1039 9.18554L38.0405 13H36.8979L36.0673 9.7832L35.2236 6.5752H36.2958L37.2143 10.3193C37.3578 10.9199 37.4604 11.4502 37.5219 11.9102C37.5541 11.6611 37.6025 11.3828 37.6669 11.0752C37.7314 10.7676 37.79 10.5186 37.8427 10.3281L38.8886 6.5752H39.9301L41.0024 10.3457C41.1049 10.6943 41.2133 11.2158 41.3276 11.9102C41.3715 11.4912 41.477 10.958 41.644 10.3105L42.558 6.5752H43.6215L41.9472 13Z' fill='%23373F45'/%3E%3Cpath d='M45.7957 13V6.5752H46.846V13H45.7957Z' fill='%23373F45'/%3E%3Cpath d='M52.0258 13H50.9755V7.47607H49.0859V6.5752H53.9155V7.47607H52.0258V13Z' fill='%23373F45'/%3E%3Cpath d='M61.2312 13H60.1765V10.104H57.2146V13H56.1643V6.5752H57.2146V9.20312H60.1765V6.5752H61.2312V13Z' fill='%23373F45'/%3E%3C/svg%3E");}.formkit-form[data-uid="813d4e331a"] .formkit-powered-by-convertkit:hover,.formkit-form[data-uid="813d4e331a"] .formkit-powered-by-convertkit:focus{background-color:#ffffff;-webkit-transform:scale(1.025) perspective(1px);-ms-transform:scale(1.025) perspective(1px);transform:scale(1.025) perspective(1px);opacity:1;}.formkit-form[data-uid="813d4e331a"] .formkit-powered-by-convertkit[data-variant="dark"],.formkit-form[data-uid="813d4e331a"] .formkit-powered-by-convertkit[data-variant="light"]{background-color:transparent;border-color:transparent;width:166px;}.formkit-form[data-uid="813d4e331a"] .formkit-powered-by-convertkit[data-variant="light"]{color:#ffffff;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg width='162' height='20' viewBox='0 0 162 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M83.0561 15.2457C86.675 15.2457 89.4722 12.5154 89.4722 9.14749C89.4722 5.99211 86.8443 4.06563 85.1038 4.06563C82.6801 4.06563 80.7373 5.76407 80.4605 8.28551C80.4092 8.75244 80.0387 9.14403 79.5686 9.14069C78.7871 9.13509 77.6507 9.12841 76.9314 9.13092C76.6217 9.13199 76.3658 8.88106 76.381 8.57196C76.4895 6.38513 77.2218 4.3404 78.618 2.76974C80.1695 1.02445 82.4289 0 85.1038 0C89.5979 0 93.8406 4.07791 93.8406 9.14749C93.8406 14.7608 89.1832 19.3113 83.1517 19.3113C78.8502 19.3113 74.5179 16.5041 73.0053 12.5795C72.9999 12.565 72.9986 12.5492 73.0015 12.534C73.0218 12.4179 73.0617 12.3118 73.1011 12.2074C73.1583 12.0555 73.2143 11.907 73.2062 11.7359L73.18 11.1892C73.174 11.0569 73.2075 10.9258 73.2764 10.8127C73.3452 10.6995 73.4463 10.6094 73.5666 10.554L73.7852 10.4523C73.9077 10.3957 74.0148 10.3105 74.0976 10.204C74.1803 10.0974 74.2363 9.97252 74.2608 9.83983C74.3341 9.43894 74.6865 9.14749 75.0979 9.14749C75.7404 9.14749 76.299 9.57412 76.5088 10.1806C77.5188 13.1 79.1245 15.2457 83.0561 15.2457Z' fill='white'/%3E%3Cpath d='M155.758 6.91365C155.028 6.91365 154.804 6.47916 154.804 5.98857C154.804 5.46997 154.986 5.06348 155.758 5.06348C156.53 5.06348 156.712 5.46997 156.712 5.98857C156.712 6.47905 156.516 6.91365 155.758 6.91365ZM142.441 12.9304V9.32833L141.415 9.32323V8.90392C141.415 8.44719 141.786 8.07758 142.244 8.07986L142.441 8.08095V6.55306L144.082 6.09057V8.08073H145.569V8.50416C145.569 8.61242 145.548 8.71961 145.506 8.81961C145.465 8.91961 145.404 9.01047 145.328 9.08699C145.251 9.16351 145.16 9.2242 145.06 9.26559C144.96 9.30698 144.853 9.32826 144.745 9.32822H144.082V12.7201C144.082 13.2423 144.378 13.4256 144.76 13.4887C145.209 13.5629 145.583 13.888 145.583 14.343V14.9626C144.029 14.9626 142.441 14.8942 142.441 12.9304Z' fill='white'/%3E%3Cpath d='M110.058 7.92554C108.417 7.88344 106.396 8.92062 106.396 11.5137C106.396 14.0646 108.417 15.0738 110.058 15.0318C111.742 15.0738 113.748 14.0646 113.748 11.5137C113.748 8.92062 111.742 7.88344 110.058 7.92554ZM110.07 13.7586C108.878 13.7586 108.032 12.8905 108.032 11.461C108.032 10.1013 108.878 9.20569 110.071 9.20569C111.263 9.20569 112.101 10.0995 112.101 11.459C112.101 12.8887 111.263 13.7586 110.07 13.7586Z' fill='white'/%3E%3Cpath d='M118.06 7.94098C119.491 7.94098 120.978 8.33337 120.978 11.1366V14.893H120.063C119.608 14.893 119.238 14.524 119.238 14.0689V10.9965C119.238 9.66506 118.747 9.16047 117.891 9.16047C117.414 9.16047 116.797 9.52486 116.502 9.81915V14.069C116.502 14.1773 116.481 14.2845 116.44 14.3845C116.398 14.4845 116.337 14.5753 116.261 14.6519C116.184 14.7284 116.093 14.7891 115.993 14.8305C115.893 14.8719 115.786 14.8931 115.678 14.8931H114.847V8.10918H115.773C115.932 8.10914 116.087 8.16315 116.212 8.26242C116.337 8.36168 116.424 8.50033 116.46 8.65577C116.881 8.19328 117.428 7.94098 118.06 7.94098ZM122.854 8.09713C123.024 8.09708 123.19 8.1496 123.329 8.2475C123.468 8.34541 123.574 8.48391 123.631 8.64405L125.133 12.8486L126.635 8.64415C126.692 8.48402 126.798 8.34551 126.937 8.2476C127.076 8.1497 127.242 8.09718 127.412 8.09724H128.598L126.152 14.3567C126.091 14.5112 125.986 14.6439 125.849 14.7374C125.711 14.831 125.549 14.881 125.383 14.8809H124.333L121.668 8.09713H122.854Z' fill='white'/%3E%3Cpath d='M135.085 14.5514C134.566 14.7616 133.513 15.0416 132.418 15.0416C130.496 15.0416 129.024 13.9345 129.024 11.4396C129.024 9.19701 130.451 7.99792 132.191 7.99792C134.338 7.99792 135.254 9.4378 135.158 11.3979C135.139 11.8029 134.786 12.0983 134.38 12.0983H130.679C130.763 13.1916 131.562 13.7662 132.615 13.7662C133.028 13.7662 133.462 13.7452 133.983 13.6481C134.535 13.545 135.085 13.9375 135.085 14.4985V14.5514ZM133.673 10.949C133.785 9.87621 133.061 9.28752 132.191 9.28752C131.321 9.28752 130.734 9.93979 130.679 10.9489L133.673 10.949Z' fill='white'/%3E%3Cpath d='M137.345 8.11122C137.497 8.11118 137.645 8.16229 137.765 8.25635C137.884 8.35041 137.969 8.48197 138.005 8.62993C138.566 8.20932 139.268 7.94303 139.759 7.94303C139.801 7.94303 140.068 7.94303 140.489 7.99913V8.7265C140.489 9.11748 140.15 9.4147 139.759 9.4147C139.31 9.4147 138.651 9.5829 138.131 9.8773V14.8951H136.462V8.11112L137.345 8.11122ZM156.6 14.0508V8.09104H155.769C155.314 8.09104 154.944 8.45999 154.944 8.9151V14.8748H155.775C156.23 14.8748 156.6 14.5058 156.6 14.0508ZM158.857 12.9447V9.34254H157.749V8.91912C157.749 8.46401 158.118 8.09506 158.574 8.09506H158.857V6.56739L160.499 6.10479V8.09506H161.986V8.51848C161.986 8.97359 161.617 9.34254 161.161 9.34254H160.499V12.7345C160.499 13.2566 160.795 13.44 161.177 13.503C161.626 13.5774 162 13.9024 162 14.3574V14.977C160.446 14.977 158.857 14.9086 158.857 12.9447ZM98.1929 10.1124C98.2033 6.94046 100.598 5.16809 102.895 5.16809C104.171 5.16809 105.342 5.44285 106.304 6.12953L105.914 6.6631C105.654 7.02011 105.16 7.16194 104.749 6.99949C104.169 6.7702 103.622 6.7218 103.215 6.7218C101.335 6.7218 99.9169 7.92849 99.9068 10.1123C99.9169 12.2959 101.335 13.5201 103.215 13.5201C103.622 13.5201 104.169 13.4717 104.749 13.2424C105.16 13.0799 105.654 13.2046 105.914 13.5615L106.304 14.0952C105.342 14.7819 104.171 15.0566 102.895 15.0566C100.598 15.0566 98.2033 13.2842 98.1929 10.1124ZM147.619 5.21768C148.074 5.21768 148.444 5.58663 148.444 6.04174V9.81968L151.82 5.58131C151.897 5.47733 151.997 5.39282 152.112 5.3346C152.227 5.27638 152.355 5.24607 152.484 5.24611H153.984L150.166 10.0615L153.984 14.8749H152.484C152.355 14.8749 152.227 14.8446 152.112 14.7864C151.997 14.7281 151.897 14.6436 151.82 14.5397L148.444 10.3025V14.0508C148.444 14.5059 148.074 14.8749 147.619 14.8749H146.746V5.21768H147.619Z' fill='white'/%3E%3Cpath d='M0.773438 6.5752H2.68066C3.56543 6.5752 4.2041 6.7041 4.59668 6.96191C4.99219 7.21973 5.18994 7.62695 5.18994 8.18359C5.18994 8.55859 5.09326 8.87061 4.8999 9.11963C4.70654 9.36865 4.42822 9.52539 4.06494 9.58984V9.63379C4.51611 9.71875 4.84717 9.88721 5.05811 10.1392C5.27197 10.3882 5.37891 10.7266 5.37891 11.1543C5.37891 11.7314 5.17676 12.1841 4.77246 12.5122C4.37109 12.8374 3.81152 13 3.09375 13H0.773438V6.5752ZM1.82373 9.22949H2.83447C3.27393 9.22949 3.59473 9.16064 3.79688 9.02295C3.99902 8.88232 4.1001 8.64502 4.1001 8.31104C4.1001 8.00928 3.99023 7.79102 3.77051 7.65625C3.55371 7.52148 3.20801 7.4541 2.7334 7.4541H1.82373V9.22949ZM1.82373 10.082V12.1167H2.93994C3.37939 12.1167 3.71045 12.0332 3.93311 11.8662C4.15869 11.6963 4.27148 11.4297 4.27148 11.0664C4.27148 10.7324 4.15723 10.4849 3.92871 10.3237C3.7002 10.1626 3.35303 10.082 2.88721 10.082H1.82373Z' fill='white'/%3E%3Cpath d='M13.011 6.5752V10.7324C13.011 11.207 12.9084 11.623 12.7034 11.9805C12.5012 12.335 12.2068 12.6089 11.8201 12.8022C11.4363 12.9927 10.9763 13.0879 10.4402 13.0879C9.6433 13.0879 9.02368 12.877 8.5813 12.4551C8.13892 12.0332 7.91772 11.4531 7.91772 10.7148V6.5752H8.9724V10.6401C8.9724 11.1704 9.09546 11.5615 9.34155 11.8135C9.58765 12.0654 9.96557 12.1914 10.4753 12.1914C11.4656 12.1914 11.9607 11.6714 11.9607 10.6313V6.5752H13.011Z' fill='white'/%3E%3Cpath d='M15.9146 13V6.5752H16.9649V13H15.9146Z' fill='white'/%3E%3Cpath d='M19.9255 13V6.5752H20.9758V12.0991H23.696V13H19.9255Z' fill='white'/%3E%3Cpath d='M28.2828 13H27.2325V7.47607H25.3428V6.5752H30.1724V7.47607H28.2828V13Z' fill='white'/%3E%3Cpath d='M41.9472 13H40.8046L39.7148 9.16796C39.6679 9.00097 39.6093 8.76074 39.539 8.44727C39.4687 8.13086 39.4262 7.91113 39.4116 7.78809C39.3823 7.97559 39.3339 8.21875 39.2665 8.51758C39.2021 8.81641 39.1479 9.03905 39.1039 9.18554L38.0405 13H36.8979L36.0673 9.7832L35.2236 6.5752H36.2958L37.2143 10.3193C37.3578 10.9199 37.4604 11.4502 37.5219 11.9102C37.5541 11.6611 37.6025 11.3828 37.6669 11.0752C37.7314 10.7676 37.79 10.5186 37.8427 10.3281L38.8886 6.5752H39.9301L41.0024 10.3457C41.1049 10.6943 41.2133 11.2158 41.3276 11.9102C41.3715 11.4912 41.477 10.958 41.644 10.3105L42.558 6.5752H43.6215L41.9472 13Z' fill='white'/%3E%3Cpath d='M45.7957 13V6.5752H46.846V13H45.7957Z' fill='white'/%3E%3Cpath d='M52.0258 13H50.9755V7.47607H49.0859V6.5752H53.9155V7.47607H52.0258V13Z' fill='white'/%3E%3Cpath d='M61.2312 13H60.1765V10.104H57.2146V13H56.1643V6.5752H57.2146V9.20312H60.1765V6.5752H61.2312V13Z' fill='white'/%3E%3C/svg%3E");}@-webkit-keyframes formkit-bouncedelay-formkit-form-data-uid-813d4e331a-{0%,80%,100%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}40%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}@keyframes formkit-bouncedelay-formkit-form-data-uid-813d4e331a-{0%,80%,100%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}40%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}.formkit-form[data-uid="813d4e331a"] blockquote{padding:10px 20px;margin:0 0 20px;border-left:5px solid #e1e1e1;} .formkit-form[data-uid="813d4e331a"]{border:1px solid #e3e3e3;max-width:700px;position:relative;overflow:hidden;}.formkit-form[data-uid="813d4e331a"] .formkit-background{width:100%;height:100%;position:absolute;top:0;left:0;background-size:cover;background-position:center;opacity:0.3;}.formkit-form[data-uid="813d4e331a"] [data-style="minimal"]{padding:20px;width:100%;position:relative;}.formkit-form[data-uid="813d4e331a"] .formkit-header{margin:0 0 27px 0;text-align:center;}.formkit-form[data-uid="813d4e331a"] .formkit-subheader{margin:18px 0;text-align:center;}.formkit-form[data-uid="813d4e331a"] .formkit-guarantee{font-size:13px;margin:10px 0 15px 0;text-align:center;}.formkit-form[data-uid="813d4e331a"] .formkit-guarantee > p{margin:0;}.formkit-form[data-uid="813d4e331a"] .formkit-powered-by-convertkit-container{margin-bottom:0;}.formkit-form[data-uid="813d4e331a"] .formkit-fields{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:25px auto 0 auto;}.formkit-form[data-uid="813d4e331a"] .formkit-field{min-width:220px;}.formkit-form[data-uid="813d4e331a"] .formkit-field,.formkit-form[data-uid="813d4e331a"] .formkit-submit{margin:0 0 15px 0;-webkit-flex:1 0 100%;-ms-flex:1 0 100%;flex:1 0 100%;}.formkit-form[data-uid="813d4e331a"][min-width~="600"] [data-style="minimal"]{padding:40px;}.formkit-form[data-uid="813d4e331a"][min-width~="600"] .formkit-fields[data-stacked="false"]{margin-left:-5px;margin-right:-5px;}.formkit-form[data-uid="813d4e331a"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-field,.formkit-form[data-uid="813d4e331a"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-submit{margin:0 5px 15px 5px;}.formkit-form[data-uid="813d4e331a"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-field{-webkit-flex:100 1 auto;-ms-flex:100 1 auto;flex:100 1 auto;}.formkit-form[data-uid="813d4e331a"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-submit{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;} </style></form>

<script defer src="https://polymath.cloud/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
    mybutton.onclick = function () {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
        window.location.hash = ''
    }

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

</body>

</html>
